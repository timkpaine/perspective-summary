{
  "version": 3,
  "sources": ["../../src/js/index.js", "../../src/js/style_handlers/column_header.js", "../../src/js/style_handlers/group_header.js", "../../src/js/model/index.js", "../../src/js/style_handlers/table_cell/cell_flash.js", "../../src/js/color_utils.js", "../../src/js/style_handlers/table_cell/numeric.js", "../../src/js/style_handlers/table_cell/string.js", "../../src/js/style_handlers/table_cell/datetime.js", "../../src/js/style_handlers/table_cell/boolean.js", "../../src/js/style_handlers/table_cell/row_header.js", "../../src/js/style_handlers/table_cell/index.js", "../../src/js/event_handlers/sort.js", "../../src/js/style_menu.js", "../../src/js/event_handlers/expand_collapse.js", "../../src/js/event_handlers/header_click.js", "../../src/js/style_handlers/editable.js", "../../src/js/style_handlers/focus.js", "../../src/js/event_handlers/edit_click.js", "../../src/js/event_handlers/focus.js", "../../src/js/get_cell_config.js", "../../src/js/event_handlers/row_select_click.js", "../../src/js/style_handlers/selection.js", "../../src/js/event_handlers/deselect_all.js", "../../src/js/model/create.js", "../../src/js/data_listener/formatter_cache.js", "../../src/js/data_listener/format_cell.js", "../../src/js/data_listener/format_tree_header.js", "../../src/js/data_listener/index.js", "../../src/js/event_handlers/dispatch_click.js", "../../src/js/plugin/activate.js", "../../src/js/model/column_overrides.js", "../../src/js/model/toolbar.js", "../../src/js/plugin/restore.js", "../../src/js/plugin/connected.js", "../../src/js/plugin/save.js", "../../src/js/plugin/draw.js", "../../src/js/custom_elements/datagrid.js", "../../src/js/custom_elements/toolbar.js"],
  "sourcesContent": ["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport \"regular-table\";\n\nimport MATERIAL_STYLE from \"../../dist/css/perspective-viewer-datagrid.css\";\nimport { HTMLPerspectiveViewerDatagridPluginElement } from \"./custom_elements/datagrid.js\";\nimport { HTMLPerspectiveViewerDatagridToolbarElement } from \"./custom_elements/toolbar.js\";\n\n/**\n * Appends the default table CSS to `<head>`, should be run once on module\n * import.\n *\n */\nfunction _register_global_styles() {\n    const style = document.createElement(\"style\");\n    style.textContent = MATERIAL_STYLE;\n    document.head.insertBefore(style, document.head.firstChild);\n}\n\n/******************************************************************************\n *\n * Main\n *\n */\n\nasync function _register_element() {\n    customElements.define(\n        \"perspective-viewer-datagrid-toolbar\",\n        HTMLPerspectiveViewerDatagridToolbarElement\n    );\n\n    customElements.define(\n        \"perspective-viewer-datagrid\",\n        HTMLPerspectiveViewerDatagridPluginElement\n    );\n\n    await customElements.whenDefined(\"perspective-viewer\");\n    customElements\n        .get(\"perspective-viewer\")\n        .registerPlugin(\"perspective-viewer-datagrid\");\n}\n\n_register_element();\n_register_global_styles();\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nfunction get_psp_type(metadata) {\n    if (metadata.x >= 0) {\n        return this._column_types[metadata.x];\n    } else {\n        return this._row_header_types[metadata.row_header_x - 1];\n    }\n}\n\nexport function column_header_style_listener(regularTable) {\n    const header_depth = regularTable._view_cache.config.row_pivots.length - 1;\n    let group_header_trs = Array.from(\n        regularTable.children[0].children[0].children\n    );\n\n    if (group_header_trs.length > 0) {\n        let [col_headers] = group_header_trs.splice(\n            group_header_trs.length - 1,\n            1\n        );\n\n        for (const td of col_headers?.children) {\n            const metadata = regularTable.getMeta(td);\n            const column_name =\n                metadata.column_header?.[metadata.column_header?.length - 1];\n            const sort = this._config.sort.find((x) => x[0] === column_name);\n            let needs_border = metadata.row_header_x === header_depth;\n            const is_corner = typeof metadata.x === \"undefined\";\n            needs_border =\n                needs_border ||\n                (metadata.x + 1) % this._config.columns.length === 0;\n            td.classList.toggle(\"psp-header-border\", needs_border);\n            td.classList.toggle(\"psp-header-group\", false);\n            td.classList.toggle(\"psp-header-leaf\", true);\n            td.classList.toggle(\"psp-is-top\", false);\n            td.classList.toggle(\"psp-header-corner\", is_corner);\n            td.classList.toggle(\n                \"psp-header-sort-asc\",\n                !!sort && sort[1] === \"asc\"\n            );\n            td.classList.toggle(\n                \"psp-header-sort-desc\",\n                !!sort && sort[1] === \"desc\"\n            );\n            td.classList.toggle(\n                \"psp-header-sort-col-asc\",\n                !!sort && sort[1] === \"col asc\"\n            );\n            td.classList.toggle(\n                \"psp-header-sort-col-desc\",\n                !!sort && sort[1] === \"col desc\"\n            );\n\n            let type = get_psp_type.call(this, metadata);\n            const is_numeric = type === \"integer\" || type === \"float\";\n            const is_string = type === \"string\";\n            const is_date = type === \"date\";\n            const is_datetime = type === \"datetime\";\n            td.classList.toggle(\"psp-align-right\", is_numeric);\n            td.classList.toggle(\"psp-align-left\", !is_numeric);\n            td.classList.toggle(\n                \"psp-menu-open\",\n                this._open_column_styles_menu[0] === metadata._virtual_x\n            );\n            td.classList.toggle(\n                \"psp-menu-enabled\",\n                (is_string || is_numeric || is_date || is_datetime) &&\n                    !is_corner\n            );\n\n            td.classList.toggle(\n                \"psp-is-width-override\",\n                regularTable._column_sizes?.override[metadata.size_key] !==\n                    undefined\n            );\n        }\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport function group_header_style_listener(regularTable) {\n    const header_depth = regularTable._view_cache.config.row_pivots.length - 1;\n    let group_header_trs = Array.from(\n        regularTable.children[0].children[0].children\n    );\n\n    const m = [];\n    let marked = new Set();\n    const table = regularTable.children[0];\n    for (let y = 0; y < group_header_trs.length; y++) {\n        let row = table.rows[y];\n        const tops = new Set();\n        for (let x = 0; x < row.cells.length; x++) {\n            const td = row.cells[x];\n            td.style.backgroundColor = \"\";\n            const metadata = regularTable.getMeta(td);\n            let needs_border =\n                metadata.row_header_x === header_depth || metadata.x >= 0;\n            td.classList.toggle(\"psp-align-right\", false);\n            td.classList.toggle(\"psp-align-left\", false);\n            td.classList.toggle(\"psp-header-group\", true);\n            td.classList.toggle(\"psp-header-leaf\", false);\n            td.classList.toggle(\"psp-header-border\", needs_border);\n            td.classList.toggle(\n                \"psp-header-group-corner\",\n                typeof metadata.x === \"undefined\"\n            );\n            td.classList.toggle(\"psp-color-mode-bar\", false);\n\n            td.classList.toggle(\"psp-header-sort-asc\", false);\n            td.classList.toggle(\"psp-header-sort-desc\", false);\n            td.classList.toggle(\"psp-header-sort-col-asc\", false);\n            td.classList.toggle(\"psp-header-sort-col-desc\", false);\n\n            let cell = row.cells[x],\n                xx = x,\n                tx,\n                ty;\n\n            for (; m[y] && m[y][xx]; ++xx);\n            tops.add(xx);\n            for (tx = xx; tx < xx + cell.colSpan; ++tx) {\n                for (ty = y; ty < y + cell.rowSpan; ++ty) {\n                    if (!m[ty]) m[ty] = [];\n                    m[ty][tx] = true;\n                }\n            }\n\n            cell.classList.toggle(\"psp-is-top\", y === 0 || !marked.has(tx));\n        }\n        marked = tops;\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport const PRIVATE_PLUGIN_SYMBOL = Symbol(\"Plugin Symbol\");\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport function style_cell_flash(\n    metadata,\n    td,\n    [, , , , , pos_s, pos_e],\n    [, , , , , neg_s, neg_e]\n) {\n    const id = this._ids?.[metadata.dy]?.join(\"|\");\n    const metadata_path = metadata.column_header.join(\"|\");\n    if (\n        this.last_reverse_columns?.has(metadata_path) &&\n        this.last_reverse_ids?.has(id)\n    ) {\n        const row_idx = this.last_reverse_ids?.get(id);\n        const col_idx = this.last_reverse_columns.get(metadata_path);\n        if (!this._is_old_viewport) {\n            td.style.animation = \"\";\n        } else if (this.last_meta?.[col_idx]?.[row_idx] > metadata.user) {\n            td.style.setProperty(\"--pulse--background-color-start\", neg_s);\n            td.style.setProperty(\"--pulse--background-color-end\", neg_e);\n            if (td.style.animationName === \"pulse_neg\") {\n                td.style.animation = \"pulse_neg2 0.5s linear\";\n            } else {\n                td.style.animation = \"pulse_neg 0.5s linear\";\n            }\n        } else if (this.last_meta?.[col_idx]?.[row_idx] < metadata.user) {\n            td.style.setProperty(\"--pulse--background-color-start\", pos_s);\n            td.style.setProperty(\"--pulse--background-color-end\", pos_e);\n            if (td.style.animationName === \"pulse_pos\") {\n                td.style.animation = \"pulse_pos2 0.5s linear\";\n            } else {\n                td.style.animation = \"pulse_pos 0.5s linear\";\n            }\n        } else if (row_idx !== metadata.dy) {\n            td.style.animation = \"\";\n        }\n    } else {\n        td.style.animation = \"\";\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport chroma from \"chroma-js\";\n\nexport function blend(a, b) {\n    return chroma.mix(a, `rgb(${b[0]},${b[1]},${b[2]})`, 0.5).hex();\n}\n\n// AFAICT `chroma-js` has no alpha-aware blending? So we need a function to get\n// the color of a heatmap cell over the background.\nexport function rgbaToRgb([r, g, b, a], source = [255, 255, 255]) {\n    function f(i, c) {\n        return ((1 - a) * (source[i] / 255) + a * (c / 255)) * 255;\n    }\n\n    return [f(0, r), f(1, g), f(2, b)];\n}\n\n// Chroma does this but why bother?\nexport function infer_foreground_from_background([r, g, b]) {\n    // TODO Implement dark/light themes.\n    return Math.sqrt(r * r * 0.299 + g * g * 0.587 + b * b * 0.114) > 130\n        ? \"#161616\"\n        : \"#ffffff\";\n}\n\nfunction make_gradient(chromahex) {\n    const [r, g, b] = chromahex.rgb();\n    const [r1, g1, b1] = chromahex\n        .set(\"hsl.h\", (chromahex.get(\"hsl.h\") - 15) % 360)\n        .rgb();\n    const [r2, g2, b2] = chromahex\n        .set(\"hsl.h\", (chromahex.get(\"hsl.h\") + 15) % 360)\n        .rgb();\n    return `linear-gradient(to right top,rgb(${r1},${g1},${b1}),rgb(${r},${g},${b}) 50%,rgb(${r2},${g2},${b2}))`;\n}\n\nexport function make_color_record(color) {\n    const chroma_neg = chroma(color);\n    const _neg_grad = make_gradient(chroma_neg);\n    const rgb = chroma_neg.rgb();\n\n    return [\n        color,\n        ...rgb,\n        _neg_grad,\n        `rgba(${rgb[0]},${rgb[1]},${rgb[2]},1)`,\n        `rgba(${rgb[0]},${rgb[1]},${rgb[2]},0)`,\n    ];\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { style_cell_flash } from \"./cell_flash.js\";\nimport {\n    rgbaToRgb,\n    infer_foreground_from_background,\n} from \"../../color_utils.js\";\n\nexport function cell_style_numeric(plugin, td, metadata) {\n    const is_positive = metadata.user > 0;\n    const is_negative = metadata.user < 0;\n\n    let pos_bg_color;\n    if (plugin?.pos_bg_color !== undefined) {\n        pos_bg_color = plugin.pos_bg_color;\n    } else {\n        pos_bg_color = this._pos_bg_color;\n    }\n\n    let neg_bg_color;\n    if (plugin?.neg_bg_color !== undefined) {\n        neg_bg_color = plugin.neg_bg_color;\n    } else {\n        neg_bg_color = this._neg_bg_color;\n    }\n\n    const bg_tuple = is_positive\n        ? pos_bg_color\n        : is_negative\n        ? neg_bg_color\n        : [\"\", ...this._plugin_background, \"\"];\n\n    {\n        const [hex, r, g, b, _gradhex] = bg_tuple;\n\n        td.style.position = \"\";\n        if (plugin?.number_bg_mode === \"color\") {\n            td.style.animation = \"\";\n            td.style.backgroundColor = hex;\n        } else if (plugin?.number_bg_mode === \"gradient\") {\n            const a = Math.max(\n                0,\n                Math.min(1, Math.abs(metadata.user / plugin.bg_gradient))\n            );\n            const source = this._plugin_background;\n            const foreground = infer_foreground_from_background(\n                rgbaToRgb([r, g, b, a], source)\n            );\n\n            td.style.animation = \"\";\n            td.style.color = foreground;\n            td.style.backgroundColor = `rgba(${r},${g},${b},${a})`;\n        } else if (plugin?.number_bg_mode === \"pulse\") {\n            // TODO!\n            style_cell_flash.call(\n                this,\n                metadata,\n                td,\n                pos_bg_color,\n                neg_bg_color\n            );\n            td.style.backgroundColor = \"\";\n        } else if (\n            plugin?.number_bg_mode === \"disabled\" ||\n            !plugin?.number_bg_mode\n        ) {\n            td.style.animation = \"\";\n            td.style.backgroundColor = \"\";\n        } else {\n            td.style.animation = \"\";\n            td.style.backgroundColor = \"\";\n        }\n    }\n\n    const [hex, r, g, b, gradhex] = (() => {\n        if (plugin?.pos_fg_color !== undefined) {\n            return is_positive\n                ? plugin.pos_fg_color\n                : is_negative\n                ? plugin.neg_fg_color\n                : [\"\", ...this._plugin_background, \"\"];\n        } else {\n            return is_positive\n                ? this._pos_fg_color\n                : is_negative\n                ? this._neg_fg_color\n                : [\"\", ...this._plugin_background, \"\"];\n        }\n    })();\n\n    if (plugin?.number_fg_mode === \"disabled\") {\n        if (plugin?.number_bg_mode === \"color\") {\n            const source = this._plugin_background;\n            const foreground = infer_foreground_from_background(\n                rgbaToRgb([bg_tuple[1], bg_tuple[2], bg_tuple[3], 1], source)\n            );\n            td.style.color = foreground;\n        } else if (plugin?.number_bg_mode === \"gradient\") {\n        } else {\n            td.style.color = \"\";\n        }\n    } else if (plugin?.number_fg_mode === \"bar\") {\n        td.style.color = \"\";\n        td.style.position = \"relative\";\n        if (\n            gradhex !== \"\" &&\n            td.children.length > 0 &&\n            td.children[0].nodeType === Node.ELEMENT_NODE\n        ) {\n            td.children[0].style.background = gradhex;\n        }\n    } else if (plugin?.number_fg_mode === \"color\" || !plugin?.number_fg_mode) {\n        td.style.color = hex;\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport chroma from \"chroma-js\";\nimport {\n    rgbaToRgb,\n    infer_foreground_from_background,\n} from \"../../color_utils.js\";\n\nexport function cell_style_string(plugin, td, metadata) {\n    const column_name =\n        metadata.column_header?.[metadata.column_header?.length - 1];\n\n    const [hex, r, g, b, gradhex] = (() => {\n        if (plugin?.color !== undefined) {\n            return plugin.color;\n        } else {\n            return this._color;\n        }\n    })();\n\n    if (plugin?.string_color_mode === \"foreground\" && metadata.user !== null) {\n        td.style.color = hex;\n        td.style.backgroundColor = \"\";\n        if (plugin?.format === \"link\") {\n            td.children[0].style.color = hex;\n        }\n    } else if (\n        plugin?.string_color_mode === \"background\" &&\n        metadata.user !== null\n    ) {\n        const source = this._plugin_background;\n        const foreground = infer_foreground_from_background(\n            rgbaToRgb([r, g, b, 1], source)\n        );\n        td.style.color = foreground;\n        td.style.backgroundColor = hex;\n    } else if (\n        plugin?.string_color_mode === \"series\" &&\n        metadata.user !== null\n    ) {\n        if (!this._series_color_map.has(column_name)) {\n            this._series_color_map.set(column_name, new Map());\n            this._series_color_seed.set(column_name, 0);\n        }\n\n        const series_map = this._series_color_map.get(column_name);\n        if (!series_map.has(metadata.user)) {\n            const seed = this._series_color_seed.get(column_name);\n            series_map.set(metadata.user, seed);\n            this._series_color_seed.set(column_name, seed + 1);\n        }\n\n        const color_seed = series_map.get(metadata.user);\n        let [h, s, l] = chroma(hex).hsl();\n        h = h + ((color_seed * 150) % 360);\n        const color2 = chroma(h, s, l, \"hsl\");\n        const [r, g, b] = color2.rgb();\n        const hex2 = color2.hex();\n        const source = this._plugin_background;\n        const foreground = infer_foreground_from_background(\n            rgbaToRgb([r, g, b, 1], source)\n        );\n        td.style.color = foreground;\n        td.style.backgroundColor = hex2;\n    } else {\n        td.style.backgroundColor = \"\";\n        td.style.color = \"\";\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport chroma from \"chroma-js\";\nimport {\n    rgbaToRgb,\n    infer_foreground_from_background,\n} from \"../../color_utils.js\";\n\nexport function cell_style_datetime(plugin, td, metadata) {\n    const column_name =\n        metadata.column_header?.[metadata.column_header?.length - 1];\n\n    const [hex, r, g, b, gradhex] = (() => {\n        if (plugin?.color !== undefined) {\n            return plugin.color;\n        } else {\n            return this._color;\n        }\n    })();\n\n    if (\n        plugin?.datetime_color_mode === \"foreground\" &&\n        metadata.user !== null\n    ) {\n        td.style.color = hex;\n        td.style.backgroundColor = \"\";\n    } else if (\n        plugin?.datetime_color_mode === \"background\" &&\n        metadata.user !== null\n    ) {\n        const source = this._plugin_background;\n        const foreground = infer_foreground_from_background(\n            rgbaToRgb([r, g, b, 1], source)\n        );\n        td.style.color = foreground;\n        td.style.backgroundColor = hex;\n    } else {\n        td.style.backgroundColor = \"\";\n        td.style.color = \"\";\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport function cell_style_boolean(plugin, td, metadata) {\n    const [hex] =\n        metadata.user === true\n            ? this._pos_fg_color\n            : metadata.user === false\n            ? this._neg_fg_color\n            : [\"\", 0, 0, 0, \"\"];\n\n    td.style.backgroundColor = \"\";\n    td.style.color = hex;\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport function cell_style_row_header(regularTable, td, metadata) {\n    const is_not_empty =\n        typeof metadata.value != undefined &&\n        typeof metadata.value != null &&\n        metadata.value?.toString()?.trim().length > 0;\n    const is_leaf = metadata.row_header_x >= this._config.group_by.length;\n    const next = regularTable.getMeta({\n        dx: 0,\n        dy: metadata.y - metadata.y0 + 1,\n    });\n    const is_collapse =\n        next &&\n        next.row_header &&\n        typeof next.row_header[metadata.row_header_x + 1] !== \"undefined\";\n    td.classList.toggle(\"psp-tree-label\", is_not_empty && !is_leaf);\n    td.classList.toggle(\n        \"psp-tree-label-expand\",\n        is_not_empty && !is_leaf && !is_collapse\n    );\n    td.classList.toggle(\n        \"psp-tree-label-collapse\",\n        is_not_empty && !is_leaf && is_collapse\n    );\n    td.classList.toggle(\"psp-tree-leaf\", is_not_empty && is_leaf);\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { PRIVATE_PLUGIN_SYMBOL } from \"../../model\";\n\nimport { cell_style_numeric } from \"./numeric.js\";\nimport { cell_style_string } from \"./string.js\";\nimport { cell_style_datetime } from \"./datetime.js\";\nimport { cell_style_boolean } from \"./boolean.js\";\nimport { cell_style_row_header } from \"./row_header.js\";\n\nfunction get_psp_type(metadata) {\n    if (metadata.x >= 0) {\n        return this._column_types[metadata.x];\n    } else {\n        return this._row_header_types[metadata.row_header_x - 1];\n    }\n}\n\nexport function table_cell_style_listener(regularTable) {\n    const plugins = regularTable[PRIVATE_PLUGIN_SYMBOL] || {};\n\n    for (const tr of regularTable.children[0].children[1].children) {\n        for (const td of tr.children) {\n            const metadata = regularTable.getMeta(td);\n            const column_name =\n                metadata.column_header?.[metadata.column_header?.length - 1];\n\n            let type = get_psp_type.call(this, metadata);\n            const plugin = plugins[column_name];\n            const is_numeric = type === \"integer\" || type === \"float\";\n\n            if (is_numeric) {\n                cell_style_numeric.call(this, plugin, td, metadata);\n            } else if (type === \"boolean\") {\n                cell_style_boolean.call(this, plugin, td, metadata);\n            } else if (type === \"string\") {\n                cell_style_string.call(this, plugin, td, metadata);\n            } else if (type === \"date\" || type === \"datetime\") {\n                cell_style_datetime.call(this, plugin, td, metadata);\n            } else {\n                td.style.backgroundColor = \"\";\n                td.style.color = \"\";\n            }\n\n            td.classList.toggle(\n                \"psp-bool-type\",\n                type === \"boolean\" && metadata.user !== null\n            );\n\n            const is_th = td.tagName === \"TH\";\n            if (is_th) {\n                cell_style_row_header.call(this, regularTable, td, metadata);\n            }\n\n            td.classList.toggle(\"psp-align-right\", !is_th && is_numeric);\n            td.classList.toggle(\"psp-align-left\", is_th || !is_numeric);\n            td.classList.toggle(\n                \"psp-color-mode-bar\",\n                plugin?.number_fg_mode === \"bar\" && is_numeric\n            );\n        }\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport async function sortHandler(regularTable, event, target) {\n    const meta = regularTable.getMeta(target);\n    const column_name = meta.column_header[meta.column_header.length - 1];\n    const sort_method = event.shiftKey ? append_sort : override_sort;\n    const sort = sort_method.call(this, column_name);\n    this._preserve_focus_state = true;\n    const viewer = regularTable.parentElement.parentElement;\n    await viewer.restore({ sort });\n}\n\nexport function append_sort(column_name) {\n    const sort = [];\n    let found = false;\n    for (const sort_term of this._config.sort) {\n        const [_column_name, _sort_dir] = sort_term;\n        if (_column_name === column_name) {\n            found = true;\n            const term = create_sort.call(this, column_name, _sort_dir);\n            if (term) {\n                sort.push(term);\n            }\n        } else {\n            sort.push(sort_term);\n        }\n    }\n    if (!found) {\n        sort.push([column_name, \"desc\"]);\n    }\n    return sort;\n}\n\nexport function override_sort(column_name) {\n    for (const [_column_name, _sort_dir] of this._config.sort) {\n        if (_column_name === column_name) {\n            const sort = create_sort.call(this, column_name, _sort_dir);\n            return sort ? [sort] : [];\n        }\n    }\n    return [[column_name, \"desc\"]];\n}\n\nexport function create_sort(column_name, sort_dir) {\n    const is_col_sortable = this._config.split_by.length > 0;\n    const order = is_col_sortable ? ROW_COL_SORT_ORDER : ROW_SORT_ORDER;\n    const inc_sort_dir = sort_dir ? order[sort_dir] : \"desc\";\n    if (inc_sort_dir) {\n        return [column_name, inc_sort_dir];\n    }\n}\n\nconst ROW_SORT_ORDER = { desc: \"asc\", asc: undefined };\nconst ROW_COL_SORT_ORDER = {\n    desc: \"asc\",\n    asc: \"col desc\",\n    \"col desc\": \"col asc\",\n    \"col asc\": undefined,\n};\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { make_color_record } from \"./color_utils.js\";\nimport { PRIVATE_PLUGIN_SYMBOL } from \"./model\";\n\nexport function activate_plugin_menu(regularTable, target, column_max) {\n    const target_meta = regularTable.getMeta(target);\n    const column_name =\n        target_meta.column_header[target_meta.column_header.length - 1];\n    const column_type = this._schema[column_name];\n    const is_numeric = column_type === \"integer\" || column_type === \"float\";\n    const MENU = document.createElement(\n        `perspective-${\n            {\n                float: \"number\",\n                integer: \"number\",\n                string: \"string\",\n                date: \"date\",\n                datetime: \"datetime\",\n            }[column_type]\n        }-column-style`\n    );\n    // const column_name =\n    //     target_meta.column_header[target_meta.column_header.length - 1];\n    // const column_type = this._schema[column_name];\n    let default_config;\n    if (is_numeric) {\n        default_config = {\n            fg_gradient: column_max,\n            pos_fg_color: this._pos_fg_color[0],\n            neg_fg_color: this._neg_fg_color[0],\n            number_fg_mode: \"color\",\n            bg_gradient: column_max,\n            pos_bg_color: this._pos_bg_color[0],\n            neg_bg_color: this._neg_bg_color[0],\n            number_bg_mode: \"disabled\",\n        };\n    } else {\n        // date, datetime, string, boolean\n        default_config = {\n            color: this._color[0],\n            bg_color: this._color[0],\n        };\n    }\n\n    if (\n        column_type === \"string\" ||\n        column_type === \"date\" ||\n        column_type === \"datetime\"\n    ) {\n        // do nothing\n    } else if (column_type === \"float\") {\n        default_config.fixed = 2;\n    } else if (column_type === \"integer\") {\n        default_config.fixed = 0;\n    } else {\n        this._open_column_styles_menu.pop();\n        target.classList.remove(\"psp-menu-open\");\n        return;\n    }\n\n    const scroll_handler = () => MENU.blur();\n    const update_handler = (event) => {\n        const config = event.detail;\n        if (config.pos_fg_color) {\n            config.pos_fg_color = make_color_record(config.pos_fg_color);\n            config.neg_fg_color = make_color_record(config.neg_fg_color);\n        }\n\n        if (config.pos_bg_color) {\n            config.pos_bg_color = make_color_record(config.pos_bg_color);\n            config.neg_bg_color = make_color_record(config.neg_bg_color);\n        }\n\n        if (config.color) {\n            config.color = make_color_record(config.color);\n        }\n\n        if (config.bg_color) {\n            config.bg_color = make_color_record(config.bg_color);\n        }\n\n        regularTable[PRIVATE_PLUGIN_SYMBOL] =\n            regularTable[PRIVATE_PLUGIN_SYMBOL] || {};\n        regularTable[PRIVATE_PLUGIN_SYMBOL][column_name] = config;\n        regularTable.draw({ preserve_width: true });\n        regularTable.parentElement.parentElement.dispatchEvent(\n            new Event(\"perspective-config-update\")\n        );\n    };\n\n    const blur_handler = async () => {\n        regularTable.removeEventListener(\n            \"regular-table-scroll\",\n            scroll_handler\n        );\n\n        MENU.removeEventListener(\n            \"perspective-column-style-change\",\n            update_handler\n        );\n\n        MENU.removeEventListener(\"blur\", blur_handler);\n        this._open_column_styles_menu.pop();\n        regularTable.parentElement.parentElement.dispatchEvent(\n            new Event(\"perspective-config-update\")\n        );\n\n        target.classList.remove(\"psp-menu-open\");\n        MENU.destroy();\n    };\n\n    MENU.addEventListener(\"perspective-column-style-change\", update_handler);\n    MENU.addEventListener(\"blur\", blur_handler);\n    regularTable.addEventListener(\"regular-table-scroll\", scroll_handler);\n\n    // Get the current column style config\n    const pset = regularTable[PRIVATE_PLUGIN_SYMBOL] || {};\n    const config = Object.assign(\n        {},\n        (pset[column_name] = pset[column_name] || {})\n    );\n\n    if (config.pos_fg_color || config.pos_bg_color) {\n        config.pos_fg_color = config.pos_fg_color?.[0];\n        config.neg_fg_color = config.neg_fg_color?.[0];\n        config.pos_bg_color = config.pos_bg_color?.[0];\n        config.neg_bg_color = config.neg_bg_color?.[0];\n    }\n\n    if (config.color) {\n        config.color = config.color[0];\n    }\n\n    if (config.bg_color) {\n        config.bg_color = config.bg_color[0];\n    }\n\n    MENU.open(target, config, default_config);\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport async function expandCollapseHandler(regularTable, event) {\n    const meta = regularTable.getMeta(event.target);\n    const is_collapse = event.target.classList.contains(\n        \"psp-tree-label-collapse\"\n    );\n    if (event.shiftKey && is_collapse) {\n        this._view.set_depth(\n            meta.row_header.filter((x) => x !== undefined).length - 2\n        );\n    } else if (event.shiftKey) {\n        this._view.set_depth(\n            meta.row_header.filter((x) => x !== undefined).length - 1\n        );\n    } else if (is_collapse) {\n        this._view.collapse(meta.y);\n    } else {\n        this._view.expand(meta.y);\n    }\n    this._num_rows = await this._view.num_rows();\n    this._num_columns = await this._view.num_columns();\n    regularTable.draw();\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { sortHandler } from \"./sort.js\";\nimport { activate_plugin_menu } from \"../style_menu.js\";\nimport { expandCollapseHandler } from \"./expand_collapse.js\";\n\nexport async function mousedown_listener(regularTable, event) {\n    if (event.which !== 1) {\n        return;\n    }\n\n    let target = event.target;\n    if (target.tagName === \"A\") {\n        return;\n    }\n\n    while (target.tagName !== \"TD\" && target.tagName !== \"TH\") {\n        target = target.parentElement;\n        if (!regularTable.contains(target)) {\n            return;\n        }\n    }\n\n    if (target.classList.contains(\"psp-tree-label\")) {\n        expandCollapseHandler.call(this, regularTable, event);\n        event.stopImmediatePropagation();\n        return;\n    }\n\n    const rect = target.getBoundingClientRect();\n    if (\n        target.classList.contains(\"psp-menu-enabled\") &&\n        event.clientY - rect.top > 16\n    ) {\n        target.classList.add(\"psp-menu-open\");\n        const meta = regularTable.getMeta(target);\n        const column_name =\n            meta.column_header?.[meta.column_header?.length - 1];\n        const column_type = this._schema[column_name];\n        this._open_column_styles_menu.unshift(meta._virtual_x);\n        if (\n            column_type === \"string\" ||\n            column_type === \"date\" ||\n            column_type === \"datetime\"\n        ) {\n            activate_plugin_menu.call(this, regularTable, target);\n        } else {\n            const [min, max] = await this._view.get_min_max(column_name);\n            let bound = Math.max(Math.abs(min), Math.abs(max));\n            if (bound > 1) {\n                bound = Math.round(bound * 100) / 100;\n            }\n\n            activate_plugin_menu.call(this, regularTable, target, bound);\n        }\n\n        event.preventDefault();\n        event.stopImmediatePropagation();\n    } else if (\n        target.classList.contains(\"psp-header-leaf\") &&\n        !target.classList.contains(\"psp-header-corner\")\n    ) {\n        sortHandler.call(this, regularTable, event, target);\n        event.stopImmediatePropagation();\n    }\n}\n\nexport function click_listener(regularTable, event) {\n    if (event.which !== 1) {\n        return;\n    }\n\n    let target = event.target;\n    while (target.tagName !== \"TD\" && target.tagName !== \"TH\") {\n        target = target.parentElement;\n        if (!regularTable.contains(target)) {\n            return;\n        }\n    }\n\n    if (target.classList.contains(\"psp-tree-label\") && event.offsetX < 26) {\n        event.stopImmediatePropagation();\n    } else if (\n        target.classList.contains(\"psp-header-leaf\") &&\n        !target.classList.contains(\"psp-header-corner\")\n    ) {\n        event.stopImmediatePropagation();\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { PRIVATE_PLUGIN_SYMBOL } from \"../model\";\n\nfunction isEditable(viewer, allowed = false) {\n    const has_pivots =\n        this._config.group_by.length === 0 &&\n        this._config.split_by.length === 0;\n    const selectable = viewer.hasAttribute(\"selectable\");\n    const editable = allowed || !!viewer.children[0]._is_edit_mode;\n    return has_pivots && !selectable && editable;\n}\n\nexport function editable_style_listener(table, viewer) {\n    // Independently check \"editable\" and `isEditable()`, so we can skip\n    // the styler entirely if editing was disabled at the time of element\n    // creation, but toggle in when e.g. pivots or selectable will\n    // affect editability.\n    const plugins = table[PRIVATE_PLUGIN_SYMBOL] || {};\n    const edit = isEditable.call(this, viewer);\n    table.parentElement.classList.toggle(\n        \"edit-mode-allowed\",\n        isEditable.call(this, viewer, true)\n    );\n\n    for (const td of table.querySelectorAll(\"td\")) {\n        const meta = table.getMeta(td);\n        const type = this.get_psp_type(meta);\n        if (edit && this._is_editable[meta.x]) {\n            const col_name = meta.column_header[meta.column_header.length - 1];\n            if (type === \"string\" && plugins[col_name]?.format === \"link\") {\n                td.toggleAttribute(\"contenteditable\", false);\n                td.classList.toggle(\"boolean-editable\", false);\n            } else if (type === \"boolean\") {\n                td.toggleAttribute(\"contenteditable\", false);\n                td.classList.toggle(\"boolean-editable\", meta.user !== null);\n            } else {\n                if (edit !== td.hasAttribute(\"contenteditable\")) {\n                    td.toggleAttribute(\"contenteditable\", edit);\n                }\n                td.classList.toggle(\"boolean-editable\", false);\n            }\n        } else {\n            td.toggleAttribute(\"contenteditable\", false);\n            td.classList.toggle(\"boolean-editable\", false);\n        }\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n// const selected_position_map = new WeakMap();\n\nexport const focus_style_listener = (table, _viewer, selected_position_map) => {\n    const tds = table.querySelectorAll(\"td\");\n    const selected_position = selected_position_map.get(table);\n    if (selected_position) {\n        for (const td of tds) {\n            const meta = table.getMeta(td);\n            if (\n                meta.x === selected_position.x &&\n                meta.y === selected_position.y\n            ) {\n                if (document.activeElement !== td) {\n                    td.focus({ preventScroll: true });\n                }\n                return true;\n            }\n        }\n        if (\n            document.activeElement !== document.body &&\n            table.contains(document.activeElement)\n        ) {\n            document.activeElement.blur();\n        }\n    }\n};\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { focus_style_listener } from \"../style_handlers/focus.js\";\n\nfunction lock(body) {\n    let lock;\n    return async function (...args) {\n        if (!!lock && (await lock) && !!lock) {\n            return;\n        }\n\n        let resolve;\n        lock = new Promise((x) => (resolve = x));\n        await body.apply(this, args);\n        lock = undefined;\n        resolve();\n    };\n}\n\nfunction getPos() {\n    if (this.isContentEditable) {\n        let _range = document.getSelection().getRangeAt(0);\n        let range = _range.cloneRange();\n        range.selectNodeContents(this);\n        range.setEnd(_range.endContainer, _range.endOffset);\n        return range.toString().length;\n    } else {\n        return this.target.selectionStart;\n    }\n}\n\nexport function write_cell(table, model, active_cell) {\n    const meta = table.getMeta(active_cell);\n    const type = model._schema[model._column_paths[meta.x]];\n    if (meta) {\n        let text = active_cell.textContent;\n        const id = model._ids[meta.y - meta.y0];\n        if (type === \"float\" || type === \"integer\") {\n            text = parseFloat(text.replace(/,/g, \"\"));\n            if (isNaN(text)) {\n                return false;\n            }\n        } else if (type === \"date\" || type === \"datetime\") {\n            text = Date.parse(text);\n            if (isNaN(text)) {\n                return false;\n            }\n        } else if (type === \"boolean\") {\n            text = text === \"check\" ? false : text === \"close\" ? true : null;\n        }\n\n        const msg = {\n            __INDEX__: id,\n            [model._column_paths[meta.x]]: text,\n        };\n\n        model._table.update([msg], { port_id: model._edit_port });\n        return true;\n    }\n}\n\nexport function is_editable(viewer, allowed = false) {\n    const has_pivots =\n        this._config.group_by.length === 0 &&\n        this._config.split_by.length === 0;\n    const selectable = viewer.hasAttribute(\"selectable\");\n    const editable = allowed || !!viewer.children[0]._is_edit_mode;\n    return has_pivots && !selectable && editable;\n}\n\nconst moveSelection = lock(async function (\n    table,\n    selected_position_map,\n    active_cell,\n    dx,\n    dy\n) {\n    const meta = table.getMeta(active_cell);\n    const num_columns = this._column_paths.length;\n    const num_rows = this._num_rows;\n    const selected_position = selected_position_map.get(table);\n    if (!selected_position) {\n        return;\n    }\n\n    if (meta.x + dx < num_columns && 0 <= meta.x + dx) {\n        selected_position.x = meta.x + dx;\n    }\n\n    if (meta.y + dy < num_rows && 0 <= meta.y + dy) {\n        selected_position.y = meta.y + dy;\n    }\n\n    const xmin = Math.max(meta.x0 - 10, 0);\n    const xmax = Math.min(meta.x0 + 10, num_columns);\n    const ymin = Math.max(meta.y0 - 5, 0);\n    const ymax = Math.min(meta.y0 + 10, num_rows);\n    let x = meta.x0 + dx,\n        y = meta.y0 + dy;\n    while (\n        !focus_style_listener(table, undefined, selected_position_map) &&\n        x >= xmin &&\n        x < xmax &&\n        y >= ymin &&\n        y < ymax\n    ) {\n        await table.scrollToCell(x, y, num_columns, num_rows);\n        selected_position_map.set(table, selected_position);\n        x += dx;\n        y += dy;\n    }\n});\n\n// Events\n\nexport function keydownListener(table, viewer, selected_position_map, event) {\n    if (!is_editable.call(this, viewer)) {\n        return;\n    }\n    const target = document.activeElement;\n    event.target.classList.remove(\"psp-error\");\n    switch (event.keyCode) {\n        case 13:\n            event.preventDefault();\n            if (event.shiftKey) {\n                moveSelection.call(\n                    this,\n                    table,\n                    selected_position_map,\n                    target,\n                    0,\n                    -1\n                );\n            } else {\n                moveSelection.call(\n                    this,\n                    table,\n                    selected_position_map,\n                    target,\n                    0,\n                    1\n                );\n            }\n            break;\n        case 37:\n            if (getPos.call(target) == 0) {\n                event.preventDefault();\n                moveSelection.call(\n                    this,\n                    table,\n                    selected_position_map,\n                    target,\n                    -1,\n                    0\n                );\n            }\n            break;\n        case 38:\n            event.preventDefault();\n            moveSelection.call(\n                this,\n                table,\n                selected_position_map,\n                target,\n                0,\n                -1\n            );\n            break;\n        case 39:\n            if (getPos.call(target) == target.textContent.length) {\n                event.preventDefault();\n                moveSelection.call(\n                    this,\n                    table,\n                    selected_position_map,\n                    target,\n                    1,\n                    0\n                );\n            }\n            break;\n        case 40:\n            event.preventDefault();\n            moveSelection.call(\n                this,\n                table,\n                selected_position_map,\n                target,\n                0,\n                1\n            );\n            break;\n        default:\n    }\n}\n\nexport function clickListener(table, _viewer, event) {\n    const meta = table.getMeta(event.target);\n    if (typeof meta?.x !== \"undefined\") {\n        const is_all_editable = is_editable.call(this, _viewer);\n        const is_editable2 = this._is_editable[meta.x];\n        const is_bool = this.get_psp_type(meta) === \"boolean\";\n        const is_null = event.target.textContent === \"-\";\n        if (is_all_editable && is_editable2 && is_bool && !is_null) {\n            write_cell(table, this, event.target);\n        }\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { is_editable, write_cell } from \"./edit_click.js\";\n\nexport function focusoutListener(table, viewer, selected_position_map, event) {\n    if (is_editable.call(this, viewer) && selected_position_map.has(table)) {\n        event.target.classList.remove(\"psp-error\");\n        const selectedPosition = selected_position_map.get(table);\n        selected_position_map.delete(table);\n        if (selectedPosition.content !== event.target.textContent) {\n            if (!write_cell(table, this, event.target)) {\n                event.target.textContent = selectedPosition.content;\n                event.target.classList.add(\"psp-error\");\n                event.target.focus();\n            }\n        }\n    }\n}\n\nexport function focusinListener(table, _viewer, selected_position_map, event) {\n    const meta = table.getMeta(event.target);\n    if (meta) {\n        const new_state = {\n            x: meta.x,\n            y: meta.y,\n            content: event.target.textContent,\n        };\n        selected_position_map.set(table, new_state);\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport default async function getCellConfig(\n    { _view, _config },\n    row_idx,\n    col_idx\n) {\n    const group_by = _config.group_by;\n    const split_by = _config.split_by;\n    const start_row = row_idx >= 0 ? row_idx : 0;\n    const end_row = start_row + 1;\n    const r = await _view.to_json({ start_row, end_row });\n    const row_paths = r.map((x) => x.__ROW_PATH__);\n    const group_by_values = row_paths[0] || [];\n    const row_filters = group_by\n        .map((pivot, index) => {\n            const pivot_value = group_by_values[index];\n            return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n        })\n        .filter((x) => x);\n\n    const column_index = group_by.length > 0 ? col_idx + 1 : col_idx;\n    const column_paths = Object.keys(r[0])[column_index];\n    const result = { row: r[0] };\n    let column_filters = [];\n    if (column_paths) {\n        const split_by_values = column_paths.split(\"|\");\n        result.column_names = [split_by_values[split_by_values.length - 1]];\n        column_filters = split_by\n            .map((pivot, index) => {\n                const pivot_value = split_by_values[index];\n                return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n            })\n            .filter((x) => x)\n            .filter(([, , value]) => value !== \"__ROW_PATH__\");\n    }\n\n    const filter = _config.filter.concat(row_filters).concat(column_filters);\n    result.config = { filter };\n    return result;\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport getCellConfig from \"../get_cell_config.js\";\n\nexport async function selectionListener(\n    regularTable,\n    viewer,\n    selected_rows_map,\n    event\n) {\n    const meta = regularTable.getMeta(event.target);\n    if (!viewer.hasAttribute(\"selectable\")) return;\n    if (event.handled) return;\n    if (event.which !== 1) {\n        return;\n    }\n\n    if (!meta) {\n        return;\n    }\n\n    const id = this._ids[meta.y - meta.y0];\n    if (meta && meta.y >= 0) {\n        const selected = selected_rows_map.get(regularTable);\n        const key_match =\n            !!selected &&\n            selected.reduce((agg, x, i) => agg && x === id[i], true);\n\n        const is_deselect =\n            !!selected && id.length === selected.length && key_match;\n\n        let detail = { selected: !is_deselect };\n        const { row, column_names, config } = await getCellConfig(\n            this,\n            meta.y,\n            meta.x\n        );\n\n        if (is_deselect) {\n            selected_rows_map.delete(regularTable);\n            detail = {\n                ...detail,\n                row,\n                config: { filter: structuredClone(this._config.filter) },\n            };\n        } else {\n            selected_rows_map.set(regularTable, id);\n            detail = { ...detail, row, column_names, config };\n        }\n\n        await regularTable.draw({ preserve_width: true });\n        event.handled = true;\n        viewer.dispatchEvent(\n            new CustomEvent(\"perspective-select\", {\n                bubbles: true,\n                composed: true,\n                detail,\n            })\n        );\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport function selectionStyleListener(\n    regularTable,\n    viewer,\n    selected_rows_map\n) {\n    if (!viewer.hasAttribute(\"selectable\")) return;\n    const has_selected = selected_rows_map.has(regularTable);\n    const selected = selected_rows_map.get(regularTable);\n    for (const td of regularTable.querySelectorAll(\"td\")) {\n        if (!has_selected) {\n            td.classList.toggle(\"psp-row-selected\", false);\n            td.classList.toggle(\"psp-row-subselected\", false);\n        } else {\n            const meta = regularTable.getMeta(td);\n            const id = this._ids[meta.y - meta.y0];\n            const key_match = selected.reduce(\n                (agg, x, i) => agg && x === id[i],\n                true\n            );\n            td.classList.toggle(\n                \"psp-row-selected\",\n                id.length === selected.length && key_match\n            );\n            td.classList.toggle(\n                \"psp-row-subselected\",\n                id.length !== selected.length && key_match\n            );\n        }\n    }\n\n    for (const th of regularTable.querySelectorAll(\"tbody th\")) {\n        const meta = regularTable.getMeta(th);\n        const id = this._ids[meta.y - meta.y0];\n        if (!has_selected || !!id[meta.row_header_x]) {\n            th.classList.toggle(\"psp-row-selected\", false);\n            th.classList.toggle(\"psp-row-subselected\", false);\n        } else {\n            const key_match = selected.reduce(\n                (agg, x, i) => agg && x === id[i],\n                true\n            );\n            th.classList.toggle(\n                \"psp-row-selected\",\n                id.length === selected.length && key_match\n            );\n            th.classList.toggle(\n                \"psp-row-subselected\",\n                id.length !== selected.length && key_match\n            );\n        }\n    }\n}\n\n//  export function configureRowSelectable(table, viewer) {\n//      table.addStyleListener(selectionStyleListener.bind(this, table, viewer));\n//      table.addEventListener(\n//          \"mousedown\",\n//          selectionListener.bind(this, table, viewer)\n//      );\n//  }\n\n// export async function deselect(regularTable) {\n//     selected_rows_map.delete(regularTable);\n//     for (const td of regularTable.querySelectorAll(\"td,th\")) {\n//         td.classList.toggle(\"psp-row-selected\", false);\n//         td.classList.toggle(\"psp-row-subselected\", false);\n//     }\n// }\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport async function deselect_all_listener(\n    regularTable,\n    _viewer,\n    selected_rows_map\n) {\n    selected_rows_map.delete(regularTable);\n    for (const td of regularTable.querySelectorAll(\"td,th\")) {\n        td.classList.toggle(\"psp-row-selected\", false);\n        td.classList.toggle(\"psp-row-subselected\", false);\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport chroma from \"chroma-js\";\nimport { createDataListener } from \"../data_listener\";\nimport { blend, make_color_record } from \"../color_utils.js\";\n\nfunction get_rule(regular, tag, def) {\n    let color = window.getComputedStyle(regular).getPropertyValue(tag).trim();\n    if (color.length > 0) {\n        return color;\n    } else {\n        return def;\n    }\n}\n\nclass ElemFactory {\n    constructor(name) {\n        this._name = name;\n        this._elements = [];\n        this._index = 0;\n    }\n\n    clear() {\n        this._index = 0;\n    }\n\n    get() {\n        if (!this._elements[this._index]) {\n            this._elements[this._index] = document.createElement(this._name);\n        }\n        const elem = this._elements[this._index];\n        this._index += 1;\n        return elem;\n    }\n}\n\nfunction get_psp_type(metadata) {\n    if (metadata.x >= 0) {\n        return this._column_types[metadata.x];\n    } else {\n        return this._row_header_types[metadata.row_header_x - 1];\n    }\n}\n\nexport async function createModel(regular, table, view, extend = {}) {\n    const config = await view.get_config();\n\n    // Extract the entire expression string as typed by the user, so we can\n    // feed it into `validate_expressions` and get back the data types for\n    // each column without it being affected by a pivot.\n    const expressions = config.expressions.map((expr) => expr[1]);\n    const [\n        table_schema,\n        validated_expressions,\n        num_rows,\n        schema,\n        expression_schema,\n        column_paths,\n        _edit_port,\n    ] = await Promise.all([\n        table.schema(),\n        table.validate_expressions(expressions),\n        view.num_rows(),\n        view.schema(),\n        view.expression_schema(),\n        view.column_paths(),\n        this.parentElement.getEditPort(),\n    ]);\n\n    const _plugin_background = chroma(\n        get_rule(regular, \"--plugin--background\", \"#FFFFFF\")\n    ).rgb();\n\n    const _pos_fg_color = make_color_record(\n        get_rule(regular, \"--rt-pos-cell--color\", \"#338DCD\")\n    );\n\n    const _neg_fg_color = make_color_record(\n        get_rule(regular, \"--rt-neg-cell--color\", \"#FF5942\")\n    );\n\n    const _pos_bg_color = make_color_record(\n        blend(_pos_fg_color[0], _plugin_background)\n    );\n\n    const _neg_bg_color = make_color_record(\n        blend(_neg_fg_color[0], _plugin_background)\n    );\n\n    const _color = make_color_record(\n        get_rule(regular, \"--active--color\", \"#ff0000\")\n    );\n\n    const _schema = { ...schema, ...expression_schema };\n    const _table_schema = {\n        ...table_schema,\n        ...validated_expressions.expression_schema,\n    };\n\n    const _column_paths = column_paths.filter((path) => {\n        return path !== \"__ROW_PATH__\" && path !== \"__ID__\";\n    });\n\n    const _is_editable = [];\n    const _column_types = [];\n    for (const column_path of _column_paths) {\n        const column_path_parts = column_path.split(\"|\");\n        const column = column_path_parts[column_path_parts.length - 1];\n        _column_types.push(_schema[column]);\n        _is_editable.push(!!table_schema[column]);\n    }\n\n    const model = Object.assign(extend, {\n        _edit_port,\n        _view: view,\n        _table: table,\n        _table_schema,\n        _config: config,\n        _num_rows: num_rows,\n        _schema,\n        _ids: [],\n        _open_column_styles_menu: [],\n        _plugin_background,\n        _color,\n        _pos_fg_color,\n        _neg_fg_color,\n        _pos_bg_color,\n        _neg_bg_color,\n        _column_paths,\n        _column_types,\n        _is_editable,\n        _row_header_types: config.group_by.map((column_path) => {\n            return _table_schema[column_path];\n        }),\n        _series_color_map: new Map(),\n        _series_color_seed: new Map(),\n        get_psp_type,\n    });\n\n    // Re-use div factory\n    model._div_factory = model._div_factory || new ElemFactory(\"div\");\n    regular.setDataListener(createDataListener().bind(model, regular), {\n        virtual_mode:\n            window\n                .getComputedStyle(regular)\n                .getPropertyValue(\"--datagrid-virtual-mode\")\n                ?.trim() || \"both\",\n    });\n\n    return model;\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { get_type_config } from \"@finos/perspective/src/js/config/index.js\";\n\nconst FORMATTER_CONS = {\n    datetime: Intl.DateTimeFormat,\n    date: Intl.DateTimeFormat,\n    integer: Intl.NumberFormat,\n    float: Intl.NumberFormat,\n    boolean: class {\n        format(val) {\n            return val ? \"check\" : \"close\";\n        }\n    },\n};\n\nexport class FormatterCache {\n    constructor() {\n        this._formatters = new Map();\n    }\n\n    create_datetime_formatter(type, plugin) {\n        const type_config = get_type_config(type);\n        const options = {\n            ...type_config.format,\n            timeZone: plugin.timeZone,\n            dateStyle: plugin.dateStyle,\n            timeStyle: plugin.timeStyle,\n        };\n\n        if (options.dateStyle === \"disabled\") {\n            options.dateStyle = undefined;\n        } else if (options.dateStyle === undefined) {\n            options.dateStyle = type_config.format.dateStyle;\n        }\n\n        if (options.timeStyle === \"disabled\") {\n            options.timeStyle = undefined;\n        } else if (options.timeStyle === undefined) {\n            options.timeStyle = type_config.format.timeStyle;\n        }\n\n        return new Intl.DateTimeFormat([], options);\n    }\n\n    create_number_formatter(type, plugin) {\n        const { format } = get_type_config(type);\n        if (plugin.fixed !== undefined) {\n            format.minimumFractionDigits = plugin.fixed;\n            format.maximumFractionDigits = plugin.fixed;\n        }\n\n        return new FORMATTER_CONS[type]([], format);\n    }\n\n    create_boolean_formatter(type, plugin) {\n        const type_config = get_type_config(type);\n        return new FORMATTER_CONS[type]([], type_config.format);\n    }\n\n    get(type, plugin) {\n        let formatter_key = [\n            type,\n            plugin.fixed,\n            plugin.timeZone,\n            plugin.dateStyle,\n            plugin.timeStyle,\n        ].join(\"-\");\n\n        if (!this._formatters.has(formatter_key)) {\n            const type_config = get_type_config(type);\n            if (type === \"date\" || type === \"datetime\") {\n                this._formatters.set(\n                    formatter_key,\n                    this.create_datetime_formatter(type, plugin)\n                );\n            } else if (type === \"integer\" || type === \"float\") {\n                this._formatters.set(\n                    formatter_key,\n                    this.create_number_formatter(type, plugin)\n                );\n            } else if (type === \"boolean\") {\n                this._formatters.set(\n                    formatter_key,\n                    this.create_boolean_formatter(type, plugin)\n                );\n            } else {\n                this._formatters.set(formatter_key, false);\n            }\n        }\n\n        return this._formatters.get(formatter_key);\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { FormatterCache } from \"./formatter_cache\";\n\nconst FORMAT_CACHE = new FormatterCache();\n\n/**\n * Format a single cell's text content as the content of a `<td>` or `<th>`.\n *\n * @param {*} parts\n * @param {*} val\n * @param {*} plugins\n * @param {*} use_table_schema\n * @returns\n */\nexport function format_cell(\n    parts,\n    val,\n    plugins = {},\n    use_table_schema = false\n) {\n    if (val === null) {\n        return \"-\";\n    }\n\n    // TODO don't do this on every cell render ...\n    const title = parts[parts.length - 1];\n    const type =\n        (use_table_schema && this._table_schema[title]) ||\n        this._schema[title] ||\n        \"string\";\n    const plugin = plugins[title] || {};\n    const is_numeric = type === \"integer\" || type === \"float\";\n    if (is_numeric && plugin?.number_fg_mode === \"bar\") {\n        const a = Math.max(\n            0,\n            Math.min(0.95, Math.abs(val / plugin.fg_gradient) * 0.95)\n        );\n        const div = this._div_factory.get();\n        const anchor = val >= 0 ? \"left\" : \"right\";\n        div.setAttribute(\n            \"style\",\n            `width:${(a * 100).toFixed(\n                2\n            )}%;position:absolute;${anchor}:0;height:80%;top:10%;pointer-events:none;`\n        );\n        return div;\n    } else if (plugin?.format === \"link\" && type === \"string\") {\n        const anchor = document.createElement(\"a\");\n        anchor.setAttribute(\"href\", val);\n        anchor.setAttribute(\"target\", \"_blank\");\n        anchor.textContent = val;\n        return anchor;\n    } else if (plugin?.format === \"bold\" && type === \"string\") {\n        const anchor = document.createElement(\"b\");\n        anchor.textContent = val;\n        return anchor;\n    } else if (plugin?.format === \"italics\" && type === \"string\") {\n        const anchor = document.createElement(\"i\");\n        anchor.textContent = val;\n        return anchor;\n    } else {\n        const formatter = FORMAT_CACHE.get(type, plugin);\n        return formatter ? formatter.format(val) : val;\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { PRIVATE_PLUGIN_SYMBOL } from \"../model\";\nimport { format_cell } from \"./format_cell.js\";\n\n/**\n * Format a single cell of the `group_by` tree header.\n *\n * @param {*} paths\n * @param {*} row_headers\n * @param {*} regularTable\n */\nexport function* format_tree_header(paths = [], row_headers, regularTable) {\n    const plugins = regularTable[PRIVATE_PLUGIN_SYMBOL];\n    for (let path of paths) {\n        path = [\"TOTAL\", ...path];\n        const last = path[path.length - 1];\n        path = path.slice(0, path.length - 1).fill(\"\");\n        const formatted = format_cell.call(\n            this,\n            [row_headers[path.length - 1]],\n            last,\n            plugins,\n            true\n        );\n\n        if (formatted instanceof HTMLElement) {\n            path = path.concat(formatted);\n        } else {\n            path = path.concat({ toString: () => formatted });\n        }\n\n        path.length = row_headers.length + 1;\n        yield path;\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { PRIVATE_PLUGIN_SYMBOL } from \"../model\";\nimport { format_cell } from \"./format_cell.js\";\nimport { format_tree_header } from \"./format_tree_header.js\";\n\n/**\n * Creates a new DataListener, suitable for passing to `regular-table`'s\n * `.setDataListener()` method.  This should be called as a method on the\n * plugin.\n *\n * @returns A data listener for the plugin.\n */\nexport function createDataListener() {\n    let last_meta;\n    let last_column_paths;\n    let last_ids;\n    let last_reverse_ids;\n    let last_reverse_columns;\n    return async function dataListener(regularTable, x0, y0, x1, y1) {\n        let columns = {};\n        let new_window;\n        if (x1 - x0 > 0 && y1 - y0 > 0) {\n            this._is_old_viewport =\n                this._last_window?.start_row === y0 &&\n                this._last_window?.end_row === y1 &&\n                this._last_window?.start_col === x0 &&\n                this._last_window?.end_col === x1;\n\n            new_window = {\n                start_row: y0,\n                start_col: x0,\n                end_row: y1,\n                end_col: x1,\n                id: true,\n            };\n\n            columns = await this._view.to_columns(new_window);\n            this._last_window = new_window;\n            this._ids = columns.__ID__;\n            this._reverse_columns = this._column_paths\n                .slice(x0, x1)\n                .reduce((acc, x, i) => {\n                    acc.set(x, i);\n                    return acc;\n                }, new Map());\n\n            this._reverse_ids = this._ids.reduce((acc, x, i) => {\n                acc.set(x?.join(\"|\"), i);\n                return acc;\n            }, new Map());\n        } else {\n            this._div_factory.clear();\n        }\n\n        const data = [],\n            metadata = [],\n            column_headers = [],\n            column_paths = [];\n\n        // for (const path of this._column_paths.slice(x0, x1)) {\n        for (\n            let ipath = x0;\n            ipath < Math.min(x1, this._column_paths.length);\n            ++ipath\n        ) {\n            const path = this._column_paths[ipath];\n            const path_parts = path.split(\"|\");\n            const column = columns[path] || new Array(y1 - y0).fill(null);\n            data.push(\n                column.map((x) =>\n                    format_cell.call(\n                        this,\n                        path_parts,\n                        x,\n                        regularTable[PRIVATE_PLUGIN_SYMBOL]\n                    )\n                )\n            );\n            metadata.push(column);\n            column_headers.push(path_parts);\n            column_paths.push(path);\n        }\n\n        // Only update the last state if this is not a \"phantom\" call.\n        if (x1 - x0 > 0 && y1 - y0 > 0) {\n            this.last_column_paths = last_column_paths;\n            this.last_meta = last_meta;\n            this.last_ids = last_ids;\n            this.last_reverse_ids = last_reverse_ids;\n            this.last_reverse_columns = last_reverse_columns;\n\n            last_column_paths = column_paths;\n            last_meta = metadata;\n            last_ids = this._ids;\n            last_reverse_ids = this._reverse_ids;\n            last_reverse_columns = this._reverse_columns;\n        }\n\n        return {\n            num_rows: this._num_rows,\n            num_columns: this._column_paths.length,\n            row_headers: Array.from(\n                format_tree_header.call(\n                    this,\n                    columns.__ROW_PATH__,\n                    this._config.group_by,\n                    regularTable\n                )\n            ),\n            column_headers,\n            data,\n            metadata,\n        };\n    };\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport getCellConfig from \"../get_cell_config\";\n\nexport async function dispatch_click_listener(table, viewer, event) {\n    const meta = table.getMeta(event.target);\n    if (!meta) return;\n    const { x, y } = meta;\n\n    const { row, column_names, config } = await getCellConfig(this, y, x);\n\n    viewer.dispatchEvent(\n        new CustomEvent(\"perspective-click\", {\n            bubbles: true,\n            composed: true,\n            detail: {\n                row,\n                column_names,\n                config,\n            },\n        })\n    );\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { column_header_style_listener } from \"../style_handlers/column_header.js\";\nimport { group_header_style_listener } from \"../style_handlers/group_header.js\";\nimport { table_cell_style_listener } from \"../style_handlers/table_cell\";\nimport {\n    click_listener,\n    mousedown_listener,\n} from \"../event_handlers/header_click.js\";\n\nimport { editable_style_listener } from \"../style_handlers/editable.js\";\nimport { focus_style_listener } from \"../style_handlers/focus.js\";\nimport { focusinListener, focusoutListener } from \"../event_handlers/focus.js\";\nimport {\n    keydownListener,\n    clickListener,\n} from \"../event_handlers/edit_click.js\";\n\nimport { selectionListener } from \"../event_handlers/row_select_click\";\nimport { selectionStyleListener } from \"../style_handlers/selection\";\nimport { deselect_all_listener } from \"../event_handlers/deselect_all.js\";\n\nimport { createModel } from \"../model/create.js\";\nimport { dispatch_click_listener } from \"../event_handlers/dispatch_click\";\n\n/**\n * Lazy initialize this plugin with various listeners.\n */\nexport async function activate(view) {\n    let viewer = this.parentElement;\n    let table = await viewer.getTable(true);\n    if (!this._initialized) {\n        this.innerHTML = \"\";\n        this.appendChild(this.regular_table);\n        this.model = await createModel.call(\n            this,\n            this.regular_table,\n            table,\n            view\n        );\n\n        this.regular_table.addStyleListener(\n            table_cell_style_listener.bind(this.model, this.regular_table)\n        );\n\n        this.regular_table.addStyleListener(\n            group_header_style_listener.bind(this.model, this.regular_table)\n        );\n\n        this.regular_table.addStyleListener(\n            column_header_style_listener.bind(this.model, this.regular_table)\n        );\n\n        this.regular_table.addEventListener(\n            \"click\",\n            click_listener.bind(this.model, this.regular_table)\n        );\n\n        this.regular_table.addEventListener(\n            \"mousedown\",\n            mousedown_listener.bind(this.model, this.regular_table)\n        );\n\n        // Row selection\n        const selected_rows_map = new WeakMap();\n        this.regular_table.addStyleListener(\n            selectionStyleListener.bind(\n                this.model,\n                this.regular_table,\n                viewer,\n                selected_rows_map\n            )\n        );\n\n        this.regular_table.addEventListener(\n            \"mousedown\",\n            selectionListener.bind(\n                this.model,\n                this.regular_table,\n                viewer,\n                selected_rows_map\n            )\n        );\n\n        this.regular_table.addEventListener(\n            \"psp-deselect-all\",\n            deselect_all_listener.bind(\n                this.model,\n                this.regular_table,\n                viewer,\n                selected_rows_map\n            )\n        );\n\n        // User click\n        this.regular_table.addEventListener(\n            \"click\",\n            dispatch_click_listener.bind(this.model, this.regular_table, viewer)\n        );\n\n        // Editing\n        const selected_position_map = new WeakMap();\n        this.regular_table.addStyleListener(\n            editable_style_listener.bind(this.model, this.regular_table, viewer)\n        );\n        this.regular_table.addStyleListener(\n            focus_style_listener.bind(\n                this.model,\n                this.regular_table,\n                viewer,\n                selected_position_map\n            )\n        );\n        this.regular_table.addEventListener(\n            \"click\",\n            clickListener.bind(this.model, this.regular_table, viewer)\n        );\n        this.regular_table.addEventListener(\n            \"focusin\",\n            focusinListener.bind(\n                this.model,\n                this.regular_table,\n                viewer,\n                selected_position_map\n            )\n        );\n        this.regular_table.addEventListener(\n            \"focusout\",\n            focusoutListener.bind(\n                this.model,\n                this.regular_table,\n                viewer,\n                selected_position_map\n            )\n        );\n        this.regular_table.addEventListener(\n            \"keydown\",\n            keydownListener.bind(\n                this.model,\n                this.regular_table,\n                viewer,\n                selected_position_map\n            )\n        );\n\n        this._initialized = true;\n    } else {\n        await createModel.call(\n            this,\n            this.regular_table,\n            table,\n            view,\n            this.model\n        );\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n/**\n * Restore a saved column width override token.\n *\n * @param {*} token An object previously returned by a call to\n * `_save_column_size_overrides()`\n * @param {*} [cache=false] A flag indicating whether this value should\n * be cached so a future `resetAutoSize()` call does not clear it.\n * @returns\n */\nexport function restore_column_size_overrides(old_sizes, cache = false) {\n    if (!this._initialized) {\n        return;\n    }\n\n    if (cache) {\n        this._cached_column_sizes = old_sizes;\n    }\n\n    const overrides = {};\n    const { group_by, columns } = this.model._config;\n    const tree_header_offset = group_by?.length > 0 ? group_by.length + 1 : 0;\n\n    for (const key of Object.keys(old_sizes)) {\n        if (key === \"__ROW_PATH__\") {\n            overrides[tree_header_offset - 1] = old_sizes[key];\n        } else {\n            const index = this.model._column_paths.indexOf(key);\n            overrides[index + tree_header_offset] = old_sizes[key];\n        }\n    }\n\n    this.regular_table._column_sizes.override = overrides;\n}\n\n/**\n * Extract the current user-overriden column widths from\n * `regular-table`.  This functiond depends on the internal\n * implementation of `regular-table` and may break!\n *\n * @returns An Object-as-dictionary keyed by column_path string, and\n * valued by the column's user-overridden pixel width.\n */\nexport function save_column_size_overrides() {\n    if (!this._initialized) {\n        return [];\n    }\n\n    if (this._cached_column_sizes) {\n        const x = this._cached_column_sizes;\n        this._cached_column_sizes = undefined;\n        return x;\n    }\n\n    const overrides = this.regular_table._column_sizes.override;\n    const { group_by, columns } = this.model._config;\n    const tree_header_offset = group_by?.length > 0 ? group_by.length + 1 : 0;\n\n    const old_sizes = {};\n    for (const key of Object.keys(overrides)) {\n        if (overrides[key] !== undefined) {\n            const index = key - tree_header_offset;\n            if (index > -1) {\n                old_sizes[this.model._column_paths[index]] = overrides[key];\n            } else if (index === -1) {\n                old_sizes[\"__ROW_PATH__\"] = overrides[key];\n            }\n        }\n    }\n\n    return old_sizes;\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport function toggle_edit_mode(force = undefined) {\n    if (typeof force === \"undefined\") {\n        force = !this._is_edit_mode;\n    }\n\n    this._is_edit_mode = force;\n    this.classList.toggle(\"editable\", force);\n    if (this._edit_mode !== undefined) {\n        this._edit_mode.classList.toggle(\"editable\", force);\n        if (force) {\n            this._edit_mode.children[0].textContent = \"Editable\";\n        } else {\n            this._edit_mode.children[0].textContent = \"Read Only\";\n        }\n    }\n}\n\nexport function toggle_scroll_lock(force = undefined) {\n    if (typeof force === \"undefined\") {\n        force = !this._is_scroll_lock;\n    }\n\n    this._is_scroll_lock = force;\n    this.classList.toggle(\"sub-cell-scroll-disabled\", force);\n    if (this._scroll_lock !== undefined) {\n        this._scroll_lock.classList.toggle(\"lock-scroll\", force);\n        if (!force) {\n            this._scroll_lock.children[0].textContent = \"Free Scroll\";\n        } else {\n            this._scroll_lock.children[0].textContent = \"Align Scroll\";\n        }\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { restore_column_size_overrides } from \"../model/column_overrides.js\";\nimport { toggle_edit_mode, toggle_scroll_lock } from \"../model/toolbar.js\";\nimport { PRIVATE_PLUGIN_SYMBOL } from \"../model\";\nimport { make_color_record } from \"../color_utils.js\";\n\n/**\n * Restore this plugin's state from a previously saved `token`.\n *\n * @param {*} token A token returned from `save()`.\n */\nexport function restore(token) {\n    token = JSON.parse(JSON.stringify(token));\n    const overrides = {};\n    if (token.columns) {\n        for (const col of Object.keys(token.columns)) {\n            const col_config = token.columns[col];\n            if (col_config.column_size_override !== undefined) {\n                overrides[col] = col_config.column_size_override;\n                delete col_config[\"column_size_override\"];\n            }\n\n            if (col_config?.pos_fg_color) {\n                col_config.pos_fg_color = make_color_record(\n                    col_config.pos_fg_color\n                );\n                col_config.neg_fg_color = make_color_record(\n                    col_config.neg_fg_color\n                );\n            }\n\n            if (col_config?.pos_bg_color) {\n                col_config.pos_bg_color = make_color_record(\n                    col_config.pos_bg_color\n                );\n                col_config.neg_bg_color = make_color_record(\n                    col_config.neg_bg_color\n                );\n            }\n\n            if (col_config?.color) {\n                col_config.color = make_color_record(col_config.color);\n            }\n\n            if (Object.keys(col_config).length === 0) {\n                delete token.columns[col];\n            }\n        }\n    }\n\n    if (\"editable\" in token) {\n        toggle_edit_mode.call(this, token.editable);\n    }\n\n    if (\"scroll_lock\" in token) {\n        toggle_scroll_lock.call(this, token.scroll_lock);\n    }\n\n    const datagrid = this.regular_table;\n    try {\n        datagrid._resetAutoSize();\n    } catch (e) {\n        // Do nothing;  this may fail if no auto size info has been read.\n        // TODO fix this regular-table API\n    }\n\n    restore_column_size_overrides.call(this, overrides, true);\n    datagrid[PRIVATE_PLUGIN_SYMBOL] = token.columns;\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n/**\n * Custom Element lifecycle method.\n */\nexport function connectedCallback() {\n    if (!this._toolbar) {\n        this._toolbar = document.createElement(\n            \"perspective-viewer-datagrid-toolbar\"\n        );\n    }\n\n    this.parentElement.appendChild(this._toolbar);\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { PRIVATE_PLUGIN_SYMBOL } from \"../model\";\nimport { save_column_size_overrides } from \"../model/column_overrides.js\";\n\n/**\n * Serialize the state of this plugin to a token.\n *\n * @returns This plugin's state as a token.\n */\nexport function save() {\n    if (this.regular_table) {\n        const datagrid = this.regular_table;\n        const token = {\n            columns: {},\n            scroll_lock: !!this._is_scroll_lock,\n            editable: !!this._is_edit_mode,\n        };\n\n        for (const col of Object.keys(datagrid[PRIVATE_PLUGIN_SYMBOL] || {})) {\n            const config = Object.assign(\n                {},\n                datagrid[PRIVATE_PLUGIN_SYMBOL][col]\n            );\n            if (config?.pos_fg_color || config?.pos_bg_color) {\n                config.pos_fg_color = config.pos_fg_color?.[0];\n                config.neg_fg_color = config.neg_fg_color?.[0];\n                config.pos_bg_color = config.pos_bg_color?.[0];\n                config.neg_bg_color = config.neg_bg_color?.[0];\n            }\n\n            if (config?.color) {\n                config.color = config.color[0];\n            }\n\n            token.columns[col] = config;\n        }\n\n        const column_size_overrides = save_column_size_overrides.call(this);\n\n        for (const col of Object.keys(column_size_overrides || {})) {\n            if (!token.columns[col]) {\n                token.columns[col] = {};\n            }\n\n            token.columns[col].column_size_override =\n                column_size_overrides[col];\n        }\n\n        return JSON.parse(JSON.stringify(token));\n    }\n    return {};\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { restore_column_size_overrides } from \"../model/column_overrides.js\";\nimport { save_column_size_overrides } from \"../model/column_overrides.js\";\n\n/**\n * Draw this datagrid instance.\n *\n * @param {perspective.View} view\n * @returns\n */\nexport async function draw(view) {\n    if (this.parentElement) {\n        await this.activate(view);\n    }\n\n    if (!this.isConnected || this.offsetParent == null) {\n        return;\n    }\n\n    const old_sizes = save_column_size_overrides.call(this);\n    const draw = this.regular_table.draw({ invalid_columns: true });\n    if (!this.model._preserve_focus_state) {\n        this.regular_table.scrollTop = 0;\n        this.regular_table.scrollLeft = 0;\n        this.regular_table.dispatchEvent(\n            new CustomEvent(\"psp-deselect-all\", { bubbles: false })\n        );\n        this.regular_table._resetAutoSize();\n    } else {\n        this.model._preserve_focus_state = false;\n    }\n\n    restore_column_size_overrides.call(this, old_sizes);\n    await draw;\n\n    this._toolbar.classList.toggle(\n        \"aggregated\",\n        this.model._config.group_by.length > 0 ||\n            this.model._config.split_by.length > 0\n    );\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport { activate } from \"../plugin/activate.js\";\nimport { restore } from \"../plugin/restore.js\";\nimport { connectedCallback } from \"../plugin/connected\";\nimport { save } from \"../plugin/save\";\nimport { draw } from \"../plugin/draw\";\n\n/**\n * The custom element class for this plugin.  The interface methods for this\n */\nexport class HTMLPerspectiveViewerDatagridPluginElement extends HTMLElement {\n    constructor() {\n        super();\n        this.regular_table = document.createElement(\"regular-table\");\n        this._is_scroll_lock = false;\n    }\n\n    connectedCallback() {\n        return connectedCallback.call(this);\n    }\n\n    disconnectedCallback() {\n        this._toolbar.parentElement.removeChild(this._toolbar);\n    }\n\n    async activate(view) {\n        return await activate.call(this, view);\n    }\n\n    get name() {\n        return \"Datagrid\";\n    }\n\n    get category() {\n        return \"Basic\";\n    }\n\n    get select_mode() {\n        return \"toggle\";\n    }\n\n    get min_config_columns() {\n        return undefined;\n    }\n\n    get config_column_names() {\n        return [\"Columns\"];\n    }\n\n    /**\n     * Give the Datagrid a higher priority so it is loaded\n     * over the default charts by default.\n     */\n    get priority() {\n        return 1;\n    }\n\n    async draw(view) {\n        return await draw.call(this, view);\n    }\n\n    async update(view) {\n        this.model._num_rows = await view.num_rows();\n        await this.regular_table.draw();\n    }\n\n    async resize() {\n        if (!this.isConnected || this.offsetParent == null) {\n            return;\n        }\n\n        if (this._initialized) {\n            await this.regular_table.draw();\n        }\n    }\n\n    async clear() {\n        this.regular_table._resetAutoSize();\n        this.regular_table.clear();\n    }\n\n    save() {\n        return save.call(this);\n    }\n\n    restore(token) {\n        return restore.call(this, token);\n    }\n\n    async restyle(view) {\n        await this.draw(view);\n    }\n\n    delete() {\n        if (this.regular_table.table_model) {\n            this.regular_table._resetAutoSize();\n        }\n        this.regular_table.clear();\n    }\n}\n", "/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport TOOLBAR_STYLE from \"../../../dist/css/perspective-viewer-datagrid-toolbar.css\";\nimport { toggle_edit_mode, toggle_scroll_lock } from \"../model/toolbar\";\n\n/**\n * The custom element for this plugin's toolbar, a component which displays in\n * the host `<perspective-viewer>`'s status bar when this plugin is active.\n * In the case of Datagrid, this comprises \"Editable\" and \"Scroll Lock\" toggle\n * buttons.\n */\nexport class HTMLPerspectiveViewerDatagridToolbarElement extends HTMLElement {\n    connectedCallback() {\n        if (this._initialized) {\n            return;\n        }\n\n        this._initialized = true;\n        this.setAttribute(\"slot\", \"plugin-settings\");\n        this.attachShadow({ mode: \"open\" });\n        this.shadowRoot.innerHTML = `\n            <style>\n                ${TOOLBAR_STYLE}\n            </style>\n            <div id=\"toolbar\">\n                <span id=\"scroll_lock\" class=\"button\">\n                    <span>Free Scroll</span>\n                </span>\n                <span id=\"edit_mode\" class=\"button\"><span>Read Only</span></span>\n            </div>\n        `;\n\n        const viewer = this.parentElement;\n        const plugin = viewer.querySelector(\"perspective-viewer-datagrid\");\n        plugin._scroll_lock = this.shadowRoot.querySelector(\"#scroll_lock\");\n        plugin._scroll_lock.addEventListener(\"click\", () =>\n            toggle_scroll_lock.call(plugin)\n        );\n\n        plugin._edit_mode = this.shadowRoot.querySelector(\"#edit_mode\");\n        plugin._edit_mode.addEventListener(\"click\", () => {\n            toggle_edit_mode.call(plugin);\n            plugin.regular_table.draw();\n            viewer.dispatchEvent(new Event(\"perspective-config-update\"));\n        });\n    }\n}\n"],
  "mappings": "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",
  "names": ["get_psp_type", "metadata", "column_header_style_listener", "regularTable", "header_depth", "group_header_trs", "col_headers", "td", "column_name", "sort", "x", "needs_border", "is_corner", "type", "is_numeric", "is_string", "is_date", "is_datetime", "group_header_style_listener", "regularTable", "header_depth", "group_header_trs", "m", "marked", "table", "y", "row", "tops", "x", "td", "metadata", "needs_border", "cell", "xx", "tx", "ty", "PRIVATE_PLUGIN_SYMBOL", "style_cell_flash", "metadata", "td", "pos_s", "pos_e", "neg_s", "neg_e", "id", "metadata_path", "row_idx", "col_idx", "chroma", "blend", "a", "b", "rgbaToRgb", "r", "g", "source", "f", "c", "infer_foreground_from_background", "make_gradient", "chromahex", "r1", "g1", "b1", "r2", "g2", "b2", "make_color_record", "color", "chroma_neg", "_neg_grad", "rgb", "cell_style_numeric", "plugin", "td", "metadata", "is_positive", "is_negative", "pos_bg_color", "neg_bg_color", "bg_tuple", "hex", "r", "g", "b", "_gradhex", "a", "source", "foreground", "infer_foreground_from_background", "rgbaToRgb", "style_cell_flash", "gradhex", "chroma", "cell_style_string", "plugin", "td", "metadata", "column_name", "hex", "r", "g", "b", "gradhex", "source", "foreground", "infer_foreground_from_background", "rgbaToRgb", "series_map", "seed", "color_seed", "s", "l", "chroma", "color2", "hex2", "cell_style_datetime", "plugin", "td", "metadata", "column_name", "hex", "r", "g", "b", "gradhex", "source", "foreground", "infer_foreground_from_background", "rgbaToRgb", "cell_style_boolean", "plugin", "td", "metadata", "hex", "cell_style_row_header", "regularTable", "td", "metadata", "is_not_empty", "is_leaf", "next", "is_collapse", "get_psp_type", "metadata", "table_cell_style_listener", "regularTable", "plugins", "PRIVATE_PLUGIN_SYMBOL", "tr", "td", "column_name", "type", "plugin", "is_numeric", "cell_style_numeric", "cell_style_boolean", "cell_style_string", "cell_style_datetime", "is_th", "cell_style_row_header", "sortHandler", "regularTable", "event", "target", "meta", "column_name", "sort", "append_sort", "override_sort", "found", "sort_term", "_column_name", "_sort_dir", "term", "create_sort", "sort_dir", "order", "ROW_COL_SORT_ORDER", "ROW_SORT_ORDER", "inc_sort_dir", "activate_plugin_menu", "regularTable", "target", "column_max", "target_meta", "column_name", "column_type", "is_numeric", "MENU", "default_config", "scroll_handler", "update_handler", "event", "config", "make_color_record", "PRIVATE_PLUGIN_SYMBOL", "blur_handler", "pset", "expandCollapseHandler", "regularTable", "event", "meta", "is_collapse", "x", "mousedown_listener", "regularTable", "event", "target", "expandCollapseHandler", "rect", "meta", "column_name", "column_type", "activate_plugin_menu", "min", "max", "bound", "sortHandler", "click_listener", "isEditable", "viewer", "allowed", "has_pivots", "selectable", "editable", "editable_style_listener", "table", "plugins", "PRIVATE_PLUGIN_SYMBOL", "edit", "td", "meta", "type", "col_name", "focus_style_listener", "table", "_viewer", "selected_position_map", "tds", "selected_position", "td", "meta", "lock", "body", "args", "resolve", "x", "getPos", "_range", "range", "write_cell", "table", "model", "active_cell", "meta", "type", "text", "id", "msg", "is_editable", "viewer", "allowed", "has_pivots", "selectable", "editable", "moveSelection", "selected_position_map", "dx", "dy", "num_columns", "num_rows", "selected_position", "xmin", "xmax", "ymin", "ymax", "y", "focus_style_listener", "keydownListener", "event", "target", "clickListener", "_viewer", "is_all_editable", "is_editable2", "is_bool", "is_null", "focusoutListener", "table", "viewer", "selected_position_map", "event", "is_editable", "selectedPosition", "write_cell", "focusinListener", "_viewer", "meta", "new_state", "getCellConfig", "_view", "_config", "row_idx", "col_idx", "group_by", "split_by", "start_row", "end_row", "r", "group_by_values", "x", "row_filters", "pivot", "index", "pivot_value", "column_index", "column_paths", "result", "column_filters", "split_by_values", "value", "filter", "selectionListener", "regularTable", "viewer", "selected_rows_map", "event", "meta", "id", "selected", "key_match", "agg", "x", "i", "is_deselect", "detail", "row", "column_names", "config", "getCellConfig", "selectionStyleListener", "regularTable", "viewer", "selected_rows_map", "has_selected", "selected", "td", "meta", "id", "key_match", "agg", "x", "i", "th", "deselect_all_listener", "regularTable", "_viewer", "selected_rows_map", "td", "chroma", "get_type_config", "FORMATTER_CONS", "val", "FormatterCache", "type", "plugin", "type_config", "options", "format", "formatter_key", "FORMAT_CACHE", "FormatterCache", "format_cell", "parts", "val", "plugins", "use_table_schema", "title", "type", "plugin", "div", "anchor", "formatter", "format_tree_header", "paths", "row_headers", "regularTable", "plugins", "PRIVATE_PLUGIN_SYMBOL", "path", "last", "formatted", "format_cell", "createDataListener", "last_meta", "last_column_paths", "last_ids", "last_reverse_ids", "last_reverse_columns", "regularTable", "x0", "y0", "x1", "y1", "columns", "new_window", "acc", "x", "i", "data", "metadata", "column_headers", "column_paths", "ipath", "path", "path_parts", "column", "format_cell", "PRIVATE_PLUGIN_SYMBOL", "format_tree_header", "get_rule", "regular", "tag", "def", "color", "ElemFactory", "name", "elem", "get_psp_type", "metadata", "createModel", "table", "view", "extend", "config", "expressions", "expr", "table_schema", "validated_expressions", "num_rows", "schema", "expression_schema", "column_paths", "_edit_port", "_plugin_background", "chroma", "_pos_fg_color", "make_color_record", "_neg_fg_color", "_pos_bg_color", "blend", "_neg_bg_color", "_color", "_schema", "_table_schema", "_column_paths", "path", "_is_editable", "_column_types", "column_path", "column_path_parts", "column", "model", "createDataListener", "dispatch_click_listener", "table", "viewer", "event", "meta", "x", "y", "row", "column_names", "config", "getCellConfig", "activate", "view", "viewer", "table", "createModel", "table_cell_style_listener", "group_header_style_listener", "column_header_style_listener", "click_listener", "mousedown_listener", "selected_rows_map", "selectionStyleListener", "selectionListener", "deselect_all_listener", "dispatch_click_listener", "selected_position_map", "editable_style_listener", "focus_style_listener", "clickListener", "focusinListener", "focusoutListener", "keydownListener", "restore_column_size_overrides", "old_sizes", "cache", "overrides", "group_by", "columns", "tree_header_offset", "key", "index", "save_column_size_overrides", "x", "toggle_edit_mode", "force", "toggle_scroll_lock", "restore", "token", "overrides", "col", "col_config", "make_color_record", "toggle_edit_mode", "toggle_scroll_lock", "datagrid", "restore_column_size_overrides", "PRIVATE_PLUGIN_SYMBOL", "connectedCallback", "save", "datagrid", "token", "col", "PRIVATE_PLUGIN_SYMBOL", "config", "column_size_overrides", "save_column_size_overrides", "draw", "view", "old_sizes", "save_column_size_overrides", "restore_column_size_overrides", "HTMLPerspectiveViewerDatagridPluginElement", "connectedCallback", "view", "activate", "draw", "save", "token", "restore", "HTMLPerspectiveViewerDatagridToolbarElement", "perspective_viewer_datagrid_toolbar_default", "viewer", "plugin", "toggle_scroll_lock", "toggle_edit_mode", "_register_global_styles", "style", "perspective_viewer_datagrid_default", "_register_element", "HTMLPerspectiveViewerDatagridToolbarElement", "HTMLPerspectiveViewerDatagridPluginElement"]
}
