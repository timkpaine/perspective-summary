var si=Object.create;var _n=Object.defineProperty;var ui=Object.getOwnPropertyDescriptor;var li=Object.getOwnPropertyNames;var di=Object.getPrototypeOf,ci=Object.prototype.hasOwnProperty;var yn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var fi=(t,e,n,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of li(e))!ci.call(t,l)&&l!==n&&_n(t,l,{get:()=>e[l],enumerable:!(a=ui(e,l))||a.enumerable});return t};var pt=(t,e,n)=>(n=t!=null?si(di(t)):{},fi(e||!t||!t.__esModule?_n(n,"default",{value:t,enumerable:!0}):n,t));var _t=yn((bt,Rn)=>{(function(t,e){typeof bt=="object"&&typeof Rn<"u"?e(bt):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.lumino_coreutils={}))})(bt,function(t){"use strict";t.JSONExt=void 0,function(f){f.emptyObject=Object.freeze({}),f.emptyArray=Object.freeze([]);function c(y){return y===null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"}f.isPrimitive=c;function m(y){return Array.isArray(y)}f.isArray=m;function b(y){return!c(y)&&!m(y)}f.isObject=b;function x(y,L){if(y===L)return!0;if(c(y)||c(L))return!1;var T=m(y),k=m(L);return T!==k?!1:T&&k?I(y,L):g(y,L)}f.deepEqual=x;function M(y){return c(y)?y:m(y)?v(y):w(y)}f.deepCopy=M;function I(y,L){if(y===L)return!0;if(y.length!==L.length)return!1;for(var T=0,k=y.length;T<k;++T)if(!x(y[T],L[T]))return!1;return!0}function g(y,L){if(y===L)return!0;for(var T in y)if(y[T]!==void 0&&!(T in L))return!1;for(var T in L)if(L[T]!==void 0&&!(T in y))return!1;for(var T in y){var k=y[T],S=L[T];if(!(k===void 0&&S===void 0)&&(k===void 0||S===void 0||!x(k,S)))return!1}return!0}function v(y){for(var L=new Array(y.length),T=0,k=y.length;T<k;++T)L[T]=M(y[T]);return L}function w(y){var L={};for(var T in y){var k=y[T];k!==void 0&&(L[T]=M(k))}return L}}(t.JSONExt||(t.JSONExt={}));var e=function(){function f(){this._types=[],this._values=[]}return f.prototype.types=function(){return this._types.slice()},f.prototype.hasData=function(c){return this._types.indexOf(c)!==-1},f.prototype.getData=function(c){var m=this._types.indexOf(c);return m!==-1?this._values[m]:void 0},f.prototype.setData=function(c,m){this.clearData(c),this._types.push(c),this._values.push(m)},f.prototype.clearData=function(c){var m=this._types.indexOf(c);m!==-1&&(this._types.splice(m,1),this._values.splice(m,1))},f.prototype.clear=function(){this._types.length=0,this._values.length=0},f}(),n=function(){function f(){var c=this;this.promise=new Promise(function(m,b){c._resolve=m,c._reject=b})}return f.prototype.resolve=function(c){var m=this._resolve;m(c)},f.prototype.reject=function(c){var m=this._reject;m(c)},f}(),a=function(){function f(c){this.name=c,this._tokenStructuralPropertyT=null}return f}();function l(f){for(var c=0,m=0,b=f.length;m<b;++m)m%4===0&&(c=Math.random()*4294967295>>>0),f[m]=c&255,c>>>=8}t.Random=void 0,function(f){f.getRandomValues=function(){var c=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return c&&typeof c.getRandomValues=="function"?function(b){return c.getRandomValues(b)}:l}()}(t.Random||(t.Random={}));function p(f){for(var c=new Uint8Array(16),m=new Array(256),b=0;b<16;++b)m[b]="0"+b.toString(16);for(var b=16;b<256;++b)m[b]=b.toString(16);return function(){return f(c),c[6]=64|c[6]&15,c[8]=128|c[8]&63,m[c[0]]+m[c[1]]+m[c[2]]+m[c[3]]+"-"+m[c[4]]+m[c[5]]+"-"+m[c[6]]+m[c[7]]+"-"+m[c[8]]+m[c[9]]+"-"+m[c[10]]+m[c[11]]+m[c[12]]+m[c[13]]+m[c[14]]+m[c[15]]}}t.UUID=void 0,function(f){f.uuid4=p(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=e,t.PromiseDelegate=n,t.Token=a,Object.defineProperty(t,"__esModule",{value:!0})})});var Nn=yn((Ct,Hn)=>{(function(t,e){typeof Ct=="object"&&typeof Hn<"u"?e(Ct):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.lumino_coreutils={}))})(Ct,function(t){"use strict";t.JSONExt=void 0,function(f){f.emptyObject=Object.freeze({}),f.emptyArray=Object.freeze([]);function c(y){return y===null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"}f.isPrimitive=c;function m(y){return Array.isArray(y)}f.isArray=m;function b(y){return!c(y)&&!m(y)}f.isObject=b;function x(y,L){if(y===L)return!0;if(c(y)||c(L))return!1;var T=m(y),k=m(L);return T!==k?!1:T&&k?I(y,L):g(y,L)}f.deepEqual=x;function M(y){return c(y)?y:m(y)?v(y):w(y)}f.deepCopy=M;function I(y,L){if(y===L)return!0;if(y.length!==L.length)return!1;for(var T=0,k=y.length;T<k;++T)if(!x(y[T],L[T]))return!1;return!0}function g(y,L){if(y===L)return!0;for(var T in y)if(y[T]!==void 0&&!(T in L))return!1;for(var T in L)if(L[T]!==void 0&&!(T in y))return!1;for(var T in y){var k=y[T],S=L[T];if(!(k===void 0&&S===void 0)&&(k===void 0||S===void 0||!x(k,S)))return!1}return!0}function v(y){for(var L=new Array(y.length),T=0,k=y.length;T<k;++T)L[T]=M(y[T]);return L}function w(y){var L={};for(var T in y){var k=y[T];k!==void 0&&(L[T]=M(k))}return L}}(t.JSONExt||(t.JSONExt={}));var e=function(){function f(){this._types=[],this._values=[]}return f.prototype.types=function(){return this._types.slice()},f.prototype.hasData=function(c){return this._types.indexOf(c)!==-1},f.prototype.getData=function(c){var m=this._types.indexOf(c);return m!==-1?this._values[m]:void 0},f.prototype.setData=function(c,m){this.clearData(c),this._types.push(c),this._values.push(m)},f.prototype.clearData=function(c){var m=this._types.indexOf(c);m!==-1&&(this._types.splice(m,1),this._values.splice(m,1))},f.prototype.clear=function(){this._types.length=0,this._values.length=0},f}(),n=function(){function f(){var c=this;this.promise=new Promise(function(m,b){c._resolve=m,c._reject=b})}return f.prototype.resolve=function(c){var m=this._resolve;m(c)},f.prototype.reject=function(c){var m=this._reject;m(c)},f}(),a=function(){function f(c){this.name=c,this._tokenStructuralPropertyT=null}return f}();function l(f){for(var c=0,m=0,b=f.length;m<b;++m)m%4===0&&(c=Math.random()*4294967295>>>0),f[m]=c&255,c>>>=8}t.Random=void 0,function(f){f.getRandomValues=function(){var c=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return c&&typeof c.getRandomValues=="function"?function(b){return c.getRandomValues(b)}:l}()}(t.Random||(t.Random={}));function p(f){for(var c=new Uint8Array(16),m=new Array(256),b=0;b<16;++b)m[b]="0"+b.toString(16);for(var b=16;b<256;++b)m[b]=b.toString(16);return function(){return f(c),c[6]=64|c[6]&15,c[8]=128|c[8]&63,m[c[0]]+m[c[1]]+m[c[2]]+m[c[3]]+"-"+m[c[4]]+m[c[5]]+"-"+m[c[6]]+m[c[7]]+"-"+m[c[8]]+m[c[9]]+"-"+m[c[10]]+m[c[11]]+m[c[12]]+m[c[13]]+m[c[14]]+m[c[15]]}}t.UUID=void 0,function(f){f.uuid4=p(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=e,t.PromiseDelegate=n,t.Token=a,Object.defineProperty(t,"__esModule",{value:!0})})});var xn=`.p-Widget,.lm-Widget{box-sizing:border-box;position:relative;overflow:hidden;cursor:default;}.p-Widget.p-mod-hidden,.lm-Widget.lm-mod-hidden{display:none!important;}.lm-AccordionPanel[data-orientation='horizontal']>.lm-AccordionPanel-title{display:block;transform-origin:top left;transform:rotate(-90deg)translate(-100%);}.p-CommandPalette,.lm-CommandPalette{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-CommandPalette-search,.lm-CommandPalette-search{flex:0 0 auto;}.p-CommandPalette-content,.lm-CommandPalette-content{flex:1 1 auto;margin:0;padding:0;min-height:0;overflow:auto;list-style-type:none;}.p-CommandPalette-header,.lm-CommandPalette-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.p-CommandPalette-item,.lm-CommandPalette-item{display:flex;flex-direction:row;}.p-CommandPalette-itemIcon,.lm-CommandPalette-itemIcon{flex:0 0 auto;}.p-CommandPalette-itemContent,.lm-CommandPalette-itemContent{flex:1 1 auto;overflow:hidden;}.p-CommandPalette-itemShortcut,.lm-CommandPalette-itemShortcut{flex:0 0 auto;}.p-CommandPalette-itemLabel,.lm-CommandPalette-itemLabel{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.lm-close-icon{border:1px solid transparent;background-color:transparent;position:absolute;z-index:1;right:3%;top:0;bottom:0;margin:auto;padding:7px 0;display:none;vertical-align:middle;outline:0;cursor:pointer;}.lm-close-icon:after{content:'X';display:block;width:15px;height:15px;text-align:center;color:#000;font-weight:normal;font-size:12px;cursor:pointer;}.p-DockPanel,.lm-DockPanel{z-index:0;}.p-DockPanel-widget,.lm-DockPanel-widget{z-index:0;}.p-DockPanel-tabBar,.lm-DockPanel-tabBar{z-index:1;}.p-DockPanel-handle,.lm-DockPanel-handle{z-index:2;}.p-DockPanel-handle.p-mod-hidden,.lm-DockPanel-handle.lm-mod-hidden{display:none!important;}.p-DockPanel-handle:after,.lm-DockPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-DockPanel-handle[data-orientation='horizontal'],.lm-DockPanel-handle[data-orientation='horizontal']{cursor:ew-resize;}.p-DockPanel-handle[data-orientation='vertical'],.lm-DockPanel-handle[data-orientation='vertical']{cursor:ns-resize;}.p-DockPanel-handle[data-orientation='horizontal']:after,.lm-DockPanel-handle[data-orientation='horizontal']:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-DockPanel-handle[data-orientation='vertical']:after,.lm-DockPanel-handle[data-orientation='vertical']:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-DockPanel-overlay,.lm-DockPanel-overlay{z-index:3;box-sizing:border-box;pointer-events:none;}.p-DockPanel-overlay.p-mod-hidden,.lm-DockPanel-overlay.lm-mod-hidden{display:none!important;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-MenuBar,.lm-MenuBar{outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-MenuBar-content,.lm-MenuBar-content{margin:0;padding:0;display:flex;flex-direction:row;list-style-type:none;}.p--MenuBar-item,.lm-MenuBar-item{box-sizing:border-box;}.p-MenuBar-itemIcon,.p-MenuBar-itemLabel,.lm-MenuBar-itemIcon,.lm-MenuBar-itemLabel{display:inline-block;}.p-ScrollBar,.lm-ScrollBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-ScrollBar[data-orientation='horizontal'],.lm-ScrollBar[data-orientation='horizontal']{flex-direction:row;}.p-ScrollBar[data-orientation='vertical'],.lm-ScrollBar[data-orientation='vertical']{flex-direction:column;}.p-ScrollBar-button,.lm-ScrollBar-button{box-sizing:border-box;flex:0 0 auto;}.p-ScrollBar-track,.lm-ScrollBar-track{box-sizing:border-box;position:relative;overflow:hidden;flex:1 1 auto;}.p-ScrollBar-thumb,.lm-ScrollBar-thumb{box-sizing:border-box;position:absolute;}.p-SplitPanel-child,.lm-SplitPanel-child{z-index:0;}.p-SplitPanel-handle,.lm-SplitPanel-handle{z-index:1;}.p-SplitPanel-handle.p-mod-hidden,.lm-SplitPanel-handle.lm-mod-hidden{display:none!important;}.p-SplitPanel-handle:after,.lm-SplitPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle{cursor:ew-resize;}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle{cursor:ns-resize;}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-TabBar,.lm-TabBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-TabBar[data-orientation='horizontal'],.lm-TabBar[data-orientation='horizontal']{flex-direction:row;align-items:flex-end;}.p-TabBar[data-orientation='vertical'],.lm-TabBar[data-orientation='vertical']{flex-direction:column;align-items:flex-end;}.p-TabBar-content,.lm-TabBar-content{margin:0;padding:0;display:flex;flex:1 1 auto;list-style-type:none;}.p-TabBar[data-orientation='horizontal']>.p-TabBar-content,.lm-TabBar[data-orientation='horizontal']>.lm-TabBar-content{flex-direction:row;}.p-TabBar[data-orientation='vertical']>.p-TabBar-content,.lm-TabBar[data-orientation='vertical']>.lm-TabBar-content{flex-direction:column;}.p-TabBar-tab,.lm-TabBar-tab{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden;touch-action:none;}.p-TabBar-tabIcon,.p-TabBar-tabCloseIcon,.lm-TabBar-tabIcon,.lm-TabBar-tabCloseIcon{flex:0 0 auto;}.p-TabBar-tabLabel,.lm-TabBar-tabLabel{flex:1 1 auto;overflow:hidden;white-space:nowrap;}.lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;}.p-TabBar-tab.p-mod-hidden,.lm-TabBar-tab.lm-mod-hidden{display:none!important;}.lm-TabBar-addButton.lm-mod-hidden{display:none!important;}.p-TabBar.p-mod-dragging .p-TabBar-tab,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab{position:relative;}.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab{left:0;transition:left 150ms ease;}.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab{top:0;transition:top 150ms ease;}.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging{transition:none;}.lm-TabBar-tabLabel .lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;background:inherit;}.p-TabPanel-tabBar,.lm-TabPanel-tabBar{z-index:1;}.p-TabPanel-stackedPanel,.lm-TabPanel-stackedPanel{z-index:0;}:host .p-TabBar-tabLabel{background-color:transparent;border:none;color:var(--icon--color,#666);cursor:pointer;padding:0px 6px;margin:0;margin-left:10.5px;margin-right:auto;flex:0 1 auto;border-radius:3px;}:host .p-TabBar-tabLabel:hover{background-color:var(--icon--color);color:var(--plugin--background);}:host .p-TabBar-tabLabel:focus{outline:none;color:var(--workspace-secondary--color,#666)!important;cursor:text;}:host .p-TabBar-tab.p-mod-closable>.p-TabBar-tabCloseIcon:before{content:var(--close-button--content,"\\2715");font-family:"Roboto Mono";}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content,"\\1F527");font-family:var(--settings--font-family,"Arial");transition:color 0.5s ease;}:host .p-TabBar-tab.p-mod-current.settings_open>.p-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content,"\\1F527");font-family:"Roboto Mono";}:host .p-TabBar-tab.p-mod-current.linked>.p-TabBar-tabConfigIcon:before{color:#22a0ce;}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon{opacity:0;pointer-events:none;}:host .p-TabBar-tab.p-mod-current>.p-TabBar-tabConfigIcon{opacity:1;pointer-events:all;}:host .p-mod-current .p-TabBar-tabConfigIcon,:host .p-mod-current .p-TabBar-tabCloseIcon{color:inherit;transition:color 0.2s ease-out;}:host .p-mod-current .p-TabBar-tabConfigIcon:hover,:host .p-mod-current .p-TabBar-tabCloseIcon:hover{color:#1a7da1;transition:color 0.2s ease-out;}:host .p-BoxPanel{overflow:scroll!important;}:host .p-TabBar,:host .p-TabBar-tab{position:relative;overflow:visible!important;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";color:#aaa;}:host .p-mod-current .p-TabBar-tabLabel:empty::after{color:#ddd;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";}:host .divider{left:32px;bottom:0;position:absolute;right:32px;height:1px;background-color:var(--workspace-tabbar--border-color);margin-bottom:0px;}:host .p-TabBar-tab .drag-handle{height:12px;width:5px;-webkit-mask-image:var(--column-drag-handle--mask-image);mask-image:var(--column-drag-handle--mask-image);margin:0px 0 0 16.5px;background-repeat:no-repeat;background-color:var(--inactive--color,red);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;}:host .p-TabBar-tab.p-mod-hidden{display:flex!important;opacity:0.5;}:host .p-TabBar-tab.p-mod-current .divider{display:block;}:host .p-TabBar{min-height:40px!important;}:host .pfm-button-base{background:white!important;}:host .pfm-button-base:active{background:#016bc6!important;}:host .p-TabBar-content{padding:0px;border-bottom:0px solid#fff!important;border-left:#eaeaea;border-right:#eaeaea;}:host .p-TabBar-tab.p-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0px;}:host .p-TabBar-tab.p-mod-current.settings_open .shadow{box-shadow:none;}:host .p-TabBar-tab{border-color:#eaeaea;align-items:center;}:host .p-TabBar-content.inactive-blur>.p-TabBar-tab{background-color:var(--workspace-inactive-blur--background-color,transparent);}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon{display:block;}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabLabel{margin-left:0px;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{border-width:1px 1px 0px 1px!important;border-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabToolbar{display:flex;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .divider{height:1px;margin-bottom:0px;background-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open:last-child:first-child .divider{transition:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabConfigIcon{display:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabLoadingIcon{display:block;}:host .p-TabBar-content>.p-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:none;color:#737373;height:40px!important;max-height:40px!important;transform:none!important;transition:color 0.2s ease-out;color:#ccc;color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab:hover{color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-secondary--color,#666);}:host .p-TabBar-tab.p-mod-current .p-TabBar-tabLabel{white-space:nowrap!important;}:host .p-TabBar-tabLabel{font-family:inherit;font-family:"Roboto Mono";font-size:12px;line-height:22px;text-align:start;white-space:normal!important;word-break:break-all;}:host .p-TabBar-tabCloseIcon,:host .p-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:16.5px!important;}:host .p-TabBar-tabConfigIcon{padding-left:8px;padding-right:8px!important;}:host .p-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px;}:host .bottom .p-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-tabbar--color,#666)!important;border:var(--workspace-tabbar--border,1px solid#ddd);border-width:var(--workspace-tabbar-tab--border-width);box-shadow:0 13px 0 -12px var(--inactive--border-color);border-radius:6px 6px 0 0;background-color:var(--workspace-tabbar--background-color,white);height:40px!important;max-height:40px!important;}:host .bottom .p-TabBar-tab.p-mod-current{border:none;}:host ::-webkit-scrollbar-thumb{background-color:#ccc;}:host .perspective-workspace.context-menu * .p-TabBar.context-focus{opacity:1;}:host .perspective-workspace.context-menu * .p-TabBar,:host .perspective-workspace.context-menu .p-Widget.workspace-widget:not(.context-focus) .viewer-container{opacity:0.2;}:host .bookmarks-button{margin-left:11px;margin-right:-13px;border-radius:3px;height:22px;}:host .bookmarks-button:hover{background-color:var(--icon--color);}:host .bookmarks{cursor:pointer;background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:26px;height:12px;-webkit-mask-image:var(--bookmarks--mask-image);mask-image:var(--bookmarks--mask-image);-webkit-mask-position:center;mask-position:center;-webkit-mask-size:auto;mask-size:auto;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;padding:5px;}:host .bookmarks:hover{background-color:var(--plugin--background);}:host .p-DockPanel{overflow:visible!important;position:absolute;background-color:var(--detail--background-color,transparent);padding:3px;top:0;left:0;right:0;bottom:0;}:host .p-DockPanel[data-mode="single-document"]{padding:0px;}:host .lm-Widget,:host .p-Widget{cursor:inherit;}:host .p-DockPanel.ew,:host .p-DockPanel.ew .p-Widget,:host .p-SplitPanel.ew,:host .p-SplitPanel.ew .p-Widget{cursor:ew-resize!important;}:host .p-DockPanel.ns,:host .p-DockPanel.ns .p-Widget,:host .p-SplitPanel.ns,:host .p-SplitPanel.ns .p-Widget{cursor:ns-resize!important;}:host .workspace-master-widget{min-width:100px!important;}:host .p-DockPanel.resizing ::slotted(perspective-viewer),:host .p-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none;}:host .widget-blur ::slotted(perspective-viewer){opacity:0.5;}:host .p-DockPanel-handle.resizing{background-color:rgba(0,0,0,0.05);}:host .perspective-scroll-panel{overflow:auto!important;}:host .p-Panel{min-height:100%;}:host .p-DockPanel-handle{background-color:none;}:host .p-SplitPanel-handle,:host .p-DockPanel-handle{transition:background-color 0.3s ease-out;}:host .p-SplitPanel-handle:hover,:host .p-DockPanel-handle:hover{background-color:rgba(0,0,0,0.05);}:host .p-DockPanel-overlay{background:rgba(75,75,75,0.2);border:1px dashed#666;border-radius:6px;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:linear;margin:0px;}:host .lm-DockPanel:not([data-mode="single-document"]) .viewer-container{border:var(--workspace-tabbar--border,1px solid var(--inactive--color));border-width:var(--workspace-tabbar--border-width);border-radius:var(--workspace-tabbar--border-radius,0 0 6px 6px);}:host .viewer-container{flex:1;height:100%;overflow:hidden;}:host .perspective-scroll-panel.has-master-panel{margin-left:-8px!important;}:host .perspective-scroll-panel .workspace-widget{min-width:300px;min-height:200px;}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid#eaedef;border-width:0px!important;}:host{background-color:hsl(210deg 18% 90%);width:100%;height:100%;}:host .workspace{width:100%;height:100%;}:host .p-SplitPanel{height:100%;width:100%;}:host div.p-SplitPanel-handle{background-color:inherit;}:host .master-panel{background-color:var(--workspace-master--background-color,inherit);padding:0px 0px 0px 0px;}:host .master-panel .viewer-container{border-width:0px;}:host .perspective-workspace.context-menu * .p-SplitPanel-handle{opacity:0.2;}:host .perspective-workspace.context-menu>.p-SplitPanel-handle{opacity:0.2;}`;var wn=`<!--

Copyright (c) 2017, the Perspective Authors.

This file is part of the Perspective library, distributed under the terms of
the Apache License 2.0.  The full license can be found in the LICENSE file.

-->
<template id="perspective-workspace">
    <div id="container" class="workspace"></div>
</template>
`;var Ft;(A=>{function t(u,d,r=0,i=-1){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let h;i<r?h=i+1+(o-r):h=i-r+1;for(let s=0;s<h;++s){let _=(r+s)%o;if(u[_]===d)return _}return-1}A.firstIndexOf=t;function e(u,d,r=-1,i=0){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let h;r<i?h=r+1+(o-i):h=r-i+1;for(let s=0;s<h;++s){let _=(r-s+o)%o;if(u[_]===d)return _}return-1}A.lastIndexOf=e;function n(u,d,r=0,i=-1){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let h;i<r?h=i+1+(o-r):h=i-r+1;for(let s=0;s<h;++s){let _=(r+s)%o;if(d(u[_],_))return _}return-1}A.findFirstIndex=n;function a(u,d,r=-1,i=0){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let h;r<i?h=r+1+(o-i):h=r-i+1;for(let s=0;s<h;++s){let _=(r-s+o)%o;if(d(u[_],_))return _}return-1}A.findLastIndex=a;function l(u,d,r=0,i=-1){let o=n(u,d,r,i);return o!==-1?u[o]:void 0}A.findFirstValue=l;function p(u,d,r=-1,i=0){let o=a(u,d,r,i);return o!==-1?u[o]:void 0}A.findLastValue=p;function f(u,d,r,i=0,o=-1){let h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);let s=i,_=o-i+1;for(;_>0;){let E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}A.lowerBound=f;function c(u,d,r,i=0,o=-1){let h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);let s=i,_=o-i+1;for(;_>0;){let E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}A.upperBound=c;function m(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(let i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}A.shallowEqual=m;function b(u,d={}){let{start:r,stop:i,step:o}=d;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");let h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);let s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);let _=[];for(let E=0;E<s;++E)_[E]=u[r+E*o];return _}A.slice=b;function x(u,d,r){let i=u.length;if(i<=1||(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d===r))return;let o=u[d],h=d<r?1:-1;for(let s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}A.move=x;function M(u,d=0,r=-1){let i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){let o=u[d],h=u[r];u[d++]=h,u[r--]=o}}A.reverse=M;function I(u,d,r=0,i=-1){let o=u.length;if(o<=1||(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),r>=i))return;let h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d===0)return;let s=r+d;M(u,r,s-1),M(u,s,i),M(u,r,i)}A.rotate=I;function g(u,d,r=0,i=-1){let o=u.length;if(o===0)return;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let h;i<r?h=i+1+(o-r):h=i-r+1;for(let s=0;s<h;++s)u[(r+s)%o]=d}A.fill=g;function v(u,d,r){let i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(let o=i;o>d;--o)u[o]=u[o-1];u[d]=r}A.insert=v;function w(u,d){let r=u.length;if(d<0&&(d+=r),d<0||d>=r)return;let i=u[d];for(let o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}A.removeAt=w;function y(u,d,r=0,i=-1){let o=t(u,d,r,i);return o!==-1&&w(u,o),o}A.removeFirstOf=y;function L(u,d,r=-1,i=0){let o=e(u,d,r,i);return o!==-1&&w(u,o),o}A.removeLastOf=L;function T(u,d,r=0,i=-1){let o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let h=0;for(let s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}A.removeAllOf=T;function k(u,d,r=0,i=-1){let o,h=n(u,d,r,i);return h!==-1&&(o=w(u,h)),{index:h,value:o}}A.removeFirstWhere=k;function S(u,d,r=-1,i=0){let o,h=a(u,d,r,i);return h!==-1&&(o=w(u,h)),{index:h,value:o}}A.removeLastWhere=S;function C(u,d,r=0,i=-1){let o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let h=0;for(let s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}A.removeAllWhere=C})(Ft||={});function _e(t){let e;return typeof t.iter=="function"?e=t.iter():e=new rt(t),e}function ot(t){let e=0,n=[],a=_e(t),l;for(;(l=a.next())!==void 0;)n[e++]=l;return n}var rt=class{constructor(e){this._index=0;this._source=e}iter(){return this}clone(){let e=new rt(this._source);return e._index=this._index,e}next(){if(!(this._index>=this._source.length))return this._source[this._index++]}};function In(t,e){let n=0,a=_e(t),l;for(;(l=a.next())!==void 0;)if(e(l,n++))return l}var pi;(e=>{function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(pi||={});var vi;(p=>{function t(f,c,m=0){let b=new Array(c.length);for(let x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}p.findIndices=t;function e(f,c,m=0){let b=t(f,c,m);if(!b)return null;let x=0;for(let M=0,I=b.length;M<I;++M){let g=b[M]-m;x+=g*g}return{score:x,indices:b}}p.matchSumOfSquares=e;function n(f,c,m=0){let b=t(f,c,m);if(!b)return null;let x=0,M=m-1;for(let I=0,g=b.length;I<g;++I){let v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}p.matchSumOfDeltas=n;function a(f,c,m){let b=[],x=0,M=0,I=c.length;for(;x<I;){let g=c[x],v=c[x];for(;++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}p.highlight=a;function l(f,c){return f<c?-1:f>c?1:0}p.cmp=l})(vi||={});var B;(function(t){function e(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}t.firstIndexOf=e;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}t.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}t.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}t.findLastIndex=l;function p(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}t.findFirstValue=p;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}t.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}t.lowerBound=c;function m(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}t.upperBound=m;function b(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}t.shallowEqual=b;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],E=0;E<s;++E)_[E]=u[r+E*o];return _}t.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],h=d<r?1:-1,s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}}t.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],h=u[r];u[d++]=h,u[r--]=o}}t.reverse=I;function g(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}t.rotate=g;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s)u[(r+s)%o]=d}}t.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}t.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}t.removeAt=y;function L(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=e(u,d,r,i);return o!==-1&&y(u,o),o}t.removeFirstOf=L;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}t.removeLastOf=T;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllOf=k;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,h=a(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeFirstWhere=S;function C(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,h=l(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeLastWhere=C;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllWhere=A})(B||(B={}));function ye(t){var e;return typeof t.iter=="function"?e=t.iter():e=new gi(t),e}function N(t,e){for(var n=0,a=ye(t),l;(l=a.next())!==void 0;)if(e(l,n++)===!1)return}function Tn(t,e){for(var n=0,a=ye(t),l;(l=a.next())!==void 0;)if(!e(l,n++))return!1;return!0}function kn(t,e){for(var n=0,a=ye(t),l;(l=a.next())!==void 0;)if(e(l,n++))return!0;return!1}function Ln(t){for(var e=0,n=[],a=ye(t),l;(l=a.next())!==void 0;)n[e++]=l;return n}var gi=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),oa=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),aa=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),sa=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),ua=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();function Wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new We(ye(t.map(ye)))}var We=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();function pe(){return new bi}var bi=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var la=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var da=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(e(a,this._index++))return a},t}();function at(t,e){for(var n=0,a=ye(t),l;(l=a.next())!==void 0;)if(e(l,n++))return l}function He(t,e){return new _i(ye(t),e)}var _i=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var ca=function(){function t(e,n,a){this._index=0,this._start=e,this._stop=n,this._step=a,this._length=Pt.rangeLength(e,n,a)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),Pt;(function(t){function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(Pt||(Pt={}));function Ht(t,e,n){var a=0,l=ye(t),p=l.next();if(p===void 0&&n===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(p===void 0)return n;var f=l.next();if(f===void 0&&n===void 0)return p;if(f===void 0)return e(n,p,a++);var c;n===void 0?c=e(p,f,a++):c=e(e(n,p,a++),f,a++);for(var m;(m=l.next())!==void 0;)c=e(c,m,a++);return c}function vt(t){return new yi(t,1)}var yi=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();function En(t){var e;return typeof t.retro=="function"?e=t.retro():e=new xi(t),e}var xi=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var fa=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),Mn;(function(t){function e(f,c,m){m===void 0&&(m=0);for(var b=new Array(c.length),x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}t.findIndices=e;function n(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=0,I=b.length;M<I;++M){var g=b[M]-m;x+=g*g}return{score:x,indices:b}}t.matchSumOfSquares=n;function a(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=m-1,I=0,g=b.length;I<g;++I){var v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}t.matchSumOfDeltas=a;function l(f,c,m){for(var b=[],x=0,M=0,I=c.length;x<I;){for(var g=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}t.highlight=l;function p(f,c){return f<c?-1:f>c?1:0}t.cmp=p})(Mn||(Mn={}));var ha=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var ma=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;e[n]=l}return e},t}();var Cn=function(){function t(e){this._root=new Y.LeafNode,this.cmp=e}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){var e=Y.firstLeaf(this._root);return e.size>0?e.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){var e=Y.lastLeaf(this._root);return e.size>0?e.items[e.size-1]:void 0},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return Y.iterItems(this._root)},t.prototype.retro=function(){return Y.retroItems(this._root)},t.prototype.slice=function(e,n){return Y.sliceItems(this._root,e,n)},t.prototype.retroSlice=function(e,n){return Y.retroSliceItems(this._root,e,n)},t.prototype.at=function(e){return Y.itemAt(this._root,e)},t.prototype.has=function(e,n){return Y.hasItem(this._root,e,n)},t.prototype.indexOf=function(e,n){return Y.indexOf(this._root,e,n)},t.prototype.get=function(e,n){return Y.getItem(this._root,e,n)},t.prototype.assign=function(e){this.clear(),this.update(e)},t.prototype.insert=function(e){var n=Y.insertItem(this._root,e,this.cmp);return this._root=Y.maybeSplitRoot(this._root),n},t.prototype.update=function(e){var n=this;N(e,function(a){n.insert(a)})},t.prototype.delete=function(e,n){var a=Y.deleteItem(this._root,e,n);return this._root=Y.maybeExtractRoot(this._root),a},t.prototype.remove=function(e){var n=Y.removeItem(this._root,e);return this._root=Y.maybeExtractRoot(this._root),n},t.prototype.clear=function(){Y.clear(this._root),this._root=new Y.LeafNode},t}();(function(t){function e(n,a){var l=new t(a);return l.assign(n),l}t.from=e})(Cn||(Cn={}));var Y;(function(t){var e=function(){function s(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),s}();t.BranchNode=e;var n=function(){function s(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),s}();t.LeafNode=n;function a(s){for(;s.type===0;)s=s.children[0];return s}t.firstLeaf=a;function l(s){for(;s.type===0;)s=s.children[s.children.length-1];return s}t.lastLeaf=l;function p(s){var _=a(s);return new C(_,0,-1)}t.iterItems=p;function f(s){var _=l(s);return new A(_,_.size-1,-1)}t.retroItems=f;function c(s,_,E){_===void 0?_=0:_<0?_=Math.max(0,_+s.size):_=Math.min(_,s.size),E===void 0?E=s.size:E<0?E=Math.max(0,E+s.size):E=Math.min(E,s.size);var z=Math.max(0,E-_);if(z===0)return pe();for(;s.type===0;){var O=u(s.sizes,_);O>0&&(_-=s.sizes[O-1]),s=s.children[O]}return new C(s,_,z)}t.sliceItems=c;function m(s,_,E){_===void 0?_=s.size-1:_<0?_=Math.max(-1,_+s.size):_=Math.min(_,s.size-1),E===void 0?E=-1:E<0?E=Math.max(-1,E+s.size):E=Math.min(E,s.size-1);var z=Math.max(0,_-E);if(z===0)return pe();for(;s.type===0;){var O=u(s.sizes,_);O>0&&(_-=s.sizes[O-1]),s=s.children[O]}return new A(s,_,z)}t.retroSliceItems=m;function b(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){for(;s.type===0;){var E=u(s.sizes,_);E>0&&(_-=s.sizes[E-1]),s=s.children[E]}return s.items[_]}}t.itemAt=b;function x(s,_,E){for(;s.type===0;){var z=d(s.items,_,E);s=s.children[z]}var O=r(s.items,_,E);return O>=0}t.hasItem=x;function M(s,_,E){for(var z=0;s.type===0;){var O=d(s.items,_,E);O>0&&(z+=s.sizes[O-1]),s=s.children[O]}var H=r(s.items,_,E);return H>=0?z+H:-z+H}t.indexOf=M;function I(s,_,E){for(;s.type===0;){var z=d(s.items,_,E);s=s.children[z]}var O=r(s.items,_,E);return O>=0?s.items[O]:void 0}t.getItem=I;function g(s,_,E){if(s.type===1){var z=r(s.items,_,E),O;return z>=0?(O=s.items[z],s.items[z]=_):(O=void 0,B.insert(s.items,-z-1,_)),O}var H=d(s.items,_,E),K=s.children[H],$=K.size,V=g(K,_,E),U=K.size;if(s.items[H]=K.items[0],$===U)return V;if(K.width>k){var j=o(K);B.insert(s.children,H+1,j),B.insert(s.items,H+1,j.items[0])}return i(s,H),V}t.insertItem=g;function v(s,_,E){if(s.type===1){var z=r(s.items,_,E);return z<0?void 0:B.removeAt(s.items,z)}var O=d(s.items,_,E),H=s.children[O],K=H.size,$=v(H,_,E),V=H.size;return K===V||(s.items[O]=H.items[0],H.width<S&&(O=h(s,O)),i(s,O)),$}t.deleteItem=v;function w(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){if(s.type===1)return B.removeAt(s.items,_);var E=u(s.sizes,_);E>0&&(_-=s.sizes[E]);var z=s.children[E],O=w(z,_);return s.items[E]=z.items[0],z.width<S&&(E=h(s,E)),i(s,E),O}}t.removeItem=w;function y(s){s.type===0?(N(s.children,y),s.children.length=0,s.sizes.length=0,s.items.length=0):(s.items.length=0,s.next=null,s.prev=null)}t.clear=y;function L(s){if(s.width<=k)return s;var _=new e,E=o(s);return _.sizes[0]=s.size,_.sizes[1]=s.size+E.size,_.children[0]=s,_.children[1]=E,_.items[0]=s.items[0],_.items[1]=E.items[0],_}t.maybeSplitRoot=L;function T(s){if(s.type===1||s.children.length>1)return s;var _=s.children.pop();return y(s),_}t.maybeExtractRoot=T;var k=32,S=k>>1,C=function(){function s(_,E,z){this._node=_,this._index=E,this._count=z}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},s}(),A=function(){function s(_,E,z){this._node=_,this._index=E,this._count=z}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},s}();function u(s,_){for(var E=s.length,z=0;z<E;++z)if(s[z]>_)return z;return E-1}function d(s,_,E){for(var z=s.length,O=1;O<z;++O)if(E(s[O],_)>0)return O-1;return z-1}function r(s,_,E){for(var z=s.length,O=0;O<z;++O){var H=E(s[O],_);if(H===0)return O;if(H>0)return-O-1}return-z-1}function i(s,_){for(var E=s.sizes,z=s.children,O=_>0?E[_-1]:0,H=z.length;_<H;++_)O=E[_]=O+z[_].size;E.length=z.length}function o(s){if(s.type===1){for(var _=new n,E=s.items,z=_.items,O=S,H=E.length;O<H;++O)z.push(E[O]);return E.length=S,s.next&&(s.next.prev=_),_.next=s.next,_.prev=s,s.next=_,_}for(var K=new e,$=s.children,V=K.children,O=S,H=$.length;O<H;++O)V.push($[O]);$.length=S;for(var U=s.items,j=K.items,O=S,H=U.length;O<H;++O)j.push(U[O]);return U.length=S,i(s,S),i(K,0),K}function h(s,_){var E,z,O,H,K,$,V=s.children[_],U=_===0?s.children[_+1]:s.children[_-1],j=_===0,Q=V.type===1,ee=U.width>S;if(Q&&ee&&j){var F=V,W=U;return F.items.push(W.items.shift()),s.items[_+1]=W.items[0],_}if(Q&&ee&&!j){var F=V,W=U;return F.items.unshift(W.items.pop()),s.items[_]=F.items[0],_-1}if(Q&&!ee&&j){var F=V,W=U;return(E=W.items).unshift.apply(E,F.items),B.removeAt(s.children,_),B.removeAt(s.items,_+1),F.prev&&(F.prev.next=W),W.prev=F.prev,y(F),_}if(Q&&!ee&&!j){var F=V,W=U;return(z=W.items).push.apply(z,F.items),B.removeAt(s.children,_),B.removeAt(s.items,_),F.next&&(F.next.prev=W),W.next=F.next,y(F),_-1}if(!Q&&ee&&j){var F=V,W=U;return F.children.push(W.children.shift()),F.items.push(W.items.shift()),s.items[_+1]=W.items[0],i(F,F.width-1),i(W,0),_}if(!Q&&ee&&!j){var F=V,W=U;return F.children.unshift(W.children.pop()),F.items.unshift(W.items.pop()),s.items[_]=F.items[0],i(F,0),i(W,W.width-1),_-1}if(!Q&&!ee&&j){var F=V,W=U;return(O=W.children).unshift.apply(O,F.children),(H=W.items).unshift.apply(H,F.items),B.removeAt(s.children,_),B.removeAt(s.items,_+1),i(W,0),F.children.length=0,y(F),_}if(!Q&&!ee&&!j){var F=V,W=U;return(K=W.children).push.apply(K,F.children),($=W.items).push.apply($,F.items),B.removeAt(s.children,_),B.removeAt(s.items,_),i(W,0),F.children.length=0,y(F),_-1}throw"unreachable"}})(Y||(Y={}));var gt=function(){function t(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return new t.ForwardValueIterator(this._first)},t.prototype.retro=function(){return new t.RetroValueIterator(this._last)},t.prototype.nodes=function(){return new t.ForwardNodeIterator(this._first)},t.prototype.retroNodes=function(){return new t.RetroNodeIterator(this._last)},t.prototype.assign=function(e){var n=this;this.clear(),N(e,function(a){n.addLast(a)})},t.prototype.push=function(e){this.addLast(e)},t.prototype.pop=function(){return this.removeLast()},t.prototype.shift=function(e){this.addFirst(e)},t.prototype.unshift=function(){return this.removeFirst()},t.prototype.addFirst=function(e){var n=new Se.LinkedListNode(this,e);return this._first?(n.next=this._first,this._first.prev=n,this._first=n):(this._first=n,this._last=n),this._size++,n},t.prototype.addLast=function(e){var n=new Se.LinkedListNode(this,e);return this._last?(n.prev=this._last,this._last.next=n,this._last=n):(this._first=n,this._last=n),this._size++,n},t.prototype.insertBefore=function(e,n){if(!n||n===this._first)return this.addFirst(e);if(!(n instanceof Se.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new Se.LinkedListNode(this,e),l=n,p=l.prev;return a.next=l,a.prev=p,l.prev=a,p.next=a,this._size++,a},t.prototype.insertAfter=function(e,n){if(!n||n===this._last)return this.addLast(e);if(!(n instanceof Se.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new Se.LinkedListNode(this,e),l=n,p=l.next;return a.next=p,a.prev=l,l.next=a,p.prev=a,this._size++,a},t.prototype.removeFirst=function(){var e=this._first;if(!!e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},t.prototype.removeLast=function(){var e=this._last;if(!!e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},t.prototype.removeNode=function(e){if(!(e instanceof Se.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");var n=e;n===this._first&&n===this._last?(this._first=null,this._last=null):n===this._first?(this._first=n.next,this._first.prev=null):n===this._last?(this._last=n.prev,this._last.next=null):(n.next.prev=n.prev,n.prev.next=n.next),n.list=null,n.next=null,n.prev=null,this._size--},t.prototype.clear=function(){for(var e=this._first;e;){var n=e.next;e.list=null,e.prev=null,e.next=null,e=n}this._first=null,this._last=null,this._size=0},t}();(function(t){function e(f){var c=new t;return c.assign(f),c}t.from=e;var n=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c.value}},f}();t.ForwardValueIterator=n;var a=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c.value}},f}();t.RetroValueIterator=a;var l=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c}},f}();t.ForwardNodeIterator=l;var p=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c}},f}();t.RetroNodeIterator=p})(gt||(gt={}));var Se;(function(t){var e=function(){function n(a,l){this.list=null,this.next=null,this.prev=null,this.list=a,this.value=l}return n}();t.LinkedListNode=e})(Se||(Se={}));var Nt=function(t,e){return Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},Nt(t,e)};function wi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Nt(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ve=function(){function t(e){this.type=e}return Object.defineProperty(t.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.conflate=function(e){return!1},t}(),Ne=function(t){wi(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.conflate=function(n){return!0},e}(ve),P;(function(t){function e(r,i){var o=x.get(r);if(!o||o.length===0){T(r,i);return}var h=Tn(En(o),function(s){return s?L(s,r,i):!0});h&&T(r,i)}t.sendMessage=e;function n(r,i){if(!i.isConflatable){k(r,i);return}var o=kn(b,function(h){return h.handler!==r||!h.msg||h.msg.type!==i.type||!h.msg.isConflatable?!1:h.msg.conflate(i)});o||k(r,i)}t.postMessage=n;function a(r,i){var o=x.get(r);o&&o.indexOf(i)!==-1||(o?o.push(i):x.set(r,[i]))}t.installMessageHook=a;function l(r,i){var o=x.get(r);if(!!o){var h=o.indexOf(i);h!==-1&&(o[h]=null,C(o))}}t.removeMessageHook=l;function p(r){var i=x.get(r);i&&i.length>0&&(B.fill(i,null),C(i)),N(b,function(o){o.handler===r&&(o.handler=null,o.msg=null)})}t.clearData=p;function f(){v||g===0||(y(g),v=!0,S(),v=!1)}t.flush=f;function c(){return I}t.getExceptionHandler=c;function m(r){var i=I;return I=r,i}t.setExceptionHandler=m;var b=new gt,x=new WeakMap,M=new Set,I=function(r){console.error(r)},g=0,v=!1,w=function(){var r=typeof requestAnimationFrame=="function";return r?requestAnimationFrame:setImmediate}(),y=function(){var r=typeof cancelAnimationFrame=="function";return r?cancelAnimationFrame:clearImmediate}();function L(r,i,o){var h=!0;try{typeof r=="function"?h=r(i,o):h=r.messageHook(i,o)}catch(s){I(s)}return h}function T(r,i){try{r.processMessage(i)}catch(o){I(o)}}function k(r,i){b.addLast({handler:r,msg:i}),g===0&&(g=w(S))}function S(){if(g=0,!b.isEmpty){var r={handler:null,msg:null};for(b.addLast(r);;){var i=b.removeFirst();if(i===r)return;i.handler&&i.msg&&e(i.handler,i.msg)}}}function C(r){M.size===0&&w(A),M.add(r)}function A(){M.forEach(u),M.clear()}function u(r){B.removeAllWhere(r,d)}function d(r){return r===null}})(P||(P={}));var Sn;(function(t){function e(n){var a=document.body,l=function(p){p.preventDefault(),p.stopPropagation(),p.clipboardData.setData("text",n),a.removeEventListener("copy",l,!0)};a.addEventListener("copy",l,!0),document.execCommand("copy")}t.copyText=e})(Sn||(Sn={}));var G;(function(t){function e(p){var f=window.getComputedStyle(p),c=parseFloat(f.borderTopWidth)||0,m=parseFloat(f.borderLeftWidth)||0,b=parseFloat(f.borderRightWidth)||0,x=parseFloat(f.borderBottomWidth)||0,M=parseFloat(f.paddingTop)||0,I=parseFloat(f.paddingLeft)||0,g=parseFloat(f.paddingRight)||0,v=parseFloat(f.paddingBottom)||0,w=m+I+g+b,y=c+M+v+x;return{borderTop:c,borderLeft:m,borderRight:b,borderBottom:x,paddingTop:M,paddingLeft:I,paddingRight:g,paddingBottom:v,horizontalSum:w,verticalSum:y}}t.boxSizing=e;function n(p){var f=window.getComputedStyle(p),c=parseFloat(f.minWidth)||0,m=parseFloat(f.minHeight)||0,b=parseFloat(f.maxWidth)||1/0,x=parseFloat(f.maxHeight)||1/0;return b=Math.max(c,b),x=Math.max(m,x),{minWidth:c,minHeight:m,maxWidth:b,maxHeight:x}}t.sizeLimits=n;function a(p,f,c){var m=p.getBoundingClientRect();return f>=m.left&&f<m.right&&c>=m.top&&c<m.bottom}t.hitTest=a;function l(p,f){var c=p.getBoundingClientRect(),m=f.getBoundingClientRect();if(!(m.top<=c.top&&m.bottom>=c.bottom)){if(m.top<c.top&&m.height<=c.height){p.scrollTop-=c.top-m.top;return}if(m.bottom>c.bottom&&m.height>=c.height){p.scrollTop-=c.top-m.top;return}if(m.top<c.top&&m.height>c.height){p.scrollTop-=c.bottom-m.bottom;return}if(m.bottom>c.bottom&&m.height<c.height){p.scrollTop-=c.bottom-m.bottom;return}}}t.scrollIntoViewIfNeeded=l})(G||(G={}));var ne;(function(t){t.IS_MAC=!!navigator.platform.match(/Mac/i),t.IS_WIN=!!navigator.platform.match(/Win/i),t.IS_IE=/Trident/.test(navigator.userAgent),t.IS_EDGE=/Edge/.test(navigator.userAgent);function e(n){return t.IS_MAC?n.metaKey:n.ctrlKey}t.accelKey=e})(ne||(ne={}));var $e;(function(t){function e(l){if(l in xe.specificityCache)return xe.specificityCache[l];var p=xe.calculateSingle(l);return xe.specificityCache[l]=p}t.calculateSpecificity=e;function n(l){if(l in xe.validityCache)return xe.validityCache[l];var p=!0;try{xe.testElem.querySelector(l)}catch{p=!1}return xe.validityCache[l]=p}t.isValid=n;function a(l,p){return xe.protoMatchFunc.call(l,p)}t.matches=a})($e||($e={}));var xe;(function(t){t.specificityCache=Object.create(null),t.validityCache=Object.create(null),t.testElem=document.createElement("div"),t.protoMatchFunc=function(){var x=Element.prototype;return x.matches||x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector||function(M){var I=this,g=I.ownerDocument?I.ownerDocument.querySelectorAll(M):[];return Array.prototype.indexOf.call(g,I)!==-1}}();function e(x){x=x.split(",",1)[0];var M=0,I=0,g=0;function v(w){var y=x.match(w);return y===null?!1:(x=x.slice(y[0].length),!0)}for(x=x.replace(b," $1 ");x.length>0;){if(v(n)){M++;continue}if(v(a)){I++;continue}if(v(l)){I++;continue}if(v(f)){g++;continue}if(v(c)){I++;continue}if(v(p)){g++;continue}if(!v(m))return 0}return M=Math.min(M,255),I=Math.min(I,255),g=Math.min(g,255),M<<16|I<<8|g}t.calculateSingle=e;var n=/^#[^\s\+>~#\.\[:]+/,a=/^\.[^\s\+>~#\.\[:]+/,l=/^\[[^\]]+\]/,p=/^[^\s\+>~#\.\[:]+/,f=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,c=/^:[^\s\+>~#\.\[:]+/,m=/^[\s\+>~\*]+/,b=/:not\(([^\)]+)\)/g})(xe||(xe={}));var se=function(){function t(e){this._pid=Ke.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return t.prototype.get=function(e){var n,a=Ke.ensureMap(e);return this._pid in a?n=a[this._pid]:n=a[this._pid]=this._createValue(e),n},t.prototype.set=function(e,n){var a,l=Ke.ensureMap(e);this._pid in l?a=l[this._pid]:a=l[this._pid]=this._createValue(e);var p=this._coerceValue(e,n);this._maybeNotify(e,a,l[this._pid]=p)},t.prototype.coerce=function(e){var n,a=Ke.ensureMap(e);this._pid in a?n=a[this._pid]:n=a[this._pid]=this._createValue(e);var l=this._coerceValue(e,n);this._maybeNotify(e,n,a[this._pid]=l)},t.prototype._createValue=function(e){var n=this._create;return n(e)},t.prototype._coerceValue=function(e,n){var a=this._coerce;return a?a(e,n):n},t.prototype._compareValue=function(e,n){var a=this._compare;return a?a(e,n):e===n},t.prototype._maybeNotify=function(e,n,a){var l=this._changed;l&&!this._compareValue(n,a)&&l(e,n,a)},t}();(function(t){function e(n){Ke.ownerData.delete(n)}t.clearData=e})(se||(se={}));var Ke;(function(t){t.ownerData=new WeakMap,t.nextPID=function(){var n=0;return function(){var a=Math.random(),l=(""+a).slice(2);return"pid-"+l+"-"+n++}}();function e(n){var a=t.ownerData.get(n);return a||(a=Object.create(null),t.ownerData.set(n,a),a)}t.ensureMap=e})(Ke||(Ke={}));var q=function(){function t(e){this._blockedCount=0,this.sender=e}return t.prototype.block=function(e){this._blockedCount++;try{e()}finally{this._blockedCount--}},t.prototype.connect=function(e,n){return le.connect(this,e,n)},t.prototype.disconnect=function(e,n){return le.disconnect(this,e,n)},t.prototype.emit=function(e){this._blockedCount||le.emit(this,e)},t}();(function(t){function e(b,x){var M=le.blockedProperty;M.set(b,M.get(b)+1);try{x()}finally{M.set(b,M.get(b)-1)}}t.blockAll=e;function n(b,x){le.disconnectBetween(b,x)}t.disconnectBetween=n;function a(b){le.disconnectSender(b)}t.disconnectSender=a;function l(b){le.disconnectReceiver(b)}t.disconnectReceiver=l;function p(b){le.disconnectAll(b)}t.disconnectAll=p;function f(b){le.disconnectAll(b)}t.clearData=f;function c(){return le.exceptionHandler}t.getExceptionHandler=c;function m(b){var x=le.exceptionHandler;return le.exceptionHandler=b,x}t.setExceptionHandler=m})(q||(q={}));var le;(function(t){t.exceptionHandler=function(T){console.error(T)};function e(T,k,S){S=S||void 0;var C=m.get(T.sender);if(C||(C=[],m.set(T.sender,C)),I(C,T,k,S))return!1;var A=S||k,u=b.get(A);u||(u=[],b.set(A,u));var d={signal:T,slot:k,thisArg:S};return C.push(d),u.push(d),!0}t.connect=e;function n(T,k,S){S=S||void 0;var C=m.get(T.sender);if(!C||C.length===0)return!1;var A=I(C,T,k,S);if(!A)return!1;var u=S||k,d=b.get(u);return A.signal=null,v(C),v(d),!0}t.disconnect=n;function a(T,k){var S=m.get(T);if(!(!S||S.length===0)){var C=b.get(k);!C||C.length===0||(N(C,function(A){!A.signal||A.signal.sender===T&&(A.signal=null)}),v(S),v(C))}}t.disconnectBetween=a;function l(T){var k=m.get(T);!k||k.length===0||(N(k,function(S){if(!!S.signal){var C=S.thisArg||S.slot;S.signal=null,v(b.get(C))}}),v(k))}t.disconnectSender=l;function p(T){var k=b.get(T);!k||k.length===0||(N(k,function(S){if(!!S.signal){var C=S.signal.sender;S.signal=null,v(m.get(C))}}),v(k))}t.disconnectReceiver=p;function f(T){l(T),p(T)}t.disconnectAll=f;function c(T,k){if(!(t.blockedProperty.get(T.sender)>0)){var S=m.get(T.sender);if(!(!S||S.length===0))for(var C=0,A=S.length;C<A;++C){var u=S[C];u.signal===T&&g(u,k)}}}t.emit=c;var m=new WeakMap,b=new WeakMap,x=new Set,M=function(){var T=typeof requestAnimationFrame=="function";return T?requestAnimationFrame:setImmediate}();function I(T,k,S,C){return at(T,function(A){return A.signal===k&&A.slot===S&&A.thisArg===C})}function g(T,k){var S=T.signal,C=T.slot,A=T.thisArg;try{C.call(A,S.sender,k)}catch(u){t.exceptionHandler(u)}}function v(T){x.size===0&&M(w),x.add(T)}function w(){x.forEach(y),x.clear()}function y(T){B.removeAllWhere(T,L)}function L(T){return T.signal===null}t.blockedProperty=new se({name:"blocked",create:function(){return 0}})})(le||(le={}));var Ve=class{constructor(e){this._label="";this._caption="";this._mnemonic=-1;this._iconClass="";this._iconLabel="";this._className="";this._closable=!1;this._changed=new q(this);this._isDisposed=!1;this.owner=e.owner,e.label!==void 0&&(this._label=e.label),e.mnemonic!==void 0&&(this._mnemonic=e.mnemonic),e.icon!==void 0?typeof e.icon=="string"?(this._icon=null,this._iconClass=e.icon):this._icon=e.icon:this._icon=null,e.iconClass!==void 0&&(this._iconClass=e.iconClass),e.iconLabel!==void 0&&(this._iconLabel=e.iconLabel),e.iconRenderer!==void 0&&(this._icon=e.iconRenderer),e.caption!==void 0&&(this._caption=e.caption),e.className!==void 0&&(this._className=e.className),e.closable!==void 0&&(this._closable=e.closable),this._dataset=e.dataset||{}}get changed(){return this._changed}get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))}get icon(){return this._icon===null?this.iconClass:this._icon}set icon(e){if(typeof e=="string")this._icon=null,this.iconClass=e;else{if(this._icon===e)return;this._icon=e,this._changed.emit(void 0)}}get iconClass(){return this._iconClass}set iconClass(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))}get iconRenderer(){return this._icon||void 0}set iconRenderer(e){this.icon=e}get caption(){return this._caption}set caption(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))}get className(){return this._className}set className(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))}get closable(){return this._closable}set closable(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,q.clearData(this))}};var R=class{constructor(e={}){this._flags=0;this._layout=null;this._parent=null;this._disposed=new q(this);this._hiddenMode=R.HiddenMode.Display;this.node=Kt.createNode(e),this.addClass("lm-Widget"),this.addClass("p-Widget")}dispose(){this.isDisposed||(this.setFlag(R.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&R.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),q.clearData(this),P.clearData(this),se.clearData(this))}get disposed(){return this._disposed}get isDisposed(){return this.testFlag(R.Flag.IsDisposed)}get isAttached(){return this.testFlag(R.Flag.IsAttached)}get isHidden(){return this.testFlag(R.Flag.IsHidden)}get isVisible(){return this.testFlag(R.Flag.IsVisible)}get title(){return Kt.titleProperty.get(this)}get id(){return this.node.id}set id(e){this.node.id=e}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this.isHidden&&this._toggleHidden(!1),e==R.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=e,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(e&&this.contains(e))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let n=new R.ChildMessage("child-removed",this);P.sendMessage(this._parent,n)}if(this._parent=e,this._parent&&!this._parent.isDisposed){let n=new R.ChildMessage("child-added",this);P.sendMessage(this._parent,n)}this.isDisposed||P.sendMessage(this,R.Msg.ParentChanged)}}get layout(){return this._layout}set layout(e){if(this._layout!==e){if(this.testFlag(R.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(e.parent)throw new Error("Cannot change layout parent.");this._layout=e,e.parent=this}}children(){return this._layout?this._layout.iter():pe()}contains(e){for(let n=e;n;n=n._parent)if(n===this)return!0;return!1}hasClass(e){return this.node.classList.contains(e)}addClass(e){this.node.classList.add(e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e,n){return n===!0?(this.node.classList.add(e),!0):n===!1?(this.node.classList.remove(e),!1):this.node.classList.toggle(e)}update(){P.postMessage(this,R.Msg.UpdateRequest)}fit(){P.postMessage(this,R.Msg.FitRequest)}activate(){P.postMessage(this,R.Msg.ActivateRequest)}close(){P.sendMessage(this,R.Msg.CloseRequest)}show(){if(!!this.testFlag(R.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,R.Msg.BeforeShow),this.clearFlag(R.Flag.IsHidden),this.node.removeAttribute("aria-hidden"),this._toggleHidden(!1),this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,R.Msg.AfterShow),this.parent)){let e=new R.ChildMessage("child-shown",this);P.sendMessage(this.parent,e)}}hide(){if(!this.testFlag(R.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,R.Msg.BeforeHide),this.setFlag(R.Flag.IsHidden),this.node.setAttribute("aria-hidden","true"),this._toggleHidden(!0),this.isAttached&&(!this.parent||this.parent.isVisible)&&P.sendMessage(this,R.Msg.AfterHide),this.parent)){let e=new R.ChildMessage("child-hidden",this);P.sendMessage(this.parent,e)}}setHidden(e){e?this.hide():this.show()}testFlag(e){return(this._flags&e)!==0}setFlag(e){this._flags|=e}clearFlag(e){this._flags&=~e}processMessage(e){switch(e.type){case"resize":this.notifyLayout(e),this.onResize(e);break;case"update-request":this.notifyLayout(e),this.onUpdateRequest(e);break;case"fit-request":this.notifyLayout(e),this.onFitRequest(e);break;case"before-show":this.notifyLayout(e),this.onBeforeShow(e);break;case"after-show":this.setFlag(R.Flag.IsVisible),this.notifyLayout(e),this.onAfterShow(e);break;case"before-hide":this.notifyLayout(e),this.onBeforeHide(e);break;case"after-hide":this.clearFlag(R.Flag.IsVisible),this.notifyLayout(e),this.onAfterHide(e);break;case"before-attach":this.notifyLayout(e),this.onBeforeAttach(e);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(R.Flag.IsVisible),this.setFlag(R.Flag.IsAttached),this.notifyLayout(e),this.onAfterAttach(e);break;case"before-detach":this.notifyLayout(e),this.onBeforeDetach(e);break;case"after-detach":this.clearFlag(R.Flag.IsVisible),this.clearFlag(R.Flag.IsAttached),this.notifyLayout(e),this.onAfterDetach(e);break;case"activate-request":this.notifyLayout(e),this.onActivateRequest(e);break;case"close-request":this.notifyLayout(e),this.onCloseRequest(e);break;case"child-added":this.notifyLayout(e),this.onChildAdded(e);break;case"child-removed":this.notifyLayout(e),this.onChildRemoved(e);break;default:this.notifyLayout(e);break}}notifyLayout(e){this._layout&&this._layout.processParentMessage(e)}onCloseRequest(e){this.parent?this.parent=null:this.isAttached&&R.detach(this)}onResize(e){}onUpdateRequest(e){}onFitRequest(e){}onActivateRequest(e){}onBeforeShow(e){}onAfterShow(e){}onBeforeHide(e){}onAfterHide(e){}onBeforeAttach(e){}onAfterAttach(e){}onBeforeDetach(e){}onAfterDetach(e){}onChildAdded(e){}onChildRemoved(e){}_toggleHidden(e){if(e)switch(this._hiddenMode){case R.HiddenMode.Display:this.addClass("lm-mod-hidden"),this.addClass("p-mod-hidden");break;case R.HiddenMode.Scale:this.node.style.transform="scale(0)";break;case R.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1";break}else switch(this._hiddenMode){case R.HiddenMode.Display:this.removeClass("lm-mod-hidden"),this.removeClass("p-mod-hidden");break;case R.HiddenMode.Scale:this.node.style.transform="";break;case R.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex="";break}}};(c=>{let t;(M=>(M[M.Display=0]="Display",M[M.Scale=1]="Scale",M[M.ContentVisibility=2]="ContentVisibility"))(t=c.HiddenMode||={});let e;(g=>(g[g.IsDisposed=1]="IsDisposed",g[g.IsAttached=2]="IsAttached",g[g.IsHidden=4]="IsHidden",g[g.IsVisible=8]="IsVisible",g[g.DisallowLayout=16]="DisallowLayout"))(e=c.Flag||={});let n;(C=>(C.BeforeShow=new ve("before-show"),C.AfterShow=new ve("after-show"),C.BeforeHide=new ve("before-hide"),C.AfterHide=new ve("after-hide"),C.BeforeAttach=new ve("before-attach"),C.AfterAttach=new ve("after-attach"),C.BeforeDetach=new ve("before-detach"),C.AfterDetach=new ve("after-detach"),C.ParentChanged=new ve("parent-changed"),C.UpdateRequest=new Ne("update-request"),C.FitRequest=new Ne("fit-request"),C.ActivateRequest=new Ne("activate-request"),C.CloseRequest=new Ne("close-request")))(n=c.Msg||={});class a extends ve{constructor(x,M){super(x);this.child=M}}c.ChildMessage=a;class l extends ve{constructor(x,M){super("resize");this.width=x,this.height=M}}c.ResizeMessage=l,(b=>b.UnknownSize=new b(-1,-1))(l=c.ResizeMessage||={});function p(m,b,x=null){if(m.parent)throw new Error("Cannot attach a child widget.");if(m.isAttached||m.node.isConnected)throw new Error("Widget is already attached.");if(!b.isConnected)throw new Error("Host is not attached.");P.sendMessage(m,c.Msg.BeforeAttach),b.insertBefore(m.node,x),P.sendMessage(m,c.Msg.AfterAttach)}c.attach=p;function f(m){if(m.parent)throw new Error("Cannot detach a child widget.");if(!m.isAttached||!m.node.isConnected)throw new Error("Widget is not attached.");P.sendMessage(m,c.Msg.BeforeDetach),m.node.parentNode.removeChild(m.node),P.sendMessage(m,c.Msg.AfterDetach)}c.detach=f})(R||={});var Kt;(n=>{n.titleProperty=new se({name:"title",create:a=>new Ve({owner:a})});function e(a){return a.node||document.createElement(a.tag||"div")}n.createNode=e})(Kt||={});var Le=class{constructor(e={}){this._disposed=!1;this._parent=null;this._fitPolicy=e.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,q.clearData(this),se.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(this._parent)throw new Error("Cannot change parent widget.");if(e.layout!==this)throw new Error("Invalid parent widget.");this._parent=e,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(e){if(this._fitPolicy!==e&&(this._fitPolicy=e,this._parent)){let n=this._parent.node.style;n.minWidth="",n.minHeight="",n.maxWidth="",n.maxHeight="",this._parent.fit()}}processParentMessage(e){switch(e.type){case"resize":this.onResize(e);break;case"update-request":this.onUpdateRequest(e);break;case"fit-request":this.onFitRequest(e);break;case"before-show":this.onBeforeShow(e);break;case"after-show":this.onAfterShow(e);break;case"before-hide":this.onBeforeHide(e);break;case"after-hide":this.onAfterHide(e);break;case"before-attach":this.onBeforeAttach(e);break;case"after-attach":this.onAfterAttach(e);break;case"before-detach":this.onBeforeDetach(e);break;case"after-detach":this.onAfterDetach(e);break;case"child-removed":this.onChildRemoved(e);break;case"child-shown":this.onChildShown(e);break;case"child-hidden":this.onChildHidden(e);break}}init(){N(this,e=>{e.parent=this.parent})}onResize(e){N(this,n=>{P.sendMessage(n,R.ResizeMessage.UnknownSize)})}onUpdateRequest(e){N(this,n=>{P.sendMessage(n,R.ResizeMessage.UnknownSize)})}onBeforeAttach(e){N(this,n=>{P.sendMessage(n,e)})}onAfterAttach(e){N(this,n=>{P.sendMessage(n,e)})}onBeforeDetach(e){N(this,n=>{P.sendMessage(n,e)})}onAfterDetach(e){N(this,n=>{P.sendMessage(n,e)})}onBeforeShow(e){N(this,n=>{n.isHidden||P.sendMessage(n,e)})}onAfterShow(e){N(this,n=>{n.isHidden||P.sendMessage(n,e)})}onBeforeHide(e){N(this,n=>{n.isHidden||P.sendMessage(n,e)})}onAfterHide(e){N(this,n=>{n.isHidden||P.sendMessage(n,e)})}onChildRemoved(e){this.removeWidget(e.child)}onFitRequest(e){}onChildShown(e){}onChildHidden(e){}};(l=>{function t(p){return st.horizontalAlignmentProperty.get(p)}l.getHorizontalAlignment=t;function e(p,f){st.horizontalAlignmentProperty.set(p,f)}l.setHorizontalAlignment=e;function n(p){return st.verticalAlignmentProperty.get(p)}l.getVerticalAlignment=n;function a(p,f){st.verticalAlignmentProperty.set(p,f)}l.setVerticalAlignment=a})(Le||={});var Ge=class{constructor(e){this._top=NaN;this._left=NaN;this._width=NaN;this._height=NaN;this._minWidth=0;this._minHeight=0;this._maxWidth=1/0;this._maxHeight=1/0;this._disposed=!1;this.widget=e,this.widget.node.style.position="absolute"}dispose(){if(this._disposed)return;this._disposed=!0;let e=this.widget.node.style;e.position="",e.top="",e.left="",e.width="",e.height=""}get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let e=G.sizeLimits(this.widget.node);this._minWidth=e.minWidth,this._minHeight=e.minHeight,this._maxWidth=e.maxWidth,this._maxHeight=e.maxHeight}update(e,n,a,l){let p=Math.max(this._minWidth,Math.min(a,this._maxWidth)),f=Math.max(this._minHeight,Math.min(l,this._maxHeight));if(p<a)switch(Le.getHorizontalAlignment(this.widget)){case"left":break;case"center":e+=(a-p)/2;break;case"right":e+=a-p;break;default:throw"unreachable"}if(f<l)switch(Le.getVerticalAlignment(this.widget)){case"top":break;case"center":n+=(l-f)/2;break;case"bottom":n+=l-f;break;default:throw"unreachable"}let c=!1,m=this.widget.node.style;if(this._top!==n&&(this._top=n,m.top=`${n}px`),this._left!==e&&(this._left=e,m.left=`${e}px`),this._width!==p&&(c=!0,this._width=p,m.width=`${p}px`),this._height!==f&&(c=!0,this._height=f,m.height=`${f}px`),c){let b=new R.ResizeMessage(p,f);P.sendMessage(this.widget,b)}}},st;(a=>{a.horizontalAlignmentProperty=new se({name:"horizontalAlignment",create:()=>"center",changed:n}),a.verticalAlignmentProperty=new se({name:"verticalAlignment",create:()=>"top",changed:n});function n(l){l.parent&&l.parent.layout&&l.parent.update()}})(st||={});var Ye=class extends Le{constructor(){super(...arguments);this._widgets=[]}dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}iter(){return ye(this._widgets)}addWidget(n){this.insertWidget(this._widgets.length,n)}insertWidget(n,a){a.parent=this.parent;let l=this._widgets.indexOf(a),p=Math.max(0,Math.min(n,this._widgets.length));if(l===-1){B.insert(this._widgets,p,a),this.parent&&this.attachWidget(p,a);return}p===this._widgets.length&&p--,l!==p&&(B.move(this._widgets,l,p),this.parent&&this.moveWidget(l,p,a))}removeWidget(n){this.removeWidgetAt(this._widgets.indexOf(n))}removeWidgetAt(n){let a=B.removeAt(this._widgets,n);a&&this.parent&&this.detachWidget(n,a)}init(){super.init(),N(this,(n,a)=>{this.attachWidget(a,n)})}attachWidget(n,a){let l=this.parent.node.children[n];this.parent.isAttached&&P.sendMessage(a,R.Msg.BeforeAttach),this.parent.node.insertBefore(a.node,l),this.parent.isAttached&&P.sendMessage(a,R.Msg.AfterAttach)}moveWidget(n,a,l){this.parent.isAttached&&P.sendMessage(l,R.Msg.BeforeDetach),this.parent.node.removeChild(l.node),this.parent.isAttached&&P.sendMessage(l,R.Msg.AfterDetach);let p=this.parent.node.children[a];this.parent.isAttached&&P.sendMessage(l,R.Msg.BeforeAttach),this.parent.node.insertBefore(l.node,p),this.parent.isAttached&&P.sendMessage(l,R.Msg.AfterAttach)}detachWidget(n,a){this.parent.isAttached&&P.sendMessage(a,R.Msg.BeforeDetach),this.parent.node.removeChild(a.node),this.parent.isAttached&&P.sendMessage(a,R.Msg.AfterDetach)}};var Xe=class extends R{constructor(e={}){super(),this.addClass("lm-Panel"),this.addClass("p-Panel"),this.layout=An.createLayout(e)}get widgets(){return this.layout.widgets}addWidget(e){this.layout.addWidget(e)}insertWidget(e,n){this.layout.insertWidget(e,n)}},An;(e=>{function t(n){return n.layout||new Ye}e.createLayout=t})(An||={});var Vt=function(t,e){return Vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},Vt(t,e)};function zn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vt(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ze=function(){function t(e){this._fn=e}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){if(!!this._fn){var e=this._fn;this._fn=null,e()}},t}(),os=function(t){zn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._disposed=new q(n),n}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),q.clearData(this))},e}(Ze),qt=function(){function t(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(e){e.dispose()}),this._items.clear())},t.prototype.contains=function(e){return this._items.has(e)},t.prototype.add=function(e){this._items.add(e)},t.prototype.remove=function(e){this._items.delete(e)},t.prototype.clear=function(){this._items.clear()},t}();(function(t){function e(n){var a=new t;return N(n,function(l){a.add(l)}),a}t.from=e})(qt||(qt={}));var Dn=function(t){zn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._disposed=new q(n),n}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),q.clearData(this))},e}(qt);(function(t){function e(n){var a=new t;return N(n,function(l){a.add(l)}),a}t.from=e})(Dn||(Dn={}));var Ae=function(){function t(e){var n=this;this._onScrollFrame=function(){if(!!n._scrollTarget){var a=n._scrollTarget,l=a.element,p=a.edge,f=a.distance,c=ie.SCROLL_EDGE_SIZE-f,m=Math.pow(c/ie.SCROLL_EDGE_SIZE,2),b=Math.max(1,Math.round(m*ie.SCROLL_EDGE_SIZE));switch(p){case"top":l.scrollTop-=b;break;case"left":l.scrollLeft-=b;break;case"right":l.scrollLeft+=b;break;case"bottom":l.scrollTop+=b;break}requestAnimationFrame(n._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=e.document||document,this.mimeData=e.mimeData,this.dragImage=e.dragImage||null,this.proposedAction=e.proposedAction||"copy",this.supportedActions=e.supportedActions||"all",this.source=e.source||null}return t.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var e=ie.createMouseEvent("pointerup",-1,-1);ie.dispatchDragLeave(this,this._currentTarget,null,e)}this._finalize("none")}},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.start=function(e,n){var a=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(e,n),this._promise=new Promise(function(p,f){a._resolve=p});var l=ie.createMouseEvent("pointermove",e,n);return document.dispatchEvent(l),this._promise},t.prototype.handleEvent=function(e){switch(e.type){case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"pointermove":this._evtMouseMove(e);break;case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;default:e.preventDefault(),e.stopPropagation();break}},t.prototype.moveDragImage=function(e,n){if(!!this.dragImage){var a=this.dragImage.style;a.top=n+"px",a.left=e+"px"}},t.prototype._evtMouseMove=function(e){e.preventDefault(),e.stopPropagation(),this._updateCurrentTarget(e),this._updateDragScroll(e),this.moveDragImage(e.clientX,e.clientY)},t.prototype._evtMouseUp=function(e){if(e.preventDefault(),e.stopPropagation(),e.button===0){if(this._updateCurrentTarget(e),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){ie.dispatchDragLeave(this,this._currentTarget,null,e),this._finalize("none");return}var n=ie.dispatchDrop(this,this._currentTarget,e);this._finalize(n)}},t.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this.dispose()},t.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},t.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},t.prototype._updateDragScroll=function(e){var n=ie.findScrollTarget(e);!this._scrollTarget&&!n||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=n)},t.prototype._updateCurrentTarget=function(e){var n=this._currentTarget,a=this._currentTarget,l=this._currentElement,p=this.document.elementFromPoint(e.clientX,e.clientY);this._currentElement=p,p!==l&&p!==a&&ie.dispatchDragExit(this,a,p,e),p!==l&&p!==a&&(a=ie.dispatchDragEnter(this,p,a,e)),a!==n&&(this._currentTarget=a,ie.dispatchDragLeave(this,n,a,e));var f=ie.dispatchDragOver(this,a,e);this._setDropAction(f)},t.prototype._attachDragImage=function(e,n){if(!!this.dragImage){this.dragImage.classList.add("lm-mod-drag-image"),this.dragImage.classList.add("p-mod-drag-image");var a=this.dragImage.style;a.pointerEvents="none",a.position="fixed",a.top=n+"px",a.left=e+"px";var l=this.document instanceof Document?this.document.body:this.document.firstElementChild;l.appendChild(this.dragImage)}},t.prototype._detachDragImage=function(){if(!!this.dragImage){var e=this.dragImage.parentNode;!e||e.removeChild(this.dragImage)}},t.prototype._setDropAction=function(e){if(e=ie.validateAction(e,this.supportedActions),!(this._override&&this._dropAction===e))switch(e){case"none":this._dropAction=e,this._override=t.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=e,this._override=t.overrideCursor("copy",this.document);break;case"link":this._dropAction=e,this._override=t.overrideCursor("alias",this.document);break;case"move":this._dropAction=e,this._override=t.overrideCursor("move",this.document);break}},t.prototype._finalize=function(e){var n=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,n&&n(e)},t}();(function(t){function e(a,l){l===void 0&&(l=document);var p=++n,f=l instanceof Document?l.body:l.firstElementChild;return f.style.cursor=a,f.classList.add("lm-mod-override-cursor"),f.classList.add("p-mod-override-cursor"),new Ze(function(){p===n&&(f.style.cursor="",f.classList.remove("lm-mod-override-cursor"),f.classList.remove("p-mod-override-cursor"))})}t.overrideCursor=e;var n=0})(Ae||(Ae={}));var ie;(function(t){t.SCROLL_EDGE_SIZE=20;function e(I,g){return b[I]&x[g]?I:"none"}t.validateAction=e;function n(I,g,v){var w=document.createEvent("MouseEvent");return w.initMouseEvent(I,!0,!0,window,0,0,0,g,v,!1,!1,!1,!1,0,null),w}t.createMouseEvent=n;function a(I){for(var g=I.clientX,v=I.clientY,w=document.elementFromPoint(g,v);w;w=w.parentElement){var y=w.hasAttribute("data-lm-dragscroll");if(y=y||w.hasAttribute("data-p-dragscroll"),!!y){var L=0,T=0;w===document.body&&(L=window.pageXOffset,T=window.pageYOffset);var k=w.getBoundingClientRect(),S=k.top+T,C=k.left+L,A=C+k.width,u=S+k.height;if(!(g<C||g>=A||v<S||v>=u)){var d=g-C+1,r=v-S+1,i=A-g,o=u-v,h=Math.min(d,r,i,o);if(!(h>t.SCROLL_EDGE_SIZE)){var s=void 0;switch(h){case o:s="bottom";break;case r:s="top";break;case i:s="right";break;case d:s="left";break;default:throw"unreachable"}var _=w.scrollWidth-w.clientWidth,E=w.scrollHeight-w.clientHeight,z=void 0;switch(s){case"top":z=E>0&&w.scrollTop>0;break;case"left":z=_>0&&w.scrollLeft>0;break;case"right":z=_>0&&w.scrollLeft<_;break;case"bottom":z=E>0&&w.scrollTop<E;break;default:throw"unreachable"}if(!!z)return{element:w,edge:s,distance:h}}}}}return null}t.findScrollTarget=a;function l(I,g,v,w){if(!g)return null;var y=M("lm-dragenter",I,w,v),L=!g.dispatchEvent(y);if(L||(y=M("p-dragenter",I,w,v),L=!g.dispatchEvent(y),L))return g;var T=I.document instanceof Document?I.document.body:I.document.firstElementChild;return g===T?v:(y=M("lm-dragenter",I,w,v),T.dispatchEvent(y),y=M("p-dragenter",I,w,v),T.dispatchEvent(y),T)}t.dispatchDragEnter=l;function p(I,g,v,w){if(!!g){var y=M("lm-dragexit",I,w,v);g.dispatchEvent(y),y=M("p-dragexit",I,w,v),g.dispatchEvent(y)}}t.dispatchDragExit=p;function f(I,g,v,w){if(!!g){var y=M("lm-dragleave",I,w,v);g.dispatchEvent(y),y=M("p-dragleave",I,w,v),g.dispatchEvent(y)}}t.dispatchDragLeave=f;function c(I,g,v){if(!g)return"none";var w=M("lm-dragover",I,v,null),y=!g.dispatchEvent(w);return y||(w=M("p-dragover",I,v,null),y=!g.dispatchEvent(w),y)?w.dropAction:"none"}t.dispatchDragOver=c;function m(I,g,v){if(!g)return"none";var w=M("lm-drop",I,v,null),y=!g.dispatchEvent(w);return y||(w=M("p-drop",I,v,null),y=!g.dispatchEvent(w),y)?w.dropAction:"none"}t.dispatchDrop=m;var b={none:0,copy:1,link:2,move:4},x={none:b.none,copy:b.copy,link:b.link,move:b.move,"copy-link":b.copy|b.link,"copy-move":b.copy|b.move,"link-move":b.link|b.move,all:b.copy|b.link|b.move};function M(I,g,v,w){var y=document.createEvent("MouseEvent");return y.initMouseEvent(I,!0,!0,window,0,v.screenX,v.screenY,v.clientX,v.clientY,v.ctrlKey,v.altKey,v.shiftKey,v.metaKey,v.button,w),y.dropAction="none",y.mimeData=g.mimeData,y.proposedAction=g.proposedAction,y.supportedActions=g.supportedActions,y.source=g.source,y}})(ie||(ie={}));var ze=class{constructor(){this.sizeHint=0;this.minSize=0;this.maxSize=1/0;this.stretch=1;this.size=0;this.done=!1}},Oe;(l=>{function t(p,f){let c=p.length;if(c===0)return f;let m=0,b=0,x=0,M=0,I=0;for(let w=0;w<c;++w){let y=p[w],L=y.minSize,T=y.maxSize,k=y.sizeHint;y.done=!1,y.size=Math.max(L,Math.min(k,T)),x+=y.size,m+=L,b+=T,y.stretch>0&&(M+=y.stretch,I++)}if(f===x)return 0;if(f<=m){for(let w=0;w<c;++w){let y=p[w];y.size=y.minSize}return f-m}if(f>=b){for(let w=0;w<c;++w){let y=p[w];y.size=y.maxSize}return f-b}let g=.01,v=c;if(f<x){let w=x-f;for(;I>0&&w>g;){let y=w,L=M;for(let T=0;T<c;++T){let k=p[T];if(k.done||k.stretch===0)continue;let S=k.stretch*y/L;k.size-S<=k.minSize?(w-=k.size-k.minSize,M-=k.stretch,k.size=k.minSize,k.done=!0,v--,I--):(w-=S,k.size-=S)}}for(;v>0&&w>g;){let y=w/v;for(let L=0;L<c;++L){let T=p[L];T.done||(T.size-y<=T.minSize?(w-=T.size-T.minSize,T.size=T.minSize,T.done=!0,v--):(w-=y,T.size-=y))}}}else{let w=f-x;for(;I>0&&w>g;){let y=w,L=M;for(let T=0;T<c;++T){let k=p[T];if(k.done||k.stretch===0)continue;let S=k.stretch*y/L;k.size+S>=k.maxSize?(w-=k.maxSize-k.size,M-=k.stretch,k.size=k.maxSize,k.done=!0,v--,I--):(w-=S,k.size+=S)}}for(;v>0&&w>g;){let y=w/v;for(let L=0;L<c;++L){let T=p[L];T.done||(T.size+y>=T.maxSize?(w-=T.maxSize-T.size,T.size=T.maxSize,T.done=!0,v--):(w-=y,T.size+=y))}}}return 0}l.calc=t;function e(p,f,c){p.length===0||c===0||(c>0?n(p,f,c):a(p,f,-c))}l.adjust=e;function n(p,f,c){let m=0;for(let I=0;I<=f;++I){let g=p[I];m+=g.maxSize-g.size}let b=0;for(let I=f+1,g=p.length;I<g;++I){let v=p[I];b+=v.size-v.minSize}c=Math.min(c,m,b);let x=c;for(let I=f;I>=0&&x>0;--I){let g=p[I],v=g.maxSize-g.size;v>=x?(g.sizeHint=g.size+x,x=0):(g.sizeHint=g.size+v,x-=v)}let M=c;for(let I=f+1,g=p.length;I<g&&M>0;++I){let v=p[I],w=v.size-v.minSize;w>=M?(v.sizeHint=v.size-M,M=0):(v.sizeHint=v.size-w,M-=w)}}function a(p,f,c){let m=0;for(let I=f+1,g=p.length;I<g;++I){let v=p[I];m+=v.maxSize-v.size}let b=0;for(let I=0;I<=f;++I){let g=p[I];b+=g.size-g.minSize}c=Math.min(c,m,b);let x=c;for(let I=f+1,g=p.length;I<g&&x>0;++I){let v=p[I],w=v.maxSize-v.size;w>=x?(v.sizeHint=v.size+x,x=0):(v.sizeHint=v.size+w,x-=w)}let M=c;for(let I=f;I>=0&&M>0;--I){let g=p[I],v=g.size-g.minSize;v>=M?(g.sizeHint=g.size-M,M=0):(g.sizeHint=g.size-v,M-=v)}}})(Oe||={});var ut;(e=>{function t(n){return Math.max(0,Math.floor(n))}e.clampDimension=t})(ut||={});var Ut=ut;var we=class extends Ye{constructor(n){super();this.widgetOffset=0;this._fixed=0;this._spacing=4;this._dirty=!1;this._hasNormedSizes=!1;this._sizers=[];this._items=[];this._handles=[];this._box=null;this._alignment="start";this._orientation="horizontal";this.renderer=n.renderer,n.orientation!==void 0&&(this._orientation=n.orientation),n.alignment!==void 0&&(this._alignment=n.alignment),n.spacing!==void 0&&(this._spacing=ut.clampDimension(n.spacing))}dispose(){N(this._items,n=>{n.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}get orientation(){return this._orientation}set orientation(n){this._orientation!==n&&(this._orientation=n,this.parent&&(this.parent.dataset.orientation=n,this.parent.fit()))}get alignment(){return this._alignment}set alignment(n){this._alignment!==n&&(this._alignment=n,this.parent&&(this.parent.dataset.alignment=n,this.parent.update()))}get spacing(){return this._spacing}set spacing(n){n=ut.clampDimension(n),this._spacing!==n&&(this._spacing=n,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map(n=>n.size)}relativeSizes(){return Re.normalize(this._sizers.map(n=>n.size))}setRelativeSizes(n,a=!0){let l=this._sizers.length,p=n.slice(0,l);for(;p.length<l;)p.push(0);let f=Re.normalize(p);for(let c=0;c<l;++c){let m=this._sizers[c];m.sizeHint=f[c],m.size=f[c]}this._hasNormedSizes=!0,a&&this.parent&&this.parent.update()}moveHandle(n,a){let l=this._handles[n];if(!l||l.classList.contains("lm-mod-hidden"))return;let p;if(this._orientation==="horizontal"?p=a-l.offsetLeft:p=a-l.offsetTop,p!==0){for(let f of this._sizers)f.size>0&&(f.sizeHint=f.size);Oe.adjust(this._sizers,n,p),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(n,a){let l=new Ge(a),p=Re.createHandle(this.renderer),f=Re.averageSize(this._sizers),c=Re.createSizer(f);B.insert(this._items,n,l),B.insert(this._sizers,n,c),B.insert(this._handles,n,p),this.parent.isAttached&&P.sendMessage(a,R.Msg.BeforeAttach),this.parent.node.appendChild(a.node),this.parent.node.appendChild(p),this.parent.isAttached&&P.sendMessage(a,R.Msg.AfterAttach),this.parent.fit()}moveWidget(n,a,l){B.move(this._items,n,a),B.move(this._sizers,n,a),B.move(this._handles,n,a),this.parent.fit()}detachWidget(n,a){let l=B.removeAt(this._items,n),p=B.removeAt(this._handles,n);B.removeAt(this._sizers,n),this.parent.isAttached&&P.sendMessage(a,R.Msg.BeforeDetach),this.parent.node.removeChild(a.node),this.parent.node.removeChild(p),this.parent.isAttached&&P.sendMessage(a,R.Msg.AfterDetach),l.dispose(),this.parent.fit()}onBeforeShow(n){super.onBeforeShow(n),this.parent.update()}onBeforeAttach(n){super.onBeforeAttach(n),this.parent.fit()}onChildShown(n){this.parent.fit()}onChildHidden(n){this.parent.fit()}onResize(n){this.parent.isVisible&&this._update(n.width,n.height)}onUpdateRequest(n){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(n){this.parent.isAttached&&this._fit()}updateItemPosition(n,a,l,p,f,c,m){let b=this._items[n];if(b.isHidden)return;let x=this._handles[n].style;a?(l+=this.widgetOffset,b.update(l,p,m,f),l+=m,x.top=`${p}px`,x.left=`${l}px`,x.width=`${this._spacing}px`,x.height=`${f}px`):(p+=this.widgetOffset,b.update(l,p,c,m),p+=m,x.top=`${p}px`,x.left=`${l}px`,x.width=`${c}px`,x.height=`${this._spacing}px`)}_fit(){let n=0,a=-1;for(let b=0,x=this._items.length;b<x;++b)this._items[b].isHidden?(this._handles[b].classList.add("lm-mod-hidden"),this._handles[b].classList.add("p-mod-hidden")):(this._handles[b].classList.remove("lm-mod-hidden"),this._handles[b].classList.remove("p-mod-hidden"),a=b,n++);a!==-1&&(this._handles[a].classList.add("lm-mod-hidden"),this._handles[a].classList.add("p-mod-hidden")),this._fixed=this._spacing*Math.max(0,n-1)+this.widgetOffset*this._items.length;let l=this._orientation==="horizontal",p=l?this._fixed:0,f=l?0:this._fixed;for(let b=0,x=this._items.length;b<x;++b){let M=this._items[b],I=this._sizers[b];if(I.size>0&&(I.sizeHint=I.size),M.isHidden){I.minSize=0,I.maxSize=0;continue}M.fit(),I.stretch=we.getStretch(M.widget),l?(I.minSize=M.minWidth,I.maxSize=M.maxWidth,p+=M.minWidth,f=Math.max(f,M.minHeight)):(I.minSize=M.minHeight,I.maxSize=M.maxHeight,f+=M.minHeight,p=Math.max(p,M.minWidth))}let c=this._box=G.boxSizing(this.parent.node);p+=c.horizontalSum,f+=c.verticalSum;let m=this.parent.node.style;m.minWidth=`${p}px`,m.minHeight=`${f}px`,this._dirty=!0,this.parent.parent&&P.sendMessage(this.parent.parent,R.Msg.FitRequest),this._dirty&&P.sendMessage(this.parent,R.Msg.UpdateRequest)}_update(n,a){this._dirty=!1;let l=0;for(let I=0,g=this._items.length;I<g;++I)l+=+!this._items[I].isHidden;if(l===0&&this.widgetOffset===0)return;n<0&&(n=this.parent.node.offsetWidth),a<0&&(a=this.parent.node.offsetHeight),this._box||(this._box=G.boxSizing(this.parent.node));let p=this._box.paddingTop,f=this._box.paddingLeft,c=n-this._box.horizontalSum,m=a-this._box.verticalSum,b=0,x=0,M=this._orientation==="horizontal";if(l>0){let I;if(M?I=Math.max(0,c-this._fixed):I=Math.max(0,m-this._fixed),this._hasNormedSizes){for(let v of this._sizers)v.sizeHint*=I;this._hasNormedSizes=!1}let g=Oe.calc(this._sizers,I);if(g>0)switch(this._alignment){case"start":break;case"center":b=0,x=g/2;break;case"end":b=0,x=g;break;case"justify":b=g/l,x=0;break;default:throw"unreachable"}}for(let I=0,g=this._items.length;I<g;++I){let w=this._items[I].isHidden?0:this._sizers[I].size+b;this.updateItemPosition(I,M,M?f+x:f,M?p:p+x,m,c,w);let y=this.widgetOffset+(this._handles[I].classList.contains("lm-mod-hidden")?0:this._spacing);M?f+=w+y:p+=w+y}}};(n=>{function t(a){return Re.stretchProperty.get(a)}n.getStretch=t;function e(a,l){Re.stretchProperty.set(a,l)}n.setStretch=e})(we||={});var Re;(f=>{f.stretchProperty=new se({name:"stretch",create:()=>0,coerce:(c,m)=>Math.max(0,Math.floor(m)),changed:p});function e(c){let m=new ze;return m.sizeHint=Math.floor(c),m}f.createSizer=e;function n(c){let m=c.createHandle();return m.style.position="absolute",m}f.createHandle=n;function a(c){return c.reduce((m,b)=>m+b.size,0)/c.length||0}f.averageSize=a;function l(c){let m=c.length;if(m===0)return[];let b=c.reduce((x,M)=>x+Math.abs(M),0);return b===0?c.map(x=>1/m):c.map(x=>x/b)}f.normalize=l;function p(c){c.parent&&c.parent.layout instanceof we&&c.parent.fit()}})(Re||={});var Be=class extends Xe{constructor(n={}){super({layout:On.createLayout(n)});this._handleMoved=new q(this);this._pressData=null;this.addClass("lm-SplitPanel"),this.addClass("p-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(n){this.layout.orientation=n}get alignment(){return this.layout.alignment}set alignment(n){this.layout.alignment=n}get spacing(){return this.layout.spacing}set spacing(n){this.layout.spacing=n}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(n,a=!0){this.layout.setRelativeSizes(n,a)}handleEvent(n){switch(n.type){case"mousedown":this._evtMouseDown(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseup":this._evtMouseUp(n);break;case"pointerdown":this._evtMouseDown(n);break;case"pointermove":this._evtMouseMove(n);break;case"pointerup":this._evtMouseUp(n);break;case"keydown":this._evtKeyDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(n){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(n){n.child.addClass("lm-SplitPanel-child"),n.child.addClass("p-SplitPanel-child"),this._releaseMouse()}onChildRemoved(n){n.child.removeClass("lm-SplitPanel-child"),n.child.removeClass("p-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(n){this._pressData&&(n.preventDefault(),n.stopPropagation()),n.keyCode===27&&this._releaseMouse()}_evtMouseDown(n){if(n.button!==0)return;let a=this.layout,l=B.findFirstIndex(a.handles,x=>x.contains(n.target));if(l===-1)return;n.preventDefault(),n.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let p,f=a.handles[l],c=f.getBoundingClientRect();a.orientation==="horizontal"?p=n.clientX-c.left:p=n.clientY-c.top;let m=window.getComputedStyle(f),b=Ae.overrideCursor(m.cursor);this._pressData={index:l,delta:p,override:b}}_evtMouseMove(n){n.preventDefault(),n.stopPropagation();let a,l=this.layout,p=this.node.getBoundingClientRect();l.orientation==="horizontal"?a=n.clientX-p.left-this._pressData.delta:a=n.clientY-p.top-this._pressData.delta,l.moveHandle(this._pressData.index,a)}_evtMouseUp(n){n.button===0&&(n.preventDefault(),n.stopPropagation(),this._releaseMouse())}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}};(l=>{class t{createHandle(){let f=document.createElement("div");return f.className="lm-SplitPanel-handle",f.classList.add("p-SplitPanel-handle"),f}}l.Renderer=t,l.defaultRenderer=new t;function n(p){return we.getStretch(p)}l.getStretch=n;function a(p,f){we.setStretch(p,f)}l.setStretch=a})(Be||={});var On;(e=>{function t(n){return n.layout||new we({renderer:n.renderer||Be.defaultRenderer,orientation:n.orientation,alignment:n.alignment,spacing:n.spacing})}e.createLayout=t})(On||={});var Bn=pt(_t());var jt=function(t,e){return jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},jt(t,e)};function Ii(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jt(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var yt=function(){function t(e){this.type="text",this.content=e}return t}(),xt=function(){function t(e,n,a,l){this.type="element",this.tag=e,this.attrs=n,this.children=a,this.renderer=l}return t}(),Ss=function(t){Ii(e,t);function e(n,a,l){return t.call(this,n,a,[],l||void 0)||this}return e}(xt);function te(t){for(var e={},n,a=[],l=1,p=arguments.length;l<p;++l){var f=arguments[l];typeof f=="string"?a.push(new yt(f)):f instanceof yt||f instanceof xt?a.push(f):f instanceof Array?c(a,f):(l===1||l===2)&&f&&typeof f=="object"&&("render"in f?n=f:e=f)}return new xt(t,e,a,n);function c(m,b){for(var x=0,M=b;x<M.length;x++){var I=M[x];typeof I=="string"?m.push(new yt(I)):(I instanceof yt||I instanceof xt)&&m.push(I)}}}(function(t){t.a=t.bind(void 0,"a"),t.abbr=t.bind(void 0,"abbr"),t.address=t.bind(void 0,"address"),t.area=t.bind(void 0,"area"),t.article=t.bind(void 0,"article"),t.aside=t.bind(void 0,"aside"),t.audio=t.bind(void 0,"audio"),t.b=t.bind(void 0,"b"),t.bdi=t.bind(void 0,"bdi"),t.bdo=t.bind(void 0,"bdo"),t.blockquote=t.bind(void 0,"blockquote"),t.br=t.bind(void 0,"br"),t.button=t.bind(void 0,"button"),t.canvas=t.bind(void 0,"canvas"),t.caption=t.bind(void 0,"caption"),t.cite=t.bind(void 0,"cite"),t.code=t.bind(void 0,"code"),t.col=t.bind(void 0,"col"),t.colgroup=t.bind(void 0,"colgroup"),t.data=t.bind(void 0,"data"),t.datalist=t.bind(void 0,"datalist"),t.dd=t.bind(void 0,"dd"),t.del=t.bind(void 0,"del"),t.dfn=t.bind(void 0,"dfn"),t.div=t.bind(void 0,"div"),t.dl=t.bind(void 0,"dl"),t.dt=t.bind(void 0,"dt"),t.em=t.bind(void 0,"em"),t.embed=t.bind(void 0,"embed"),t.fieldset=t.bind(void 0,"fieldset"),t.figcaption=t.bind(void 0,"figcaption"),t.figure=t.bind(void 0,"figure"),t.footer=t.bind(void 0,"footer"),t.form=t.bind(void 0,"form"),t.h1=t.bind(void 0,"h1"),t.h2=t.bind(void 0,"h2"),t.h3=t.bind(void 0,"h3"),t.h4=t.bind(void 0,"h4"),t.h5=t.bind(void 0,"h5"),t.h6=t.bind(void 0,"h6"),t.header=t.bind(void 0,"header"),t.hr=t.bind(void 0,"hr"),t.i=t.bind(void 0,"i"),t.iframe=t.bind(void 0,"iframe"),t.img=t.bind(void 0,"img"),t.input=t.bind(void 0,"input"),t.ins=t.bind(void 0,"ins"),t.kbd=t.bind(void 0,"kbd"),t.label=t.bind(void 0,"label"),t.legend=t.bind(void 0,"legend"),t.li=t.bind(void 0,"li"),t.main=t.bind(void 0,"main"),t.map=t.bind(void 0,"map"),t.mark=t.bind(void 0,"mark"),t.meter=t.bind(void 0,"meter"),t.nav=t.bind(void 0,"nav"),t.noscript=t.bind(void 0,"noscript"),t.object=t.bind(void 0,"object"),t.ol=t.bind(void 0,"ol"),t.optgroup=t.bind(void 0,"optgroup"),t.option=t.bind(void 0,"option"),t.output=t.bind(void 0,"output"),t.p=t.bind(void 0,"p"),t.param=t.bind(void 0,"param"),t.pre=t.bind(void 0,"pre"),t.progress=t.bind(void 0,"progress"),t.q=t.bind(void 0,"q"),t.rp=t.bind(void 0,"rp"),t.rt=t.bind(void 0,"rt"),t.ruby=t.bind(void 0,"ruby"),t.s=t.bind(void 0,"s"),t.samp=t.bind(void 0,"samp"),t.section=t.bind(void 0,"section"),t.select=t.bind(void 0,"select"),t.small=t.bind(void 0,"small"),t.source=t.bind(void 0,"source"),t.span=t.bind(void 0,"span"),t.strong=t.bind(void 0,"strong"),t.sub=t.bind(void 0,"sub"),t.summary=t.bind(void 0,"summary"),t.sup=t.bind(void 0,"sup"),t.table=t.bind(void 0,"table"),t.tbody=t.bind(void 0,"tbody"),t.td=t.bind(void 0,"td"),t.textarea=t.bind(void 0,"textarea"),t.tfoot=t.bind(void 0,"tfoot"),t.th=t.bind(void 0,"th"),t.thead=t.bind(void 0,"thead"),t.time=t.bind(void 0,"time"),t.title=t.bind(void 0,"title"),t.tr=t.bind(void 0,"tr"),t.track=t.bind(void 0,"track"),t.u=t.bind(void 0,"u"),t.ul=t.bind(void 0,"ul"),t.var_=t.bind(void 0,"var"),t.video=t.bind(void 0,"video"),t.wbr=t.bind(void 0,"wbr")})(te||(te={}));var Je;(function(t){function e(a){return qe.createDOMNode(a)}t.realize=e;function n(a,l){var p=qe.hostMap.get(l)||[],f=qe.asContentArray(a);qe.hostMap.set(l,f),qe.updateContent(l,p,f)}t.render=n})(Je||(Je={}));var qe;(function(t){t.hostMap=new WeakMap;function e(g){return g?g instanceof Array?g:[g]:[]}t.asContentArray=e;function n(g){var v=arguments[1]||null,w=arguments[2]||null;if(v)v.insertBefore(n(g),w);else{if(g.type==="text")return document.createTextNode(g.content);if(v=document.createElement(g.tag),f(v,g.attrs),g.renderer)return g.renderer.render(v,{attrs:g.attrs,children:g.children}),v;for(var y=0,L=g.children.length;y<L;++y)n(g.children[y],v)}return v}t.createDOMNode=n;function a(g,v,w){if(v!==w){for(var y=I(g,v),L=v.slice(),T=g.firstChild,k=w.length,S=0;S<k;++S){if(S>=L.length){n(w[S],g);continue}var C=L[S],A=w[S];if(C===A){T=T.nextSibling;continue}if(C.type==="text"&&A.type==="text"){T.textContent!==A.content&&(T.textContent=A.content),T=T.nextSibling;continue}if(C.type==="text"||A.type==="text"){B.insert(L,S,A),n(A,g,T);continue}if(!C.renderer!=!A.renderer){B.insert(L,S,A),n(A,g,T);continue}var u=A.attrs.key;if(u&&u in y){var d=y[u];d.vNode!==C&&(B.move(L,L.indexOf(d.vNode,S+1),S),g.insertBefore(d.element,T),C=d.vNode,T=d.element)}if(C===A){T=T.nextSibling;continue}var r=C.attrs.key;if(r&&r!==u){B.insert(L,S,A),n(A,g,T);continue}if(C.tag!==A.tag){B.insert(L,S,A),n(A,g,T);continue}c(T,C.attrs,A.attrs),A.renderer?A.renderer.render(T,{attrs:A.attrs,children:A.children}):a(T,C.children,A.children),T=T.nextSibling}l(g,L,k,!0)}}t.updateContent=a;function l(g,v,w,y){for(var L=v.length-1;L>=w;--L){var T=v[L],k=y?g.lastChild:g.childNodes[L];T.type==="text"||(T.renderer&&T.renderer.unrender?T.renderer.unrender(k,{attrs:T.attrs,children:T.children}):l(k,T.children,0,!1)),y&&g.removeChild(k)}}var p={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function f(g,v){for(var w in v)w in p||(w.substr(0,2)==="on"?g[w]=v[w]:g.setAttribute(w,v[w]));v.className!==void 0&&g.setAttribute("class",v.className),v.htmlFor!==void 0&&g.setAttribute("for",v.htmlFor),v.dataset&&m(g,v.dataset),v.style&&x(g,v.style)}function c(g,v,w){if(v!==w){var y;for(y in v)y in p||y in w||(y.substr(0,2)==="on"?g[y]=null:g.removeAttribute(y));for(y in w)y in p||v[y]===w[y]||(y.substr(0,2)==="on"?g[y]=w[y]:g.setAttribute(y,w[y]));v.className!==w.className&&(w.className!==void 0?g.setAttribute("class",w.className):g.removeAttribute("class")),v.htmlFor!==w.htmlFor&&(w.htmlFor!==void 0?g.setAttribute("for",w.htmlFor):g.removeAttribute("for")),v.dataset!==w.dataset&&b(g,v.dataset||{},w.dataset||{}),v.style!==w.style&&M(g,v.style||{},w.style||{})}}function m(g,v){for(var w in v)g.setAttribute("data-"+w,v[w])}function b(g,v,w){for(var y in v)y in w||g.removeAttribute("data-"+y);for(var L in w)v[L]!==w[L]&&g.setAttribute("data-"+L,w[L])}function x(g,v){var w=g.style,y;for(y in v)w[y]=v[y]}function M(g,v,w){var y=g.style,L;for(L in v)L in w||(y[L]="");for(L in w)v[L]!==w[L]&&(y[L]=w[L])}function I(g,v){for(var w=g.firstChild,y=Object.create(null),L=0,T=v;L<T.length;L++){var k=T[L];k.type==="element"&&k.attrs.key&&(y[k.attrs.key]={vNode:k,element:w}),w=w.nextSibling}return y}})(qe||(qe={}));var de=class extends R{constructor(n={}){super({node:Ie.createNode()});this._currentIndex=-1;this._titles=[];this._titlesEditable=!1;this._previousTitle=null;this._dragData=null;this._addButtonEnabled=!1;this._tabMoved=new q(this);this._currentChanged=new q(this);this._addRequested=new q(this);this._tabCloseRequested=new q(this);this._tabDetachRequested=new q(this);this._tabActivateRequested=new q(this);this.addClass("lm-TabBar"),this.addClass("p-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(R.Flag.DisallowLayout),this._document=n.document||document,this.tabsMovable=n.tabsMovable||!1,this.titlesEditable=n.titlesEditable||!1,this.allowDeselect=n.allowDeselect||!1,this.addButtonEnabled=n.addButtonEnabled||!1,this.insertBehavior=n.insertBehavior||"select-tab-if-needed",this.name=n.name||"",this.orientation=n.orientation||"horizontal",this.removeBehavior=n.removeBehavior||"select-tab-after",this.renderer=n.renderer||de.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}get document(){return this._document}get titlesEditable(){return this._titlesEditable}set titlesEditable(n){this._titlesEditable=n}get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(n){this.currentIndex=n?this._titles.indexOf(n):-1}get currentIndex(){return this._currentIndex}set currentIndex(n){if((n<0||n>=this._titles.length)&&(n=-1),this._currentIndex===n)return;let a=this._currentIndex,l=this._titles[a]||null,p=n,f=this._titles[p]||null;this._currentIndex=p,this._previousTitle=l,this.update(),this._currentChanged.emit({previousIndex:a,previousTitle:l,currentIndex:p,currentTitle:f})}get name(){return this._name}set name(n){this._name=n,n?this.contentNode.setAttribute("aria-label",n):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(n){this._orientation!==n&&(this._releaseMouse(),this._orientation=n,this.dataset.orientation=n,this.contentNode.setAttribute("aria-orientation",n))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(n){this._addButtonEnabled!==n&&(this._addButtonEnabled=n,n?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(n){return this.insertTab(this._titles.length,n)}insertTab(n,a){this._releaseMouse();let l=Ie.asTitle(a),p=this._titles.indexOf(l),f=Math.max(0,Math.min(n,this._titles.length));return p===-1?(B.insert(this._titles,f,l),l.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(f,l),l):(f===this._titles.length&&f--,p===f||(B.move(this._titles,p,f),this.update(),this._adjustCurrentForMove(p,f)),l)}removeTab(n){this.removeTabAt(this._titles.indexOf(n))}removeTabAt(n){this._releaseMouse();let a=B.removeAt(this._titles,n);!a||(a.changed.disconnect(this._onTitleChanged,this),a===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(n,a))}clearTabs(){if(this._titles.length===0)return;this._releaseMouse();for(let l of this._titles)l.changed.disconnect(this._onTitleChanged,this);let n=this.currentIndex,a=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),n!==-1&&this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(n){switch(n.type){case"mousedown":this._evtMouseDown(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseup":this._evtMouseUp(n);break;case"pointerdown":this._evtMouseDown(n);break;case"pointermove":this._evtMouseMove(n);break;case"pointerup":this._evtMouseUp(n);break;case"dblclick":this._evtDblClick(n);break;case"keydown":this._evtKeyDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this)}onAfterDetach(n){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this._releaseMouse()}onUpdateRequest(n){let a=this._titles,l=this.renderer,p=this.currentTitle,f=new Array(a.length);for(let c=0,m=a.length;c<m;++c){let b=a[c],x=b===p,M=x?m:m-c-1;f[c]=l.renderTab({title:b,current:x,zIndex:M})}Je.render(f,this.contentNode)}_evtDblClick(n){if(!this.titlesEditable)return;let a=this.contentNode.children,l=B.findFirstIndex(a,c=>G.hitTest(c,n.clientX,n.clientY));if(l===-1)return;let p=this.titles[l],f=a[l].querySelector(".lm-TabBar-tabLabel");if(f&&f.contains(n.target)){let c=p.label||"",m=f.innerHTML;f.innerHTML="";let b=document.createElement("input");b.classList.add("lm-TabBar-tabInput"),b.value=c,f.appendChild(b);let x=()=>{b.removeEventListener("blur",x),f.innerHTML=m};b.addEventListener("dblclick",M=>M.stopPropagation()),b.addEventListener("blur",x),b.addEventListener("keydown",M=>{M.key==="Enter"?(b.value!==""&&(p.label=p.caption=b.value),x()):M.key==="Escape"&&x()}),b.select(),b.focus(),f.children.length>0&&f.children[0].focus()}}_evtKeyDown(n){n.preventDefault(),n.stopPropagation(),n.keyCode===27&&this._releaseMouse()}_evtMouseDown(n){if(n.button!==0&&n.button!==1||this._dragData)return;let a=this.addButtonEnabled&&this.addButtonNode.contains(n.target),l=this.contentNode.children,p=B.findFirstIndex(l,c=>G.hitTest(c,n.clientX,n.clientY));if(p===-1&&!a||(n.preventDefault(),n.stopPropagation(),this._dragData={tab:l[p],index:p,pressX:n.clientX,pressY:n.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("mouseup",this,!0),this.document.addEventListener("pointerup",this,!0),n.button===1||a))return;let f=l[p].querySelector(this.renderer.closeIconSelector);f&&f.contains(n.target)||(this.tabsMovable&&(this.document.addEventListener("mousemove",this,!0),this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===p?this.currentIndex=-1:this.currentIndex=p,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtMouseMove(n){let a=this._dragData;if(!a)return;n.preventDefault(),n.stopPropagation();let l=this.contentNode.children;if(!(!a.dragActive&&!Ie.dragExceeded(a,n))){if(!a.dragActive){let p=a.tab.getBoundingClientRect();this._orientation==="horizontal"?(a.tabPos=a.tab.offsetLeft,a.tabSize=p.width,a.tabPressPos=a.pressX-p.left):(a.tabPos=a.tab.offsetTop,a.tabSize=p.height,a.tabPressPos=a.pressY-p.top),a.tabLayout=Ie.snapTabLayout(l,this._orientation),a.contentRect=this.contentNode.getBoundingClientRect(),a.override=Ae.overrideCursor("default"),a.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),a.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),a.dragActive=!0}if(!a.detachRequested&&Ie.detachExceeded(a,n)){a.detachRequested=!0;let p=a.index,f=n.clientX,c=n.clientY,m=l[p],b=this._titles[p];if(this._tabDetachRequested.emit({index:p,title:b,tab:m,clientX:f,clientY:c}),a.dragAborted)return}Ie.layoutTabs(l,a,n,this._orientation)}}_evtMouseUp(n){if(n.button!==0&&n.button!==1)return;let a=this._dragData;if(!a)return;if(n.preventDefault(),n.stopPropagation(),this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!a.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(n.target)){this._addRequested.emit(void 0);return}let f=this.contentNode.children,c=B.findFirstIndex(f,x=>G.hitTest(x,n.clientX,n.clientY));if(c!==a.index)return;let m=this._titles[c];if(!m.closable)return;if(n.button===1){this._tabCloseRequested.emit({index:c,title:m});return}let b=f[c].querySelector(this.renderer.closeIconSelector);if(b&&b.contains(n.target)){this._tabCloseRequested.emit({index:c,title:m});return}return}if(n.button!==0)return;Ie.finalizeTabPosition(a,this._orientation),a.tab.classList.remove("lm-mod-dragging"),a.tab.classList.remove("p-mod-dragging");let l=Ie.parseTransitionDuration(a.tab);setTimeout(()=>{if(a.dragAborted)return;this._dragData=null,Ie.resetTabPositions(this.contentNode.children,this._orientation),a.override.dispose(),this.removeClass("lm-mod-dragging"),this.removeClass("p-mod-dragging");let p=a.index,f=a.targetIndex;f===-1||p===f||(B.move(this._titles,p,f),this._adjustCurrentForMove(p,f),this._tabMoved.emit({fromIndex:p,toIndex:f,title:this._titles[f]}),P.sendMessage(this,R.Msg.UpdateRequest))},l)}_releaseMouse(){let n=this._dragData;!n||(this._dragData=null,this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),n.dragAborted=!0,n.dragActive&&(Ie.resetTabPositions(this.contentNode.children,this._orientation),n.override.dispose(),n.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging"),n.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))}_adjustCurrentForInsert(n,a){let l=this.currentTitle,p=this._currentIndex,f=this.insertBehavior;if(f==="select-tab"||f==="select-tab-if-needed"&&p===-1){this._currentIndex=n,this._previousTitle=l,this._currentChanged.emit({previousIndex:p,previousTitle:l,currentIndex:n,currentTitle:a});return}p>=n&&this._currentIndex++}_adjustCurrentForMove(n,a){this._currentIndex===n?this._currentIndex=a:this._currentIndex<n&&this._currentIndex>=a?this._currentIndex++:this._currentIndex>n&&this._currentIndex<=a&&this._currentIndex--}_adjustCurrentForRemove(n,a){let l=this._currentIndex,p=this.removeBehavior;if(l!==n){l>n&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:-1,currentTitle:null});return}if(p==="select-tab-after"){this._currentIndex=Math.min(n,this._titles.length-1),this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(p==="select-tab-before"){this._currentIndex=Math.max(0,n-1),this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(p==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(n,this._titles.length-1),this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:-1,currentTitle:null})}_onTitleChanged(n){this.update()}};(a=>{let l=class{constructor(){this.closeIconSelector=".lm-TabBar-tabCloseIcon";this._tabID=0;this._tabKeys=new WeakMap;this._uuid=++l._nInstance}renderTab(f){let c=f.title.caption,m=this.createTabKey(f),b=m,x=this.createTabStyle(f),M=this.createTabClass(f),I=this.createTabDataset(f),g=this.createTabARIA(f);return f.title.closable?te.li({id:b,key:m,className:M,title:c,style:x,dataset:I,...g},this.renderIcon(f),this.renderLabel(f),this.renderCloseIcon(f)):te.li({id:b,key:m,className:M,title:c,style:x,dataset:I,...g},this.renderIcon(f),this.renderLabel(f))}renderIcon(f){let{title:c}=f,m=this.createIconClass(f);return typeof c.icon=="string"?te.div({className:m},c.iconLabel):te.div({className:m},c.icon,c.iconLabel)}renderLabel(f){return te.div({className:"lm-TabBar-tabLabel p-TabBar-tabLabel"},f.title.label)}renderCloseIcon(f){return te.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}createTabKey(f){let c=this._tabKeys.get(f.title);return c===void 0&&(c=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(f.title,c)),c}createTabStyle(f){return{zIndex:`${f.zIndex}`}}createTabClass(f){let c="lm-TabBar-tab";return c+=" p-TabBar-tab",f.title.className&&(c+=` ${f.title.className}`),f.title.closable&&(c+=" lm-mod-closable",c+=" p-mod-closable"),f.current&&(c+=" lm-mod-current",c+=" p-mod-current"),c}createTabDataset(f){return f.title.dataset}createTabARIA(f){return{role:"tab","aria-selected":f.current.toString()}}createIconClass(f){let c="lm-TabBar-tabIcon";c+=" p-TabBar-tabIcon";let m=f.title.iconClass;return m?`${c} ${m}`:c}},t=l;t._nInstance=0,a.Renderer=t,a.defaultRenderer=new t,a.addButtonSelector=".lm-TabBar-addButton"})(de||={});var Ie;(M=>{M.DRAG_THRESHOLD=5,M.DETACH_THRESHOLD=20;function n(){let I=document.createElement("div"),g=document.createElement("ul");g.setAttribute("role","tablist"),g.className="lm-TabBar-content",g.classList.add("p-TabBar-content"),I.appendChild(g);let v=document.createElement("div");return v.className="lm-TabBar-addButton lm-mod-hidden",I.appendChild(v),I}M.createNode=n;function a(I){return I instanceof Ve?I:new Ve(I)}M.asTitle=a;function l(I){let g=window.getComputedStyle(I);return 1e3*(parseFloat(g.transitionDuration)||0)}M.parseTransitionDuration=l;function p(I,g){let v=new Array(I.length);for(let w=0,y=I.length;w<y;++w){let L=I[w],T=window.getComputedStyle(L);g==="horizontal"?v[w]={pos:L.offsetLeft,size:L.offsetWidth,margin:parseFloat(T.marginLeft)||0}:v[w]={pos:L.offsetTop,size:L.offsetHeight,margin:parseFloat(T.marginTop)||0}}return v}M.snapTabLayout=p;function f(I,g){let v=Math.abs(g.clientX-I.pressX),w=Math.abs(g.clientY-I.pressY);return v>=5||w>=5}M.dragExceeded=f;function c(I,g){let v=I.contentRect;return g.clientX<v.left-20||g.clientX>=v.right+20||g.clientY<v.top-20||g.clientY>=v.bottom+20}M.detachExceeded=c;function m(I,g,v,w){let y,L,T,k;w==="horizontal"?(y=g.pressX,L=v.clientX-g.contentRect.left,T=v.clientX,k=g.contentRect.width):(y=g.pressY,L=v.clientY-g.contentRect.top,T=v.clientY,k=g.contentRect.height);let S=g.index,C=L-g.tabPressPos,A=C+g.tabSize;for(let u=0,d=I.length;u<d;++u){let r,i=g.tabLayout[u],o=i.pos+(i.size>>1);if(u<g.index&&C<o)r=`${g.tabSize+g.tabLayout[u+1].margin}px`,S=Math.min(S,u);else if(u>g.index&&A>o)r=`${-g.tabSize-i.margin}px`,S=Math.max(S,u);else if(u===g.index){let h=T-y,s=k-(g.tabPos+g.tabSize);r=`${Math.max(-g.tabPos,Math.min(h,s))}px`}else r="";w==="horizontal"?I[u].style.left=r:I[u].style.top=r}g.targetIndex=S}M.layoutTabs=m;function b(I,g){let v;g==="horizontal"?v=I.contentRect.width:v=I.contentRect.height;let w;if(I.targetIndex===I.index)w=0;else if(I.targetIndex>I.index){let T=I.tabLayout[I.targetIndex];w=T.pos+T.size-I.tabSize-I.tabPos}else w=I.tabLayout[I.targetIndex].pos-I.tabPos;let y=v-(I.tabPos+I.tabSize),L=Math.max(-I.tabPos,Math.min(w,y));g==="horizontal"?I.tab.style.left=`${L}px`:I.tab.style.top=`${L}px`}M.finalizeTabPosition=b;function x(I,g){N(I,v=>{g==="horizontal"?v.style.left="":v.style.top=""})}M.resetTabPositions=x})(Ie||={});var wt=class extends Le{constructor(n){super();this._spacing=4;this._dirty=!1;this._root=null;this._box=null;this._items=new Map;this.renderer=n.renderer,n.spacing!==void 0&&(this._spacing=Ut.clampDimension(n.spacing)),this._document=n.document||document,this._hiddenMode=n.hiddenMode!==void 0?n.hiddenMode:R.HiddenMode.Display}dispose(){let n=this.iter();this._items.forEach(a=>{a.dispose()}),this._box=null,this._root=null,this._items.clear(),N(n,a=>{a.dispose()}),super.dispose()}get hiddenMode(){return this._hiddenMode}set hiddenMode(n){this._hiddenMode!==n&&(this._hiddenMode=n,N(this.tabBars(),a=>{a.titles.length>1&&a.titles.forEach(l=>{l.owner.hiddenMode=this._hiddenMode})}))}get spacing(){return this._spacing}set spacing(n){n=Ut.clampDimension(n),this._spacing!==n&&(this._spacing=n,this.parent&&this.parent.fit())}get isEmpty(){return this._root===null}iter(){return this._root?this._root.iterAllWidgets():pe()}widgets(){return this._root?this._root.iterUserWidgets():pe()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():pe()}tabBars(){return this._root?this._root.iterTabBars():pe()}handles(){return this._root?this._root.iterHandles():pe()}moveHandle(n,a,l){let p=n.classList.contains("lm-mod-hidden");if(p=p||n.classList.contains("p-mod-hidden"),!this._root||p)return;let f=this._root.findSplitNode(n);if(!f)return;let c;f.node.orientation==="horizontal"?c=a-n.offsetLeft:c=l-n.offsetTop,c!==0&&(f.node.holdSizes(),Oe.adjust(f.node.sizers,f.index,c),this.parent&&this.parent.update())}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(n){let a=new Set,l;n.main?l=J.normalizeAreaConfig(n.main,a):l=null;let p=this.widgets(),f=this.tabBars(),c=this.handles();this._root=null,N(p,m=>{a.has(m)||(m.parent=null)}),N(f,m=>{m.dispose()}),N(c,m=>{m.parentNode&&m.parentNode.removeChild(m)}),a.forEach(m=>{m.parent=this.parent}),l?this._root=J.realizeAreaConfig(l,{createTabBar:m=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):this._root=null,this.parent&&(a.forEach(m=>{this.attachWidget(m)}),this.parent.fit())}addWidget(n,a={}){let l=a.ref||null,p=a.mode||"tab-after",f=null;if(this._root&&l&&(f=this._root.findTabNode(l)),l&&!f)throw new Error("Reference widget is not in the layout.");switch(n.parent=this.parent,p){case"tab-after":this._insertTab(n,l,f,!0);break;case"tab-before":this._insertTab(n,l,f,!1);break;case"split-top":this._insertSplit(n,l,f,"vertical",!1);break;case"split-left":this._insertSplit(n,l,f,"horizontal",!1);break;case"split-right":this._insertSplit(n,l,f,"horizontal",!0);break;case"split-bottom":this._insertSplit(n,l,f,"vertical",!0);break}!this.parent||(this.attachWidget(n),this.parent.fit())}removeWidget(n){this._removeWidget(n),this.parent&&(this.detachWidget(n),this.parent.fit())}hitTestTabAreas(n,a){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=G.boxSizing(this.parent.node));let l=this.parent.node.getBoundingClientRect(),p=n-l.left-this._box.borderLeft,f=a-l.top-this._box.borderTop,c=this._root.hitTestTabNodes(p,f);if(!c)return null;let{tabBar:m,top:b,left:x,width:M,height:I}=c,g=this._box.borderLeft+this._box.borderRight,v=this._box.borderTop+this._box.borderBottom,w=l.width-g-(x+M),y=l.height-v-(b+I);return{tabBar:m,x:p,y:f,top:b,left:x,right:w,bottom:y,width:M,height:I}}init(){super.init(),N(this,n=>{this.attachWidget(n)}),N(this.handles(),n=>{this.parent.node.appendChild(n)}),this.parent.fit()}attachWidget(n){this.parent.node!==n.node.parentNode&&(this._items.set(n,new Ge(n)),this.parent.isAttached&&P.sendMessage(n,R.Msg.BeforeAttach),this.parent.node.appendChild(n.node),this.parent.isAttached&&P.sendMessage(n,R.Msg.AfterAttach))}detachWidget(n){if(this.parent.node!==n.node.parentNode)return;this.parent.isAttached&&P.sendMessage(n,R.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&P.sendMessage(n,R.Msg.AfterDetach);let a=this._items.get(n);a&&(this._items.delete(n),a.dispose())}onBeforeShow(n){super.onBeforeShow(n),this.parent.update()}onBeforeAttach(n){super.onBeforeAttach(n),this.parent.fit()}onChildShown(n){this.parent.fit()}onChildHidden(n){this.parent.fit()}onResize(n){this.parent.isVisible&&this._update(n.width,n.height)}onUpdateRequest(n){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(n){this.parent.isAttached&&this._fit()}_removeWidget(n){if(!this._root)return;let a=this._root.findTabNode(n);if(!a)return;if(J.removeAria(n),a.tabBar.titles.length>1){if(a.tabBar.removeTab(n.title),this._hiddenMode===R.HiddenMode.Scale&&a.tabBar.titles.length==1){let g=a.tabBar.titles[0].owner;g.hiddenMode=R.HiddenMode.Display}return}if(a.tabBar.dispose(),this._root===a){this._root=null;return}this._root.holdAllSizes();let l=a.parent;a.parent=null;let p=B.removeFirstOf(l.children,a),f=B.removeAt(l.handles,p);if(B.removeAt(l.sizers,p),f.parentNode&&f.parentNode.removeChild(f),l.children.length>1){l.syncHandles();return}let c=l.parent;l.parent=null;let m=l.children[0],b=l.handles[0];if(l.children.length=0,l.handles.length=0,l.sizers.length=0,b.parentNode&&b.parentNode.removeChild(b),this._root===l){m.parent=null,this._root=m;return}let x=c,M=x.children.indexOf(l);if(m instanceof J.TabLayoutNode){m.parent=x,x.children[M]=m;return}let I=B.removeAt(x.handles,M);B.removeAt(x.children,M),B.removeAt(x.sizers,M),I.parentNode&&I.parentNode.removeChild(I);for(let g=0,v=m.children.length;g<v;++g){let w=m.children[g],y=m.handles[g],L=m.sizers[g];B.insert(x.children,M+g,w),B.insert(x.handles,M+g,y),B.insert(x.sizers,M+g,L),w.parent=x}m.children.length=0,m.handles.length=0,m.sizers.length=0,m.parent=null,x.syncHandles()}_insertTab(n,a,l,p){if(n===a)return;if(!this._root){let c=new J.TabLayoutNode(this._createTabBar());c.tabBar.addTab(n.title),this._root=c,J.addAria(n,c.tabBar);return}l||(l=this._root.findFirstTabNode()),l.tabBar.titles.indexOf(n.title)===-1&&(this._removeWidget(n),n.hide());let f;if(a?f=l.tabBar.titles.indexOf(a.title):f=l.tabBar.currentIndex,this._hiddenMode===R.HiddenMode.Scale)if(l.tabBar.titles.length===0)n.hiddenMode=R.HiddenMode.Display;else if(l.tabBar.titles.length==1){let c=l.tabBar.titles[0].owner;c.hiddenMode=R.HiddenMode.Scale}else n.hiddenMode=R.HiddenMode.Scale;else n.hiddenMode=this._hiddenMode;l.tabBar.insertTab(f+(p?1:0),n.title),J.addAria(n,l.tabBar)}_insertSplit(n,a,l,p,f){if(n===a&&l&&l.tabBar.titles.length===1)return;this._removeWidget(n);let c=new J.TabLayoutNode(this._createTabBar());if(c.tabBar.addTab(n.title),J.addAria(n,c.tabBar),!this._root){this._root=c;return}if(!l||!l.parent){let I=this._splitRoot(p),g=f?I.children.length:0;I.normalizeSizes();let v=J.createSizer(l?1:J.GOLDEN_RATIO);B.insert(I.children,g,c),B.insert(I.sizers,g,v),B.insert(I.handles,g,this._createHandle()),c.parent=I,I.normalizeSizes(),I.syncHandles();return}let m=l.parent;if(m.orientation===p){let I=m.children.indexOf(l);m.normalizeSizes();let g=m.sizers[I].sizeHint/=2,v=I+(f?1:0);B.insert(m.children,v,c),B.insert(m.sizers,v,J.createSizer(g)),B.insert(m.handles,v,this._createHandle()),c.parent=m,m.syncHandles();return}let b=B.removeFirstOf(m.children,l),x=new J.SplitLayoutNode(p);x.normalized=!0,x.children.push(l),x.sizers.push(J.createSizer(.5)),x.handles.push(this._createHandle()),l.parent=x;let M=f?1:0;B.insert(x.children,M,c),B.insert(x.sizers,M,J.createSizer(.5)),B.insert(x.handles,M,this._createHandle()),c.parent=x,x.syncHandles(),B.insert(m.children,b,x),x.parent=m}_splitRoot(n){let a=this._root;if(a instanceof J.SplitLayoutNode&&a.orientation===n)return a;let l=this._root=new J.SplitLayoutNode(n);return a&&(l.children.push(a),l.sizers.push(J.createSizer(0)),l.handles.push(this._createHandle()),a.parent=l),l}_fit(){let n=0,a=0;if(this._root){let f=this._root.fit(this._spacing,this._items);n=f.minWidth,a=f.minHeight}let l=this._box=G.boxSizing(this.parent.node);n+=l.horizontalSum,a+=l.verticalSum;let p=this.parent.node.style;p.minWidth=`${n}px`,p.minHeight=`${a}px`,this._dirty=!0,this.parent.parent&&P.sendMessage(this.parent.parent,R.Msg.FitRequest),this._dirty&&P.sendMessage(this.parent,R.Msg.UpdateRequest)}_update(n,a){if(this._dirty=!1,!this._root)return;n<0&&(n=this.parent.node.offsetWidth),a<0&&(a=this.parent.node.offsetHeight),this._box||(this._box=G.boxSizing(this.parent.node));let l=this._box.paddingTop,p=this._box.paddingLeft,f=n-this._box.horizontalSum,c=a-this._box.verticalSum;this._root.update(l,p,f,c,this._spacing,this._items)}_createTabBar(){let n=this.renderer.createTabBar(this._document);return n.orientation="horizontal",this.parent&&(n.parent=this.parent,this.attachWidget(n)),n}_createHandle(){let n=this.renderer.createHandle(),a=n.style;return a.position="absolute",a.top="0",a.left="0",a.width="0",a.height="0",this.parent&&this.parent.node.appendChild(n),n}},J;(I=>{I.GOLDEN_RATIO=.618;function e(g){let v=new ze;return v.sizeHint=g,v.size=g,v}I.createSizer=e;function n(g,v){let w;return g.type==="tab-area"?w=m(g,v):w=b(g,v),w}I.normalizeAreaConfig=n;function a(g,v,w){let y;return g.type==="tab-area"?y=x(g,v,w):y=M(g,v,w),y}I.realizeAreaConfig=a;class l{constructor(v){this.parent=null;this._top=0;this._left=0;this._width=0;this._height=0;let w=new ze,y=new ze;w.stretch=0,y.stretch=1,this.tabBar=v,this.sizers=[w,y]}get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}iterAllWidgets(){return Wt(vt(this.tabBar),this.iterUserWidgets())}iterUserWidgets(){return He(this.tabBar.titles,v=>v.owner)}iterSelectedWidgets(){let v=this.tabBar.currentTitle;return v?vt(v.owner):pe()}iterTabBars(){return vt(this.tabBar)}iterHandles(){return pe()}findTabNode(v){return this.tabBar.titles.indexOf(v.title)!==-1?this:null}findSplitNode(v){return null}findFirstTabNode(){return this}hitTestTabNodes(v,w){return v<this._left||v>=this._left+this._width||w<this._top||w>=this._top+this._height?null:this}createConfig(){let v=this.tabBar.titles.map(y=>y.owner),w=this.tabBar.currentIndex;return{type:"tab-area",widgets:v,currentIndex:w}}holdAllSizes(){}fit(v,w){let y=0,L=0,T=1/0,k=1/0,S=w.get(this.tabBar),C=this.tabBar.currentTitle,A=C?w.get(C.owner):void 0,[u,d]=this.sizers;return S&&S.fit(),A&&A.fit(),S&&!S.isHidden?(y=Math.max(y,S.minWidth),L+=S.minHeight,u.minSize=S.minHeight,u.maxSize=S.maxHeight):(u.minSize=0,u.maxSize=0),A&&!A.isHidden?(y=Math.max(y,A.minWidth),L+=A.minHeight,d.minSize=A.minHeight,d.maxSize=1/0):(d.minSize=0,d.maxSize=1/0),{minWidth:y,minHeight:L,maxWidth:T,maxHeight:k}}update(v,w,y,L,T,k){this._top=w,this._left=v,this._width=y,this._height=L;let S=k.get(this.tabBar),C=this.tabBar.currentTitle,A=C?k.get(C.owner):void 0;if(Oe.calc(this.sizers,L),S&&!S.isHidden){let u=this.sizers[0].size;S.update(v,w,y,u),w+=u}if(A&&!A.isHidden){let u=this.sizers[1].size;A.update(v,w,y,u)}}}I.TabLayoutNode=l;class p{constructor(v){this.parent=null;this.normalized=!1;this.children=[];this.sizers=[];this.handles=[];this.orientation=v}iterAllWidgets(){let v=He(this.children,w=>w.iterAllWidgets());return new We(v)}iterUserWidgets(){let v=He(this.children,w=>w.iterUserWidgets());return new We(v)}iterSelectedWidgets(){let v=He(this.children,w=>w.iterSelectedWidgets());return new We(v)}iterTabBars(){let v=He(this.children,w=>w.iterTabBars());return new We(v)}iterHandles(){let v=He(this.children,w=>w.iterHandles());return Wt(this.handles,new We(v))}findTabNode(v){for(let w=0,y=this.children.length;w<y;++w){let L=this.children[w].findTabNode(v);if(L)return L}return null}findSplitNode(v){let w=this.handles.indexOf(v);if(w!==-1)return{index:w,node:this};for(let y=0,L=this.children.length;y<L;++y){let T=this.children[y].findSplitNode(v);if(T)return T}return null}findFirstTabNode(){return this.children.length===0?null:this.children[0].findFirstTabNode()}hitTestTabNodes(v,w){for(let y=0,L=this.children.length;y<L;++y){let T=this.children[y].hitTestTabNodes(v,w);if(T)return T}return null}createConfig(){let v=this.orientation,w=this.createNormalizedSizes(),y=this.children.map(L=>L.createConfig());return{type:"split-area",orientation:v,children:y,sizes:w}}syncHandles(){N(this.handles,(v,w)=>{v.setAttribute("data-orientation",this.orientation),w===this.handles.length-1?(v.classList.add("lm-mod-hidden"),v.classList.add("p-mod-hidden")):(v.classList.remove("lm-mod-hidden"),v.classList.remove("p-mod-hidden"))})}holdSizes(){N(this.sizers,v=>{v.sizeHint=v.size})}holdAllSizes(){N(this.children,v=>v.holdAllSizes()),this.holdSizes()}normalizeSizes(){let v=this.sizers.length;if(v===0)return;this.holdSizes();let w=Ht(this.sizers,(y,L)=>y+L.sizeHint,0);w===0?N(this.sizers,y=>{y.size=y.sizeHint=1/v}):N(this.sizers,y=>{y.size=y.sizeHint/=w}),this.normalized=!0}createNormalizedSizes(){let v=this.sizers.length;if(v===0)return[];let w=this.sizers.map(L=>L.size),y=Ht(w,(L,T)=>L+T,0);return y===0?N(w,(L,T)=>{w[T]=1/v}):N(w,(L,T)=>{w[T]=L/y}),w}fit(v,w){let y=this.orientation==="horizontal",L=Math.max(0,this.children.length-1)*v,T=y?L:0,k=y?0:L,S=1/0,C=1/0;for(let A=0,u=this.children.length;A<u;++A){let d=this.children[A].fit(v,w);y?(k=Math.max(k,d.minHeight),T+=d.minWidth,this.sizers[A].minSize=d.minWidth):(T=Math.max(T,d.minWidth),k+=d.minHeight,this.sizers[A].minSize=d.minHeight)}return{minWidth:T,minHeight:k,maxWidth:S,maxHeight:C}}update(v,w,y,L,T,k){let S=this.orientation==="horizontal",C=Math.max(0,this.children.length-1)*T,A=Math.max(0,(S?y:L)-C);this.normalized&&(N(this.sizers,u=>{u.sizeHint*=A}),this.normalized=!1),Oe.calc(this.sizers,A);for(let u=0,d=this.children.length;u<d;++u){let r=this.children[u],i=this.sizers[u].size,o=this.handles[u].style;S?(r.update(v,w,i,L,T,k),v+=i,o.top=`${w}px`,o.left=`${v}px`,o.width=`${T}px`,o.height=`${L}px`,v+=T):(r.update(v,w,y,i,T,k),w+=i,o.top=`${w}px`,o.left=`${v}px`,o.width=`${y}px`,o.height=`${T}px`,w+=T)}}}I.SplitLayoutNode=p;function f(g,v){g.node.setAttribute("role","tabpanel");let w=v.renderer;if(w instanceof de.Renderer){let y=w.createTabKey({title:g.title,current:!1,zIndex:0});g.node.setAttribute("aria-labelledby",y)}}I.addAria=f;function c(g){g.node.removeAttribute("role"),g.node.removeAttribute("aria-labelledby")}I.removeAria=c;function m(g,v){if(g.widgets.length===0)return null;let w=[];if(N(g.widgets,L=>{v.has(L)||(v.add(L),w.push(L))}),w.length===0)return null;let y=g.currentIndex;return y!==-1&&(y<0||y>=w.length)&&(y=0),{type:"tab-area",widgets:w,currentIndex:y}}function b(g,v){let w=g.orientation,y=[],L=[];for(let T=0,k=g.children.length;T<k;++T){let S=n(g.children[T],v);!S||(S.type==="tab-area"||S.orientation!==w?(y.push(S),L.push(Math.abs(g.sizes[T]||0))):(y.push(...S.children),L.push(...S.sizes)))}return y.length===0?null:y.length===1?y[0]:{type:"split-area",orientation:w,children:y,sizes:L}}function x(g,v,w){let y=v.createTabBar(w);return N(g.widgets,L=>{L.hide(),y.addTab(L.title),I.addAria(L,y)}),y.currentIndex=g.currentIndex,new l(y)}function M(g,v,w){let y=new p(g.orientation);return N(g.children,(L,T)=>{let k=a(L,v,w),S=e(g.sizes[T]),C=v.createHandle();y.children.push(k),y.handles.push(C),y.sizers.push(S),k.parent=y}),y.syncHandles(),y.normalizeSizes(),y}})(J||={});var Ee=class extends R{constructor(n={}){super();this._drag=null;this._tabsMovable=!0;this._tabsConstrained=!1;this._addButtonEnabled=!1;this._pressData=null;this._layoutModified=new q(this);this._addRequested=new q(this);this.addClass("lm-DockPanel"),this.addClass("p-DockPanel"),this._document=n.document||document,this._mode=n.mode||"multiple-document",this._renderer=n.renderer||Ee.defaultRenderer,this._edges=n.edges||X.DEFAULT_EDGES,n.tabsMovable!==void 0&&(this._tabsMovable=n.tabsMovable),n.tabsConstrained!==void 0&&(this._tabsConstrained=n.tabsConstrained),n.addButtonEnabled!==void 0&&(this._addButtonEnabled=n.addButtonEnabled),this.dataset.mode=this._mode;let a={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new wt({document:this._document,renderer:a,spacing:n.spacing,hiddenMode:n.hiddenMode}),this.overlay=n.overlay||new Ee.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(n){this.layout.hiddenMode=n}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(n){this.layout.spacing=n}get mode(){return this._mode}set mode(n){if(this._mode===n)return;this._mode=n,this.dataset.mode=n;let a=this.layout;switch(n){case"multiple-document":N(a.tabBars(),l=>{l.show()});break;case"single-document":a.restoreLayout(X.createSingleDocumentConfig(this));break;default:throw"unreachable"}P.postMessage(this,X.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(n){this._tabsMovable=n,N(this.tabBars(),a=>{a.tabsMovable=n})}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(n){this._tabsConstrained=n}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(n){this._addButtonEnabled=n,N(this.tabBars(),a=>{a.addButtonEnabled=n})}get isEmpty(){return this.layout.isEmpty}widgets(){return this.layout.widgets()}selectedWidgets(){return this.layout.selectedWidgets()}tabBars(){return this.layout.tabBars()}handles(){return this.layout.handles()}selectWidget(n){let a=at(this.tabBars(),l=>l.titles.indexOf(n.title)!==-1);if(!a)throw new Error("Widget is not contained in the dock panel.");a.currentTitle=n.title}activateWidget(n){this.selectWidget(n),n.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(n){this._mode="multiple-document",this.layout.restoreLayout(n),(ne.IS_EDGE||ne.IS_IE)&&P.flush(),P.postMessage(this,X.LayoutModified)}addWidget(n,a={}){this._mode==="single-document"?this.layout.addWidget(n):this.layout.addWidget(n,a),P.postMessage(this,X.LayoutModified)}processMessage(n){n.type==="layout-modified"?this._layoutModified.emit(void 0):super.processMessage(n)}handleEvent(n){switch(n.type){case"lm-dragenter":this._evtDragEnter(n);break;case"lm-dragleave":this._evtDragLeave(n);break;case"lm-dragover":this._evtDragOver(n);break;case"lm-drop":this._evtDrop(n);break;case"mousedown":this._evtMouseDown(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseup":this._evtMouseUp(n);break;case"pointerdown":this._evtMouseDown(n);break;case"pointermove":this._evtMouseMove(n);break;case"pointerup":this._evtMouseUp(n);break;case"keydown":this._evtKeyDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(n){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(n){X.isGeneratedTabBarProperty.get(n.child)||(n.child.addClass("lm-DockPanel-widget"),n.child.addClass("p-DockPanel-widget"))}onChildRemoved(n){X.isGeneratedTabBarProperty.get(n.child)||(n.child.removeClass("lm-DockPanel-widget"),n.child.removeClass("p-DockPanel-widget"),P.postMessage(this,X.LayoutModified))}_evtDragEnter(n){n.mimeData.hasData("application/vnd.lumino.widget-factory")&&(n.preventDefault(),n.stopPropagation())}_evtDragLeave(n){n.preventDefault(),!(this._tabsConstrained&&n.source!==this)&&(n.stopPropagation(),this.overlay.hide(1))}_evtDragOver(n){n.preventDefault(),this._tabsConstrained&&n.source!==this||this._showOverlay(n.clientX,n.clientY)==="invalid"?n.dropAction="none":(n.stopPropagation(),n.dropAction=n.proposedAction)}_evtDrop(n){if(n.preventDefault(),this.overlay.hide(0),n.proposedAction==="none"){n.dropAction="none";return}let{clientX:a,clientY:l}=n,{zone:p,target:f}=X.findDropTarget(this,a,l,this._edges);if(this._tabsConstrained&&n.source!==this||p==="invalid"){n.dropAction="none";return}let m=n.mimeData.getData("application/vnd.lumino.widget-factory");if(typeof m!="function"){n.dropAction="none";return}let b=m();if(!(b instanceof R)){n.dropAction="none";return}if(b.contains(this)){n.dropAction="none";return}let x=f?X.getDropRef(f.tabBar):null;switch(p){case"root-all":this.addWidget(b);break;case"root-top":this.addWidget(b,{mode:"split-top"});break;case"root-left":this.addWidget(b,{mode:"split-left"});break;case"root-right":this.addWidget(b,{mode:"split-right"});break;case"root-bottom":this.addWidget(b,{mode:"split-bottom"});break;case"widget-all":this.addWidget(b,{mode:"tab-after",ref:x});break;case"widget-top":this.addWidget(b,{mode:"split-top",ref:x});break;case"widget-left":this.addWidget(b,{mode:"split-left",ref:x});break;case"widget-right":this.addWidget(b,{mode:"split-right",ref:x});break;case"widget-bottom":this.addWidget(b,{mode:"split-bottom",ref:x});break;case"widget-tab":this.addWidget(b,{mode:"tab-after",ref:x});break;default:throw"unreachable"}n.dropAction=n.proposedAction,n.stopPropagation(),this.activateWidget(b)}_evtKeyDown(n){n.preventDefault(),n.stopPropagation(),n.keyCode===27&&(this._releaseMouse(),P.postMessage(this,X.LayoutModified))}_evtMouseDown(n){if(n.button!==0)return;let a=this.layout,l=n.target,p=at(a.handles(),M=>M.contains(l));if(!p)return;n.preventDefault(),n.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("mouseup",this,!0),this._document.addEventListener("mousemove",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let f=p.getBoundingClientRect(),c=n.clientX-f.left,m=n.clientY-f.top,b=window.getComputedStyle(p),x=Ae.overrideCursor(b.cursor,this._document);this._pressData={handle:p,deltaX:c,deltaY:m,override:x}}_evtMouseMove(n){if(!this._pressData)return;n.preventDefault(),n.stopPropagation();let a=this.node.getBoundingClientRect(),l=n.clientX-a.left-this._pressData.deltaX,p=n.clientY-a.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,l,p)}_evtMouseUp(n){n.button===0&&(n.preventDefault(),n.stopPropagation(),this._releaseMouse(),P.postMessage(this,X.LayoutModified))}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("mouseup",this,!0),this._document.removeEventListener("mousemove",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(n,a){let{zone:l,target:p}=X.findDropTarget(this,n,a,this._edges);if(l==="invalid")return this.overlay.hide(100),l;let f,c,m,b,x=G.boxSizing(this.node),M=this.node.getBoundingClientRect();switch(l){case"root-all":f=x.paddingTop,c=x.paddingLeft,m=x.paddingRight,b=x.paddingBottom;break;case"root-top":f=x.paddingTop,c=x.paddingLeft,m=x.paddingRight,b=M.height*X.GOLDEN_RATIO;break;case"root-left":f=x.paddingTop,c=x.paddingLeft,m=M.width*X.GOLDEN_RATIO,b=x.paddingBottom;break;case"root-right":f=x.paddingTop,c=M.width*X.GOLDEN_RATIO,m=x.paddingRight,b=x.paddingBottom;break;case"root-bottom":f=M.height*X.GOLDEN_RATIO,c=x.paddingLeft,m=x.paddingRight,b=x.paddingBottom;break;case"widget-all":f=p.top,c=p.left,m=p.right,b=p.bottom;break;case"widget-top":f=p.top,c=p.left,m=p.right,b=p.bottom+p.height/2;break;case"widget-left":f=p.top,c=p.left,m=p.right+p.width/2,b=p.bottom;break;case"widget-right":f=p.top,c=p.left+p.width/2,m=p.right,b=p.bottom;break;case"widget-bottom":f=p.top+p.height/2,c=p.left,m=p.right,b=p.bottom;break;case"widget-tab":let I=p.tabBar.node.getBoundingClientRect().height;f=p.top,c=p.left,m=p.right,b=p.bottom+p.height-I;break;default:throw"unreachable"}return this.overlay.show({top:f,left:c,right:m,bottom:b}),l}_createTabBar(){let n=this._renderer.createTabBar(this._document);return X.isGeneratedTabBarProperty.set(n,!0),this._mode==="single-document"&&n.hide(),n.tabsMovable=this._tabsMovable,n.allowDeselect=!1,n.addButtonEnabled=this._addButtonEnabled,n.removeBehavior="select-previous-tab",n.insertBehavior="select-tab-if-needed",n.tabMoved.connect(this._onTabMoved,this),n.currentChanged.connect(this._onCurrentChanged,this),n.tabCloseRequested.connect(this._onTabCloseRequested,this),n.tabDetachRequested.connect(this._onTabDetachRequested,this),n.tabActivateRequested.connect(this._onTabActivateRequested,this),n.addRequested.connect(this._onTabAddRequested,this),n}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){P.postMessage(this,X.LayoutModified)}_onCurrentChanged(n,a){let{previousTitle:l,currentTitle:p}=a;l&&l.owner.hide(),p&&p.owner.show(),(ne.IS_EDGE||ne.IS_IE)&&P.flush(),P.postMessage(this,X.LayoutModified)}_onTabAddRequested(n){this._addRequested.emit(n)}_onTabActivateRequested(n,a){a.title.owner.activate()}_onTabCloseRequested(n,a){a.title.owner.close()}_onTabDetachRequested(n,a){if(this._drag)return;n.releaseMouse();let{title:l,tab:p,clientX:f,clientY:c}=a,m=new Bn.MimeData,b=()=>l.owner;m.setData("application/vnd.lumino.widget-factory",b);let x=p.cloneNode(!0);this._drag=new Ae({document:this._document,mimeData:m,dragImage:x,proposedAction:"move",supportedActions:"move",source:this}),p.classList.add("lm-mod-hidden"),p.classList.add("p-mod-hidden");let M=()=>{this._drag=null,p.classList.remove("lm-mod-hidden"),p.classList.remove("p-mod-hidden")};this._drag.start(f,c).then(M)}};(a=>{class t{constructor(){this._timer=-1;this._hidden=!0;this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}show(p){let f=this.node.style;f.top=`${p.top}px`,f.left=`${p.left}px`,f.right=`${p.right}px`,f.bottom=`${p.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"),this.node.classList.remove("p-mod-hidden"))}hide(p){if(!this._hidden){if(p<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden");return}this._timer===-1&&(this._timer=window.setTimeout(()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden")},p))}}}a.Overlay=t;class e{createTabBar(p){let f=new de({document:p});return f.addClass("lm-DockPanel-tabBar"),f.addClass("p-DockPanel-tabBar"),f}createHandle(){let p=document.createElement("div");return p.className="lm-DockPanel-handle",p.classList.add("p-DockPanel-handle"),p}}a.Renderer=e,a.defaultRenderer=new e})(Ee||={});var X;(c=>{c.GOLDEN_RATIO=.618,c.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},c.LayoutModified=new Ne("layout-modified"),c.isGeneratedTabBarProperty=new se({name:"isGeneratedTabBar",create:()=>!1});function l(m){if(m.isEmpty)return{main:null};let b=Ln(m.widgets()),x=m.selectedWidgets().next(),M=x?b.indexOf(x):-1;return{main:{type:"tab-area",widgets:b,currentIndex:M}}}c.createSingleDocumentConfig=l;function p(m,b,x,M){if(!G.hitTest(m.node,b,x))return{zone:"invalid",target:null};let I=m.layout;if(I.isEmpty)return{zone:"root-all",target:null};if(m.mode==="multiple-document"){let u=m.node.getBoundingClientRect(),d=b-u.left+1,r=x-u.top+1,i=u.right-b,o=u.bottom-x;switch(Math.min(r,i,o,d)){case r:if(r<M.top)return{zone:"root-top",target:null};break;case i:if(i<M.right)return{zone:"root-right",target:null};break;case o:if(o<M.bottom)return{zone:"root-bottom",target:null};break;case d:if(d<M.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let g=I.hitTestTabAreas(b,x);if(!g)return{zone:"invalid",target:null};if(m.mode==="single-document")return{zone:"widget-all",target:g};let v=g.x-g.left+1,w=g.y-g.top+1,y=g.left+g.width-g.x,L=g.top+g.height-g.y,T=g.tabBar.node.getBoundingClientRect().height;if(w<T)return{zone:"widget-tab",target:g};let k=Math.round(g.width/3),S=Math.round(g.height/3);if(v>k&&y>k&&w>S&&L>S)return{zone:"widget-all",target:g};v/=k,w/=S,y/=k,L/=S;let C=Math.min(v,w,y,L),A;switch(C){case v:A="widget-left";break;case w:A="widget-top";break;case y:A="widget-right";break;case L:A="widget-bottom";break;default:throw"unreachable"}return{zone:A,target:g}}c.findDropTarget=p;function f(m){return m.titles.length===0?null:m.currentTitle?m.currentTitle.owner:m.titles[m.titles.length-1].owner}c.getDropRef=f})(X||={});var Mi;(e=>{function t(n){let a=document.body,l=p=>{p.preventDefault(),p.stopPropagation(),p.clipboardData.setData("text",n),a.removeEventListener("copy",l,!0)};a.addEventListener("copy",l,!0),document.execCommand("copy")}e.copyText=t})(Mi||={});var $t;(l=>{function t(p){let f=window.getComputedStyle(p),c=parseFloat(f.borderTopWidth)||0,m=parseFloat(f.borderLeftWidth)||0,b=parseFloat(f.borderRightWidth)||0,x=parseFloat(f.borderBottomWidth)||0,M=parseFloat(f.paddingTop)||0,I=parseFloat(f.paddingLeft)||0,g=parseFloat(f.paddingRight)||0,v=parseFloat(f.paddingBottom)||0,w=m+I+g+b,y=c+M+v+x;return{borderTop:c,borderLeft:m,borderRight:b,borderBottom:x,paddingTop:M,paddingLeft:I,paddingRight:g,paddingBottom:v,horizontalSum:w,verticalSum:y}}l.boxSizing=t;function e(p){let f=window.getComputedStyle(p),c=parseFloat(f.minWidth)||0,m=parseFloat(f.minHeight)||0,b=parseFloat(f.maxWidth)||1/0,x=parseFloat(f.maxHeight)||1/0;return b=Math.max(c,b),x=Math.max(m,x),{minWidth:c,minHeight:m,maxWidth:b,maxHeight:x}}l.sizeLimits=e;function n(p,f,c){let m=p.getBoundingClientRect();return f>=m.left&&f<m.right&&c>=m.top&&c<m.bottom}l.hitTest=n;function a(p,f){let c=p.getBoundingClientRect(),m=f.getBoundingClientRect();if(!(m.top<=c.top&&m.bottom>=c.bottom)){if(m.top<c.top&&m.height<=c.height){p.scrollTop-=c.top-m.top;return}if(m.bottom>c.bottom&&m.height>=c.height){p.scrollTop-=c.top-m.top;return}if(m.top<c.top&&m.height>c.height){p.scrollTop-=c.bottom-m.bottom;return}if(m.bottom>c.bottom&&m.height<c.height){p.scrollTop-=c.bottom-m.bottom;return}}}l.scrollIntoViewIfNeeded=a})($t||={});var Ti;(p=>{p.IS_MAC=!!navigator.platform.match(/Mac/i),p.IS_WIN=!!navigator.platform.match(/Win/i),p.IS_IE=/Trident/.test(navigator.userAgent),p.IS_EDGE=/Edge/.test(navigator.userAgent);function l(f){return p.IS_MAC?f.metaKey:f.ctrlKey}p.accelKey=l})(Ti||={});var ki;(a=>{function t(l){if(l in Ce.specificityCache)return Ce.specificityCache[l];let p=Ce.calculateSingle(l);return Ce.specificityCache[l]=p}a.calculateSpecificity=t;function e(l){if(l in Ce.validityCache)return Ce.validityCache[l];let p=!0;try{Ce.testElem.querySelector(l)}catch{p=!1}return Ce.validityCache[l]=p}a.isValid=e;function n(l,p){return Ce.protoMatchFunc.call(l,p)}a.matches=n})(ki||={});var Ce;(g=>{g.specificityCache=Object.create(null),g.validityCache=Object.create(null),g.testElem=document.createElement("div"),g.protoMatchFunc=(()=>{let v=Element.prototype;return v.matches||v.matchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||v.webkitMatchesSelector||function(w){let y=this,L=y.ownerDocument?y.ownerDocument.querySelectorAll(w):[];return Array.prototype.indexOf.call(L,y)!==-1}})();function l(v){v=v.split(",",1)[0];let w=0,y=0,L=0;function T(k){let S=v.match(k);return S===null?!1:(v=v.slice(S[0].length),!0)}for(v=v.replace(I," $1 ");v.length>0;){if(T(p)){w++;continue}if(T(f)){y++;continue}if(T(c)){y++;continue}if(T(b)){L++;continue}if(T(x)){y++;continue}if(T(m)){L++;continue}if(!T(M))return 0}return w=Math.min(w,255),y=Math.min(y,255),L=Math.min(L,255),w<<16|y<<8|L}g.calculateSingle=l;let p=/^#[^\s\+>~#\.\[:]+/,f=/^\.[^\s\+>~#\.\[:]+/,c=/^\[[^\]]+\]/,m=/^[^\s\+>~#\.\[:]+/,b=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,x=/^:[^\s\+>~#\.\[:]+/,M=/^[\s\+>~\*]+/,I=/:not\(([^\)]+)\)/g})(Ce||={});var ce;(function(t){function e(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}t.firstIndexOf=e;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}t.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}t.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}t.findLastIndex=l;function p(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}t.findFirstValue=p;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}t.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}t.lowerBound=c;function m(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}t.upperBound=m;function b(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}t.shallowEqual=b;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],E=0;E<s;++E)_[E]=u[r+E*o];return _}t.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],h=d<r?1:-1,s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}}t.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],h=u[r];u[d++]=h,u[r--]=o}}t.reverse=I;function g(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}t.rotate=g;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s)u[(r+s)%o]=d}}t.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}t.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}t.removeAt=y;function L(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=e(u,d,r,i);return o!==-1&&y(u,o),o}t.removeFirstOf=L;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}t.removeLastOf=T;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllOf=k;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,h=a(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeFirstWhere=S;function C(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,h=l(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeLastWhere=C;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllWhere=A})(ce||(ce={}));var Lu=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),Eu=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),Cu=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),Su=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),Au=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var Du=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();var zu=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var Ou=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var Ru=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(e(a,this._index++))return a},t}();var Bu=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var Fu=function(){function t(e,n,a){this._index=0,this._start=e,this._stop=n,this._step=a,this._length=Gt.rangeLength(e,n,a)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),Gt;(function(t){function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(Gt||(Gt={}));var Pu=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var Wu=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var Hu=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),Fn;(function(t){function e(f,c,m){m===void 0&&(m=0);for(var b=new Array(c.length),x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}t.findIndices=e;function n(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=0,I=b.length;M<I;++M){var g=b[M]-m;x+=g*g}return{score:x,indices:b}}t.matchSumOfSquares=n;function a(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=m-1,I=0,g=b.length;I<g;++I){var v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}t.matchSumOfDeltas=a;function l(f,c,m){for(var b=[],x=0,M=0,I=c.length;x<I;){for(var g=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}t.highlight=l;function p(f,c){return f<c?-1:f>c?1:0}t.cmp=p})(Fn||(Fn={}));var Nu=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var Ku=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;e[n]=l}return e},t}();var et=class{constructor(e){this.type="text";this.content=e}},lt=class{constructor(e,n,a,l){this.type="element";this.tag=e,this.attrs=n,this.children=a,this.renderer=l}};function re(t){let e={},n,a=[];for(let p=1,f=arguments.length;p<f;++p){let c=arguments[p];typeof c=="string"?a.push(new et(c)):c instanceof et||c instanceof lt?a.push(c):c instanceof Array?l(a,c):(p===1||p===2)&&c&&typeof c=="object"&&("render"in c?n=c:e=c)}return new lt(t,e,a,n);function l(p,f){for(let c of f)typeof c=="string"?p.push(new et(c)):(c instanceof et||c instanceof lt)&&p.push(c)}}(D=>(D.a=D.bind(void 0,"a"),D.abbr=D.bind(void 0,"abbr"),D.address=D.bind(void 0,"address"),D.area=D.bind(void 0,"area"),D.article=D.bind(void 0,"article"),D.aside=D.bind(void 0,"aside"),D.audio=D.bind(void 0,"audio"),D.b=D.bind(void 0,"b"),D.bdi=D.bind(void 0,"bdi"),D.bdo=D.bind(void 0,"bdo"),D.blockquote=D.bind(void 0,"blockquote"),D.br=D.bind(void 0,"br"),D.button=D.bind(void 0,"button"),D.canvas=D.bind(void 0,"canvas"),D.caption=D.bind(void 0,"caption"),D.cite=D.bind(void 0,"cite"),D.code=D.bind(void 0,"code"),D.col=D.bind(void 0,"col"),D.colgroup=D.bind(void 0,"colgroup"),D.data=D.bind(void 0,"data"),D.datalist=D.bind(void 0,"datalist"),D.dd=D.bind(void 0,"dd"),D.del=D.bind(void 0,"del"),D.dfn=D.bind(void 0,"dfn"),D.div=D.bind(void 0,"div"),D.dl=D.bind(void 0,"dl"),D.dt=D.bind(void 0,"dt"),D.em=D.bind(void 0,"em"),D.embed=D.bind(void 0,"embed"),D.fieldset=D.bind(void 0,"fieldset"),D.figcaption=D.bind(void 0,"figcaption"),D.figure=D.bind(void 0,"figure"),D.footer=D.bind(void 0,"footer"),D.form=D.bind(void 0,"form"),D.h1=D.bind(void 0,"h1"),D.h2=D.bind(void 0,"h2"),D.h3=D.bind(void 0,"h3"),D.h4=D.bind(void 0,"h4"),D.h5=D.bind(void 0,"h5"),D.h6=D.bind(void 0,"h6"),D.header=D.bind(void 0,"header"),D.hr=D.bind(void 0,"hr"),D.i=D.bind(void 0,"i"),D.iframe=D.bind(void 0,"iframe"),D.img=D.bind(void 0,"img"),D.input=D.bind(void 0,"input"),D.ins=D.bind(void 0,"ins"),D.kbd=D.bind(void 0,"kbd"),D.label=D.bind(void 0,"label"),D.legend=D.bind(void 0,"legend"),D.li=D.bind(void 0,"li"),D.main=D.bind(void 0,"main"),D.map=D.bind(void 0,"map"),D.mark=D.bind(void 0,"mark"),D.meter=D.bind(void 0,"meter"),D.nav=D.bind(void 0,"nav"),D.noscript=D.bind(void 0,"noscript"),D.object=D.bind(void 0,"object"),D.ol=D.bind(void 0,"ol"),D.optgroup=D.bind(void 0,"optgroup"),D.option=D.bind(void 0,"option"),D.output=D.bind(void 0,"output"),D.p=D.bind(void 0,"p"),D.param=D.bind(void 0,"param"),D.pre=D.bind(void 0,"pre"),D.progress=D.bind(void 0,"progress"),D.q=D.bind(void 0,"q"),D.rp=D.bind(void 0,"rp"),D.rt=D.bind(void 0,"rt"),D.ruby=D.bind(void 0,"ruby"),D.s=D.bind(void 0,"s"),D.samp=D.bind(void 0,"samp"),D.section=D.bind(void 0,"section"),D.select=D.bind(void 0,"select"),D.small=D.bind(void 0,"small"),D.source=D.bind(void 0,"source"),D.span=D.bind(void 0,"span"),D.strong=D.bind(void 0,"strong"),D.sub=D.bind(void 0,"sub"),D.summary=D.bind(void 0,"summary"),D.sup=D.bind(void 0,"sup"),D.table=D.bind(void 0,"table"),D.tbody=D.bind(void 0,"tbody"),D.td=D.bind(void 0,"td"),D.textarea=D.bind(void 0,"textarea"),D.tfoot=D.bind(void 0,"tfoot"),D.th=D.bind(void 0,"th"),D.thead=D.bind(void 0,"thead"),D.time=D.bind(void 0,"time"),D.title=D.bind(void 0,"title"),D.tr=D.bind(void 0,"tr"),D.track=D.bind(void 0,"track"),D.u=D.bind(void 0,"u"),D.ul=D.bind(void 0,"ul"),D.var_=D.bind(void 0,"var"),D.video=D.bind(void 0,"video"),D.wbr=D.bind(void 0,"wbr")))(re||={});var Li;(n=>{function t(a){return Qe.createDOMNode(a)}n.realize=t;function e(a,l){let p=Qe.hostMap.get(l)||[],f=Qe.asContentArray(a);Qe.hostMap.set(l,f),Qe.updateContent(l,p,f)}n.render=e})(Li||={});var Qe;(g=>{g.hostMap=new WeakMap;function e(v){return v?v instanceof Array?v:[v]:[]}g.asContentArray=e;function n(v){let w=arguments[1]||null,y=arguments[2]||null;if(w)w.insertBefore(n(v),y);else{if(v.type==="text")return document.createTextNode(v.content);if(w=document.createElement(v.tag),f(w,v.attrs),v.renderer)return v.renderer.render(w,{attrs:v.attrs,children:v.children}),w;for(let L=0,T=v.children.length;L<T;++L)n(v.children[L],w)}return w}g.createDOMNode=n;function a(v,w,y){if(w===y)return;let L=I(v,w),T=w.slice(),k=v.firstChild,S=y.length;for(let C=0;C<S;++C){if(C>=T.length){n(y[C],v);continue}let A=T[C],u=y[C];if(A===u){k=k.nextSibling;continue}if(A.type==="text"&&u.type==="text"){k.textContent=u.content,k=k.nextSibling;continue}if(A.type==="text"||u.type==="text"){ce.insert(T,C,u),n(u,v,k);continue}if(!A.renderer!=!u.renderer){ce.insert(T,C,u),n(u,v,k);continue}let d=u.attrs.key;if(d&&d in L){let i=L[d];i.vNode!==A&&(ce.move(T,T.indexOf(i.vNode,C+1),C),v.insertBefore(i.element,k),A=i.vNode,k=i.element)}if(A===u){k=k.nextSibling;continue}let r=A.attrs.key;if(r&&r!==d){ce.insert(T,C,u),n(u,v,k);continue}if(A.tag!==u.tag){ce.insert(T,C,u),n(u,v,k);continue}c(k,A.attrs,u.attrs),u.renderer?u.renderer.render(k,{attrs:u.attrs,children:u.children}):a(k,A.children,u.children),k=k.nextSibling}l(v,T,S,!0)}g.updateContent=a;function l(v,w,y,L){for(let T=w.length-1;T>=y;--T){let k=w[T],S=L?v.lastChild:v.childNodes[T];k.type==="text"||(k.renderer&&k.renderer.unrender?k.renderer.unrender(S,{attrs:k.attrs,children:k.children}):l(S,k.children,0,!1)),L&&v.removeChild(S)}}let p={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function f(v,w){for(let y in w)y in p||(y.substr(0,2)==="on"?v[y]=w[y]:v.setAttribute(y,w[y]));w.className!==void 0&&v.setAttribute("class",w.className),w.htmlFor!==void 0&&v.setAttribute("for",w.htmlFor),w.dataset&&m(v,w.dataset),w.style&&x(v,w.style)}function c(v,w,y){if(w===y)return;let L;for(L in w)L in p||L in y||(L.substr(0,2)==="on"?v[L]=null:v.removeAttribute(L));for(L in y)L in p||w[L]===y[L]||(L.substr(0,2)==="on"?v[L]=y[L]:v.setAttribute(L,y[L]));w.className!==y.className&&(y.className!==void 0?v.setAttribute("class",y.className):v.removeAttribute("class")),w.htmlFor!==y.htmlFor&&(y.htmlFor!==void 0?v.setAttribute("for",y.htmlFor):v.removeAttribute("for")),w.dataset!==y.dataset&&b(v,w.dataset||{},y.dataset||{}),w.style!==y.style&&M(v,w.style||{},y.style||{})}function m(v,w){for(let y in w)v.setAttribute(`data-${y}`,w[y])}function b(v,w,y){for(let L in w)L in y||v.removeAttribute(`data-${L}`);for(let L in y)w[L]!==y[L]&&v.setAttribute(`data-${L}`,y[L])}function x(v,w){let y=v.style,L;for(L in w)y[L]=w[L]}function M(v,w,y){let L=v.style,T;for(T in w)T in y||(L[T]="");for(T in y)w[T]!==y[T]&&(L[T]=y[T])}function I(v,w){let y=v.firstChild,L=Object.create(null);for(let T of w)T.type==="element"&&T.attrs.key&&(L[T.attrs.key]={vNode:T,element:y}),y=y.nextSibling;return L}})(Qe||={});var Mt={Config:"config",Label:"label"},Ei="untitled",It=class extends de.Renderer{constructor(e){super(),this.maximized=e}renderLabel(e){return re.span({className:"p-TabBar-tabLabel",id:Mt.Label},e.title.label||Ei)}renderOther(e,n){return re.span({},n.label||"untitled")}renderInert(){return re.div()}renderTab(e){let n=e.title.caption,a=this.createTabKey(e),l=this.createTabStyle(e),p=this.createTabClass(e),f=this.createTabDataset(e),c=[];return e.onClick&&c.push(re.div({onclick:e.onClick,class:"bookmarks-button"},re.div({class:"bookmarks"}))),re.li({key:a,className:p,title:n,style:l,dataset:f},this.renderDragHandle(),...c,this.renderLabel(e),this.renderCloseIcon())}renderDragHandle(){return re.div({className:"drag-handle"})}renderCloseIcon(){return re.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}};var Yt=function(t,e){return Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},Yt(t,e)};function Ci(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yt(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Tt=function(){function t(e){this.type="text",this.content=e}return t}(),kt=function(){function t(e,n,a,l){this.type="element",this.tag=e,this.attrs=n,this.children=a,this.renderer=l}return t}(),Xu=function(t){Ci(e,t);function e(n,a,l){return t.call(this,n,a,[],l||void 0)||this}return e}(kt);function Pn(t){for(var e={},n,a=[],l=1,p=arguments.length;l<p;++l){var f=arguments[l];typeof f=="string"?a.push(new Tt(f)):f instanceof Tt||f instanceof kt?a.push(f):f instanceof Array?c(a,f):(l===1||l===2)&&f&&typeof f=="object"&&("render"in f?n=f:e=f)}return new kt(t,e,a,n);function c(m,b){for(var x=0,M=b;x<M.length;x++){var I=M[x];typeof I=="string"?m.push(new Tt(I)):(I instanceof Tt||I instanceof kt)&&m.push(I)}}}(function(t){t.a=t.bind(void 0,"a"),t.abbr=t.bind(void 0,"abbr"),t.address=t.bind(void 0,"address"),t.area=t.bind(void 0,"area"),t.article=t.bind(void 0,"article"),t.aside=t.bind(void 0,"aside"),t.audio=t.bind(void 0,"audio"),t.b=t.bind(void 0,"b"),t.bdi=t.bind(void 0,"bdi"),t.bdo=t.bind(void 0,"bdo"),t.blockquote=t.bind(void 0,"blockquote"),t.br=t.bind(void 0,"br"),t.button=t.bind(void 0,"button"),t.canvas=t.bind(void 0,"canvas"),t.caption=t.bind(void 0,"caption"),t.cite=t.bind(void 0,"cite"),t.code=t.bind(void 0,"code"),t.col=t.bind(void 0,"col"),t.colgroup=t.bind(void 0,"colgroup"),t.data=t.bind(void 0,"data"),t.datalist=t.bind(void 0,"datalist"),t.dd=t.bind(void 0,"dd"),t.del=t.bind(void 0,"del"),t.dfn=t.bind(void 0,"dfn"),t.div=t.bind(void 0,"div"),t.dl=t.bind(void 0,"dl"),t.dt=t.bind(void 0,"dt"),t.em=t.bind(void 0,"em"),t.embed=t.bind(void 0,"embed"),t.fieldset=t.bind(void 0,"fieldset"),t.figcaption=t.bind(void 0,"figcaption"),t.figure=t.bind(void 0,"figure"),t.footer=t.bind(void 0,"footer"),t.form=t.bind(void 0,"form"),t.h1=t.bind(void 0,"h1"),t.h2=t.bind(void 0,"h2"),t.h3=t.bind(void 0,"h3"),t.h4=t.bind(void 0,"h4"),t.h5=t.bind(void 0,"h5"),t.h6=t.bind(void 0,"h6"),t.header=t.bind(void 0,"header"),t.hr=t.bind(void 0,"hr"),t.i=t.bind(void 0,"i"),t.iframe=t.bind(void 0,"iframe"),t.img=t.bind(void 0,"img"),t.input=t.bind(void 0,"input"),t.ins=t.bind(void 0,"ins"),t.kbd=t.bind(void 0,"kbd"),t.label=t.bind(void 0,"label"),t.legend=t.bind(void 0,"legend"),t.li=t.bind(void 0,"li"),t.main=t.bind(void 0,"main"),t.map=t.bind(void 0,"map"),t.mark=t.bind(void 0,"mark"),t.meter=t.bind(void 0,"meter"),t.nav=t.bind(void 0,"nav"),t.noscript=t.bind(void 0,"noscript"),t.object=t.bind(void 0,"object"),t.ol=t.bind(void 0,"ol"),t.optgroup=t.bind(void 0,"optgroup"),t.option=t.bind(void 0,"option"),t.output=t.bind(void 0,"output"),t.p=t.bind(void 0,"p"),t.param=t.bind(void 0,"param"),t.pre=t.bind(void 0,"pre"),t.progress=t.bind(void 0,"progress"),t.q=t.bind(void 0,"q"),t.rp=t.bind(void 0,"rp"),t.rt=t.bind(void 0,"rt"),t.ruby=t.bind(void 0,"ruby"),t.s=t.bind(void 0,"s"),t.samp=t.bind(void 0,"samp"),t.section=t.bind(void 0,"section"),t.select=t.bind(void 0,"select"),t.small=t.bind(void 0,"small"),t.source=t.bind(void 0,"source"),t.span=t.bind(void 0,"span"),t.strong=t.bind(void 0,"strong"),t.sub=t.bind(void 0,"sub"),t.summary=t.bind(void 0,"summary"),t.sup=t.bind(void 0,"sup"),t.table=t.bind(void 0,"table"),t.tbody=t.bind(void 0,"tbody"),t.td=t.bind(void 0,"td"),t.textarea=t.bind(void 0,"textarea"),t.tfoot=t.bind(void 0,"tfoot"),t.th=t.bind(void 0,"th"),t.thead=t.bind(void 0,"thead"),t.time=t.bind(void 0,"time"),t.title=t.bind(void 0,"title"),t.tr=t.bind(void 0,"tr"),t.track=t.bind(void 0,"track"),t.u=t.bind(void 0,"u"),t.ul=t.bind(void 0,"ul"),t.var_=t.bind(void 0,"var"),t.video=t.bind(void 0,"video"),t.wbr=t.bind(void 0,"wbr")})(Pn||(Pn={}));var Lt;(function(t){function e(a){return Ue.createDOMNode(a)}t.realize=e;function n(a,l){var p=Ue.hostMap.get(l)||[],f=Ue.asContentArray(a);Ue.hostMap.set(l,f),Ue.updateContent(l,p,f)}t.render=n})(Lt||(Lt={}));var Ue;(function(t){t.hostMap=new WeakMap;function e(g){return g?g instanceof Array?g:[g]:[]}t.asContentArray=e;function n(g){var v=arguments[1]||null,w=arguments[2]||null;if(v)v.insertBefore(n(g),w);else{if(g.type==="text")return document.createTextNode(g.content);if(v=document.createElement(g.tag),f(v,g.attrs),g.renderer)return g.renderer.render(v,{attrs:g.attrs,children:g.children}),v;for(var y=0,L=g.children.length;y<L;++y)n(g.children[y],v)}return v}t.createDOMNode=n;function a(g,v,w){if(v!==w){for(var y=I(g,v),L=v.slice(),T=g.firstChild,k=w.length,S=0;S<k;++S){if(S>=L.length){n(w[S],g);continue}var C=L[S],A=w[S];if(C===A){T=T.nextSibling;continue}if(C.type==="text"&&A.type==="text"){T.textContent=A.content,T=T.nextSibling;continue}if(C.type==="text"||A.type==="text"){ce.insert(L,S,A),n(A,g,T);continue}if(!C.renderer!=!A.renderer){ce.insert(L,S,A),n(A,g,T);continue}var u=A.attrs.key;if(u&&u in y){var d=y[u];d.vNode!==C&&(ce.move(L,L.indexOf(d.vNode,S+1),S),g.insertBefore(d.element,T),C=d.vNode,T=d.element)}if(C===A){T=T.nextSibling;continue}var r=C.attrs.key;if(r&&r!==u){ce.insert(L,S,A),n(A,g,T);continue}if(C.tag!==A.tag){ce.insert(L,S,A),n(A,g,T);continue}c(T,C.attrs,A.attrs),A.renderer?A.renderer.render(T,{attrs:A.attrs,children:A.children}):a(T,C.children,A.children),T=T.nextSibling}l(g,L,k,!0)}}t.updateContent=a;function l(g,v,w,y){for(var L=v.length-1;L>=w;--L){var T=v[L],k=y?g.lastChild:g.childNodes[L];T.type==="text"||(T.renderer&&T.renderer.unrender?T.renderer.unrender(k,{attrs:T.attrs,children:T.children}):l(k,T.children,0,!1)),y&&g.removeChild(k)}}var p={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function f(g,v){for(var w in v)w in p||(w.substr(0,2)==="on"?g[w]=v[w]:g.setAttribute(w,v[w]));v.className!==void 0&&g.setAttribute("class",v.className),v.htmlFor!==void 0&&g.setAttribute("for",v.htmlFor),v.dataset&&m(g,v.dataset),v.style&&x(g,v.style)}function c(g,v,w){if(v!==w){var y;for(y in v)y in p||y in w||(y.substr(0,2)==="on"?g[y]=null:g.removeAttribute(y));for(y in w)y in p||v[y]===w[y]||(y.substr(0,2)==="on"?g[y]=w[y]:g.setAttribute(y,w[y]));v.className!==w.className&&(w.className!==void 0?g.setAttribute("class",w.className):g.removeAttribute("class")),v.htmlFor!==w.htmlFor&&(w.htmlFor!==void 0?g.setAttribute("for",w.htmlFor):g.removeAttribute("for")),v.dataset!==w.dataset&&b(g,v.dataset||{},w.dataset||{}),v.style!==w.style&&M(g,v.style||{},w.style||{})}}function m(g,v){for(var w in v)g.setAttribute("data-"+w,v[w])}function b(g,v,w){for(var y in v)y in w||g.removeAttribute("data-"+y);for(var L in w)v[L]!==w[L]&&g.setAttribute("data-"+L,w[L])}function x(g,v){var w=g.style,y;for(y in v)w[y]=v[y]}function M(g,v,w){var y=g.style,L;for(L in v)L in w||(y[L]="");for(L in w)v[L]!==w[L]&&(y[L]=w[L])}function I(g,v){for(var w=g.firstChild,y=Object.create(null),L=0,T=v;L<T.length;L++){var k=T[L];k.type==="element"&&k.attrs.key&&(y[k.attrs.key]={vNode:k,element:w}),w=w.nextSibling}return y}})(Ue||(Ue={}));var Et;(function(t){function e(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}t.firstIndexOf=e;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}t.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}t.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}t.findLastIndex=l;function p(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}t.findFirstValue=p;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}t.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}t.lowerBound=c;function m(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}t.upperBound=m;function b(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}t.shallowEqual=b;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],E=0;E<s;++E)_[E]=u[r+E*o];return _}t.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],h=d<r?1:-1,s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}}t.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],h=u[r];u[d++]=h,u[r--]=o}}t.reverse=I;function g(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}t.rotate=g;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s)u[(r+s)%o]=d}}t.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}t.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}t.removeAt=y;function L(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=e(u,d,r,i);return o!==-1&&y(u,o),o}t.removeFirstOf=L;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}t.removeLastOf=T;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllOf=k;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,h=a(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeFirstWhere=S;function C(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,h=l(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeLastWhere=C;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllWhere=A})(Et||(Et={}));var Ju=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),Qu=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),el=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),tl=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),nl=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var il=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();var rl=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var ol=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var al=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(e(a,this._index++))return a},t}();var sl=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var ul=function(){function t(e,n,a){this._index=0,this._start=e,this._stop=n,this._step=a,this._length=Xt.rangeLength(e,n,a)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),Xt;(function(t){function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(Xt||(Xt={}));var ll=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var dl=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var cl=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),Wn;(function(t){function e(f,c,m){m===void 0&&(m=0);for(var b=new Array(c.length),x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}t.findIndices=e;function n(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=0,I=b.length;M<I;++M){var g=b[M]-m;x+=g*g}return{score:x,indices:b}}t.matchSumOfSquares=n;function a(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=m-1,I=0,g=b.length;I<g;++I){var v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}t.matchSumOfDeltas=a;function l(f,c,m){for(var b=[],x=0,M=0,I=c.length;x<I;){for(var g=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}t.highlight=l;function p(f,c){return f<c?-1:f>c?1:0}t.cmp=p})(Wn||(Wn={}));var fl=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var hl=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;e[n]=l}return e},t}();var oe=pt(Nn());var Kn;(function(t){function e(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}t.firstIndexOf=e;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}t.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}t.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}t.findLastIndex=l;function p(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}t.findFirstValue=p;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}t.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}t.lowerBound=c;function m(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}t.upperBound=m;function b(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}t.shallowEqual=b;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],E=0;E<s;++E)_[E]=u[r+E*o];return _}t.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],h=d<r?1:-1,s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}}t.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],h=u[r];u[d++]=h,u[r--]=o}}t.reverse=I;function g(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}t.rotate=g;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s)u[(r+s)%o]=d}}t.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}t.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}t.removeAt=y;function L(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=e(u,d,r,i);return o!==-1&&y(u,o),o}t.removeFirstOf=L;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}t.removeLastOf=T;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllOf=k;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,h=a(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeFirstWhere=S;function C(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,h=l(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeLastWhere=C;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllWhere=A})(Kn||(Kn={}));function Si(t){var e;return typeof t.iter=="function"?e=t.iter():e=new Ai(t),e}function Jt(t,e){for(var n=0,a=Si(t),l;(l=a.next())!==void 0;)if(e(l,n++)===!1)return}var Ai=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),pl=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),vl=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),gl=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),bl=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var _l=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();var yl=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var xl=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var wl=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(e(a,this._index++))return a},t}();var Il=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var Ml=function(){function t(e,n,a){this._index=0,this._start=e,this._stop=n,this._step=a,this._length=Zt.rangeLength(e,n,a)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),Zt;(function(t){function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(Zt||(Zt={}));var Tl=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var kl=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var Ll=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),Vn;(function(t){function e(f,c,m){m===void 0&&(m=0);for(var b=new Array(c.length),x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}t.findIndices=e;function n(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=0,I=b.length;M<I;++M){var g=b[M]-m;x+=g*g}return{score:x,indices:b}}t.matchSumOfSquares=n;function a(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=m-1,I=0,g=b.length;I<g;++I){var v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}t.matchSumOfDeltas=a;function l(f,c,m){for(var b=[],x=0,M=0,I=c.length;x<I;){for(var g=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}t.highlight=l;function p(f,c){return f<c?-1:f>c?1:0}t.cmp=p})(Vn||(Vn={}));var El=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var Cl=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;e[n]=l}return e},t}();var St;(function(t){function e(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}t.firstIndexOf=e;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}t.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}t.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}t.findLastIndex=l;function p(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}t.findFirstValue=p;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}t.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}t.lowerBound=c;function m(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}t.upperBound=m;function b(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}t.shallowEqual=b;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],E=0;E<s;++E)_[E]=u[r+E*o];return _}t.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],h=d<r?1:-1,s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}}t.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],h=u[r];u[d++]=h,u[r--]=o}}t.reverse=I;function g(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}t.rotate=g;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s)u[(r+s)%o]=d}}t.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}t.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}t.removeAt=y;function L(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=e(u,d,r,i);return o!==-1&&y(u,o),o}t.removeFirstOf=L;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}t.removeLastOf=T;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllOf=k;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,h=a(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeFirstWhere=S;function C(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,h=l(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeLastWhere=C;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllWhere=A})(St||(St={}));function Un(t){var e;return typeof t.iter=="function"?e=t.iter():e=new Di(t),e}function At(t,e){for(var n=0,a=Un(t),l;(l=a.next())!==void 0;)if(e(l,n++)===!1)return}var Di=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),Al=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),Dl=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),zl=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),Ol=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var Rl=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();var Bl=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var Fl=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var Pl=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(e(a,this._index++))return a},t}();function jn(t,e){for(var n=0,a=Un(t),l;(l=a.next())!==void 0;)if(e(l,n++))return l}var Wl=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var Hl=function(){function t(e,n,a){this._index=0,this._start=e,this._stop=n,this._step=a,this._length=Qt.rangeLength(e,n,a)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),Qt;(function(t){function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(Qt||(Qt={}));var Nl=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var Kl=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var Vl=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),qn;(function(t){function e(f,c,m){m===void 0&&(m=0);for(var b=new Array(c.length),x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}t.findIndices=e;function n(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=0,I=b.length;M<I;++M){var g=b[M]-m;x+=g*g}return{score:x,indices:b}}t.matchSumOfSquares=n;function a(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=m-1,I=0,g=b.length;I<g;++I){var v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}t.matchSumOfDeltas=a;function l(f,c,m){for(var b=[],x=0,M=0,I=c.length;x<I;){for(var g=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}t.highlight=l;function p(f,c){return f<c?-1:f>c?1:0}t.cmp=p})(qn||(qn={}));var ql=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var Ul=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;e[n]=l}return e},t}();var Me=function(){function t(e){this.sender=e}return t.prototype.connect=function(e,n){return ge.connect(this,e,n)},t.prototype.disconnect=function(e,n){return ge.disconnect(this,e,n)},t.prototype.emit=function(e){ge.emit(this,e)},t}();(function(t){function e(m,b){ge.disconnectBetween(m,b)}t.disconnectBetween=e;function n(m){ge.disconnectSender(m)}t.disconnectSender=n;function a(m){ge.disconnectReceiver(m)}t.disconnectReceiver=a;function l(m){ge.disconnectAll(m)}t.disconnectAll=l;function p(m){ge.disconnectAll(m)}t.clearData=p;function f(){return ge.exceptionHandler}t.getExceptionHandler=f;function c(m){var b=ge.exceptionHandler;return ge.exceptionHandler=m,b}t.setExceptionHandler=c})(Me||(Me={}));var ge;(function(t){t.exceptionHandler=function(T){console.error(T)};function e(T,k,S){S=S||void 0;var C=m.get(T.sender);if(C||(C=[],m.set(T.sender,C)),I(C,T,k,S))return!1;var A=S||k,u=b.get(A);u||(u=[],b.set(A,u));var d={signal:T,slot:k,thisArg:S};return C.push(d),u.push(d),!0}t.connect=e;function n(T,k,S){S=S||void 0;var C=m.get(T.sender);if(!C||C.length===0)return!1;var A=I(C,T,k,S);if(!A)return!1;var u=S||k,d=b.get(u);return A.signal=null,v(C),v(d),!0}t.disconnect=n;function a(T,k){var S=m.get(T);if(!(!S||S.length===0)){var C=b.get(k);!C||C.length===0||(At(C,function(A){!A.signal||A.signal.sender===T&&(A.signal=null)}),v(S),v(C))}}t.disconnectBetween=a;function l(T){var k=m.get(T);!k||k.length===0||(At(k,function(S){if(!!S.signal){var C=S.thisArg||S.slot;S.signal=null,v(b.get(C))}}),v(k))}t.disconnectSender=l;function p(T){var k=b.get(T);!k||k.length===0||(At(k,function(S){if(!!S.signal){var C=S.signal.sender;S.signal=null,v(m.get(C))}}),v(k))}t.disconnectReceiver=p;function f(T){l(T),p(T)}t.disconnectAll=f;function c(T,k){var S=m.get(T.sender);if(!(!S||S.length===0))for(var C=0,A=S.length;C<A;++C){var u=S[C];u.signal===T&&g(u,k)}}t.emit=c;var m=new WeakMap,b=new WeakMap,x=new Set,M=function(){var T=typeof requestAnimationFrame=="function";return T?requestAnimationFrame:setImmediate}();function I(T,k,S,C){return jn(T,function(A){return A.signal===k&&A.slot===S&&A.thisArg===C})}function g(T,k){var S=T.signal,C=T.slot,A=T.thisArg;try{C.call(A,S.sender,k)}catch(u){t.exceptionHandler(u)}}function v(T){x.size===0&&M(w),x.add(T)}function w(){x.forEach(y),x.clear()}function y(T){St.removeAllWhere(T,L)}function L(T){return T.signal===null}})(ge||(ge={}));var en=function(t,e){return en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},en(t,e)};function Gn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");en(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Dt=function(){function t(e){this._fn=e}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){if(!!this._fn){var e=this._fn;this._fn=null,e()}},t}(),Zl=function(t){Gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._disposed=new Me(n),n}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),Me.clearData(this))},e}(Dt),tn=function(){function t(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(e){e.dispose()}),this._items.clear())},t.prototype.contains=function(e){return this._items.has(e)},t.prototype.add=function(e){this._items.add(e)},t.prototype.remove=function(e){this._items.delete(e)},t.prototype.clear=function(){this._items.clear()},t}();(function(t){function e(n){var a=new t;return Jt(n,function(l){a.add(l)}),a}t.from=e})(tn||(tn={}));var $n=function(t){Gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._disposed=new Me(n),n}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),Me.clearData(this))},e}(tn);(function(t){function e(n){var a=new t;return Jt(n,function(l){a.add(l)}),a}t.from=e})($n||($n={}));var Yn;(function(t){function e(n){var a=document.body,l=function(p){p.preventDefault(),p.stopPropagation(),p.clipboardData.setData("text",n),a.removeEventListener("copy",l,!0)};a.addEventListener("copy",l,!0),document.execCommand("copy")}t.copyText=e})(Yn||(Yn={}));var Xn;(function(t){function e(p){var f=window.getComputedStyle(p),c=parseFloat(f.borderTopWidth)||0,m=parseFloat(f.borderLeftWidth)||0,b=parseFloat(f.borderRightWidth)||0,x=parseFloat(f.borderBottomWidth)||0,M=parseFloat(f.paddingTop)||0,I=parseFloat(f.paddingLeft)||0,g=parseFloat(f.paddingRight)||0,v=parseFloat(f.paddingBottom)||0,w=m+I+g+b,y=c+M+v+x;return{borderTop:c,borderLeft:m,borderRight:b,borderBottom:x,paddingTop:M,paddingLeft:I,paddingRight:g,paddingBottom:v,horizontalSum:w,verticalSum:y}}t.boxSizing=e;function n(p){var f=window.getComputedStyle(p),c=parseFloat(f.minWidth)||0,m=parseFloat(f.minHeight)||0,b=parseFloat(f.maxWidth)||1/0,x=parseFloat(f.maxHeight)||1/0;return b=Math.max(c,b),x=Math.max(m,x),{minWidth:c,minHeight:m,maxWidth:b,maxHeight:x}}t.sizeLimits=n;function a(p,f,c){var m=p.getBoundingClientRect();return f>=m.left&&f<m.right&&c>=m.top&&c<m.bottom}t.hitTest=a;function l(p,f){var c=p.getBoundingClientRect(),m=f.getBoundingClientRect();if(!(m.top<=c.top&&m.bottom>=c.bottom)){if(m.top<c.top&&m.height<=c.height){p.scrollTop-=c.top-m.top;return}if(m.bottom>c.bottom&&m.height>=c.height){p.scrollTop-=c.top-m.top;return}if(m.top<c.top&&m.height>c.height){p.scrollTop-=c.bottom-m.bottom;return}if(m.bottom>c.bottom&&m.height<c.height){p.scrollTop-=c.bottom-m.bottom;return}}}t.scrollIntoViewIfNeeded=l})(Xn||(Xn={}));var ke;(function(t){t.IS_MAC=!!navigator.platform.match(/Mac/i),t.IS_WIN=!!navigator.platform.match(/Win/i),t.IS_IE=/Trident/.test(navigator.userAgent),t.IS_EDGE=/Edge/.test(navigator.userAgent);function e(n){return t.IS_MAC?n.metaKey:n.ctrlKey}t.accelKey=e})(ke||(ke={}));var tt;(function(t){function e(l){if(l in Te.specificityCache)return Te.specificityCache[l];var p=Te.calculateSingle(l);return Te.specificityCache[l]=p}t.calculateSpecificity=e;function n(l){if(l in Te.validityCache)return Te.validityCache[l];var p=!0;try{Te.testElem.querySelector(l)}catch{p=!1}return Te.validityCache[l]=p}t.isValid=n;function a(l,p){return Te.protoMatchFunc.call(l,p)}t.matches=a})(tt||(tt={}));var Te;(function(t){t.specificityCache=Object.create(null),t.validityCache=Object.create(null),t.testElem=document.createElement("div"),t.protoMatchFunc=function(){var x=Element.prototype;return x.matches||x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector||function(M){var I=this,g=I.ownerDocument?I.ownerDocument.querySelectorAll(M):[];return Array.prototype.indexOf.call(g,I)!==-1}}();function e(x){x=x.split(",",1)[0];var M=0,I=0,g=0;function v(w){var y=x.match(w);return y===null?!1:(x=x.slice(y[0].length),!0)}for(x=x.replace(b," $1 ");x.length>0;){if(v(n)){M++;continue}if(v(a)){I++;continue}if(v(l)){I++;continue}if(v(f)){g++;continue}if(v(c)){I++;continue}if(v(p)){g++;continue}if(!v(m))return 0}return M=Math.min(M,255),I=Math.min(I,255),g=Math.min(g,255),M<<16|I<<8|g}t.calculateSingle=e;var n=/^#[^\s\+>~#\.\[:]+/,a=/^\.[^\s\+>~#\.\[:]+/,l=/^\[[^\]]+\]/,p=/^[^\s\+>~#\.\[:]+/,f=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,c=/^:[^\s\+>~#\.\[:]+/,m=/^[\s\+>~\*]+/,b=/:not\(([^\)]+)\)/g})(Te||(Te={}));function on(){return rn.keyboardLayout}var nn=function(){function t(e,n,a){a===void 0&&(a=[]),this.name=e,this._codes=n,this._keys=t.extractKeys(n),this._modifierKeys=t.convertToKeySet(a)}return t.prototype.keys=function(){return Object.keys(this._keys)},t.prototype.isValidKey=function(e){return e in this._keys},t.prototype.isModifierKey=function(e){return e in this._modifierKeys},t.prototype.keyForKeydownEvent=function(e){return this._codes[e.keyCode]||""},t}();(function(t){function e(a){var l=Object.create(null);for(var p in a)l[a[p]]=!0;return l}t.extractKeys=e;function n(a){for(var l=Object(null),p=0,f=a.length;p<f;++p)l[a[p]]=!0;return l}t.convertToKeySet=n})(nn||(nn={}));var zi=new nn("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),rn;(function(t){t.keyboardLayout=zi})(rn||(rn={}));var be=class{constructor(){this._timerID=0;this._replaying=!1;this._keystrokes=[];this._keydownEvents=[];this._keyBindings=[];this._exactKeyMatch=null;this._commands=Object.create(null);this._commandChanged=new Me(this);this._commandExecuted=new Me(this);this._keyBindingChanged=new Me(this)}get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Object.keys(this._commands)}hasCommand(e){return e in this._commands}addCommand(e,n){if(e in this._commands)throw new Error(`Command '${e}' already registered.`);return this._commands[e]=je.createCommand(n),this._commandChanged.emit({id:e,type:"added"}),new Dt(()=>{delete this._commands[e],this._commandChanged.emit({id:e,type:"removed"})})}notifyCommandChanged(e){if(e!==void 0&&!(e in this._commands))throw new Error(`Command '${e}' is not registered.`);this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})}label(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.label.call(void 0,n):""}mnemonic(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.mnemonic.call(void 0,n):-1}icon(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.icon.call(void 0,n):""}iconClass(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.iconClass.call(void 0,n):""}iconLabel(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.iconLabel.call(void 0,n):""}caption(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.caption.call(void 0,n):""}usage(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.usage.call(void 0,n):""}className(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.className.call(void 0,n):""}dataset(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.dataset.call(void 0,n):{}}isEnabled(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.isEnabled.call(void 0,n):!1}isToggled(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.isToggled.call(void 0,n):!1}isToggleable(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.isToggleable:!1}isVisible(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];return a?a.isVisible.call(void 0,n):!1}execute(e,n=oe.JSONExt.emptyObject){let a=this._commands[e];if(!a)return Promise.reject(new Error(`Command '${e}' not registered.`));let l;try{l=a.execute.call(void 0,n)}catch(f){l=Promise.reject(f)}let p=Promise.resolve(l);return this._commandExecuted.emit({id:e,args:n,result:p}),p}addKeyBinding(e){let n=je.createKeyBinding(e);return this._keyBindings.push(n),this._keyBindingChanged.emit({binding:n,type:"added"}),new Dt(()=>{Et.removeFirstOf(this._keyBindings,n),this._keyBindingChanged.emit({binding:n,type:"removed"})})}processKeydownEvent(e){if(this._replaying||be.isModifierKeyPressed(e))return;let n=be.keystrokeForKeydownEvent(e);if(!n){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(n);let{exact:a,partial:l}=je.matchKeyBinding(this._keyBindings,this._keystrokes,e);if(!a&&!l){this._replayKeydownEvents(),this._clearPendingState();return}if(e.preventDefault(),e.stopPropagation(),a&&!l){this._executeKeyBinding(a),this._clearPendingState();return}a&&(this._exactKeyMatch=a),this._keydownEvents.push(e),this._startTimer()}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout(()=>{this._onPendingTimeout()},je.CHORD_TIMEOUT)}_clearTimer(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(je.replayKeyEvent),this._replaying=!1)}_executeKeyBinding(e){let{command:n,args:a}=e;if(!this.hasCommand(n)||!this.isEnabled(n,a)){let l=this.hasCommand(n)?"enabled":"registered",f=`Cannot execute key binding '${e.keys.join(", ")}':`,c=`command '${n}' is not ${l}.`;console.warn(`${f} ${c}`);return}this.execute(n,a)}_clearPendingState(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}};(f=>{function t(c){let m="",b=!1,x=!1,M=!1,I=!1;for(let g of c.split(/\s+/))g==="Accel"?ke.IS_MAC?x=!0:M=!0:g==="Alt"?b=!0:g==="Cmd"?x=!0:g==="Ctrl"?M=!0:g==="Shift"?I=!0:g.length>0&&(m=g);return{cmd:x,ctrl:M,alt:b,shift:I,key:m}}f.parseKeystroke=t;function e(c){let m="",b=t(c);return b.ctrl&&(m+="Ctrl "),b.alt&&(m+="Alt "),b.shift&&(m+="Shift "),b.cmd&&ke.IS_MAC&&(m+="Cmd "),m+b.key}f.normalizeKeystroke=e;function n(c){let m;return ke.IS_WIN?m=c.winKeys||c.keys:ke.IS_MAC?m=c.macKeys||c.keys:m=c.linuxKeys||c.keys,m.map(e)}f.normalizeKeys=n;function a(c){let m=[],b=ke.IS_MAC?" ":"+",x=t(c);return x.ctrl&&m.push("Ctrl"),x.alt&&m.push("Alt"),x.shift&&m.push("Shift"),ke.IS_MAC&&x.cmd&&m.push("Cmd"),m.push(x.key),m.map(je.formatKey).join(b)}f.formatKeystroke=a;function l(c){let m=on(),b=m.keyForKeydownEvent(c);return m.isModifierKey(b)}f.isModifierKeyPressed=l;function p(c){let m=on(),b=m.keyForKeydownEvent(c);if(!b||m.isModifierKey(b))return"";let x=[];return c.ctrlKey&&x.push("Ctrl"),c.altKey&&x.push("Alt"),c.shiftKey&&x.push("Shift"),c.metaKey&&ke.IS_MAC&&x.push("Cmd"),x.push(b),x.join(" ")}f.keystrokeForKeydownEvent=p})(be||={});var je;(S=>{S.CHORD_TIMEOUT=1e3;function e(C){let A,u;return!C.icon||typeof C.icon=="string"?(u=v(C.iconClass||C.icon,m),A=u):(u=v(C.iconClass,m),A=v(C.icon,g)),{execute:C.execute,label:v(C.label,m),mnemonic:v(C.mnemonic,b),icon:A,iconClass:u,iconLabel:v(C.iconLabel,m),caption:v(C.caption,m),usage:v(C.usage,m),className:v(C.className,m),dataset:v(C.dataset,I),isEnabled:C.isEnabled||x,isToggled:C.isToggled||M,isToggleable:C.isToggleable||!!C.isToggled,isVisible:C.isVisible||x}}S.createCommand=e;function n(C){return{keys:be.normalizeKeys(C),selector:w(C),command:C.command,args:C.args||oe.JSONExt.emptyObject}}S.createKeyBinding=n;function a(C,A,u){let d=null,r=!1,i=1/0,o=0;for(let h=0,s=C.length;h<s;++h){let _=C[h],E=L(_.keys,A);if(E===y.None)continue;if(E===y.Partial){!r&&T(_.selector,u)!==-1&&(r=!0);continue}let z=T(_.selector,u);if(z===-1||z>i)continue;let O=tt.calculateSpecificity(_.selector);(!d||z<i||O>=o)&&(d=_,i=z,o=O)}return{exact:d,partial:r}}S.matchKeyBinding=a;function l(C){C.target.dispatchEvent(k(C))}S.replayKeyEvent=l;function p(C){return ke.IS_MAC?f.hasOwnProperty(C)?f[C]:C:c.hasOwnProperty(C)?c[C]:C}S.formatKey=p;let f={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},c={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},m=()=>"",b=()=>-1,x=()=>!0,M=()=>!1,I=()=>({}),g=()=>{};function v(C,A){return C===void 0?A:typeof C=="function"?C:()=>C}function w(C){if(C.selector.indexOf(",")!==-1)throw new Error(`Selector cannot contain commas: ${C.selector}`);if(!tt.isValid(C.selector))throw new Error(`Invalid selector: ${C.selector}`);return C.selector}let y;(d=>(d[d.None=0]="None",d[d.Exact=1]="Exact",d[d.Partial=2]="Partial"))(y||={});function L(C,A){if(C.length<A.length)return 0;for(let u=0,d=A.length;u<d;++u)if(C[u]!==A[u])return 0;return C.length>A.length?2:1}function T(C,A){let u=A.target,d=A.currentTarget;for(let r=0;u!==null;u=u.parentElement,++r){if(u.hasAttribute("data-lm-suppress-shortcuts")||u.hasAttribute("data-p-suppress-shortcuts"))return-1;if(tt.matches(u,C))return r;if(u===d)return-1}return-1}function k(C){let A=document.createEvent("Event"),u=C.bubbles||!0,d=C.cancelable||!0;return A.initEvent(C.type||"keydown",u,d),A.key=C.key||"",A.keyCode=C.keyCode||0,A.which=C.keyCode||0,A.ctrlKey=C.ctrlKey||!1,A.altKey=C.altKey||!1,A.shiftKey=C.shiftKey||!1,A.metaKey=C.metaKey||!1,A.view=C.view||window,A}})(je||={});var ue=pt(_t());function dt(){return sn.keyboardLayout}var an=function(){function t(e,n,a){a===void 0&&(a=[]),this.name=e,this._codes=n,this._keys=t.extractKeys(n),this._modifierKeys=t.convertToKeySet(a)}return t.prototype.keys=function(){return Object.keys(this._keys)},t.prototype.isValidKey=function(e){return e in this._keys},t.prototype.isModifierKey=function(e){return e in this._modifierKeys},t.prototype.keyForKeydownEvent=function(e){return this._codes[e.keyCode]||""},t}();(function(t){function e(a){var l=Object.create(null);for(var p in a)l[a[p]]=!0;return l}t.extractKeys=e;function n(a){for(var l=Object(null),p=0,f=a.length;p<f;++p)l[a[p]]=!0;return l}t.convertToKeySet=n})(an||(an={}));var Oi=new an("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),sn;(function(t){t.keyboardLayout=Oi})(sn||(sn={}));var un=function(){return un=Object.assign||function(e){for(var n,a=1,l=arguments.length;a<l;a++){n=arguments[a];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(e[p]=n[p])}return e},un.apply(this,arguments)},ct=function(){function t(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new q(this),this._commandExecuted=new q(this),this._keyBindingChanged=new q(this)}return Object.defineProperty(t.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),t.prototype.listCommands=function(){return Object.keys(this._commands)},t.prototype.hasCommand=function(e){return e in this._commands},t.prototype.addCommand=function(e,n){var a=this;if(e in this._commands)throw new Error("Command '"+e+"' already registered.");return this._commands[e]=Fe.createCommand(n),this._commandChanged.emit({id:e,type:"added"}),new Ze(function(){delete a._commands[e],a._commandChanged.emit({id:e,type:"removed"})})},t.prototype.notifyCommandChanged=function(e){if(e!==void 0&&!(e in this._commands))throw new Error("Command '"+e+"' is not registered.");this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})},t.prototype.describedBy=function(e){var n=this._commands[e];return n?n.describedBy||{args:null}:{args:null}},t.prototype.label=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.label.call(void 0,n):""},t.prototype.mnemonic=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.mnemonic.call(void 0,n):-1},t.prototype.icon=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.icon.call(void 0,n):""},t.prototype.iconClass=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.iconClass.call(void 0,n):""},t.prototype.iconLabel=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.iconLabel.call(void 0,n):""},t.prototype.caption=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.caption.call(void 0,n):""},t.prototype.usage=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.usage.call(void 0,n):""},t.prototype.className=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.className.call(void 0,n):""},t.prototype.dataset=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.dataset.call(void 0,n):{}},t.prototype.isEnabled=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.isEnabled.call(void 0,n):!1},t.prototype.isToggled=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.isToggled.call(void 0,n):!1},t.prototype.isToggleable=function(e,n){var a=this._commands[e];return a?a.isToggleable:!1},t.prototype.isVisible=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];return a?a.isVisible.call(void 0,n):!1},t.prototype.execute=function(e,n){n===void 0&&(n=ue.JSONExt.emptyObject);var a=this._commands[e];if(!a)return Promise.reject(new Error("Command '"+e+"' not registered."));var l;try{l=a.execute.call(void 0,n)}catch(f){l=Promise.reject(f)}var p=Promise.resolve(l);return this._commandExecuted.emit({id:e,args:n,result:p}),p},t.prototype.addKeyBinding=function(e){var n=this,a=Fe.createKeyBinding(e);return this._keyBindings.push(a),this._keyBindingChanged.emit({binding:a,type:"added"}),new Ze(function(){B.removeFirstOf(n._keyBindings,a),n._keyBindingChanged.emit({binding:a,type:"removed"})})},t.prototype.processKeydownEvent=function(e){if(!(this._replaying||t.isModifierKeyPressed(e))){var n=t.keystrokeForKeydownEvent(e);if(!n){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(n);var a=Fe.matchKeyBinding(this._keyBindings,this._keystrokes,e),l=a.exact,p=a.partial;if(!l&&!p){this._replayKeydownEvents(),this._clearPendingState();return}if(e.preventDefault(),e.stopPropagation(),l&&!p){this._executeKeyBinding(l),this._clearPendingState();return}l&&(this._exactKeyMatch=l),this._keydownEvents.push(e),this._startTimer()}},t.prototype._startTimer=function(){var e=this;this._clearTimer(),this._timerID=window.setTimeout(function(){e._onPendingTimeout()},Fe.CHORD_TIMEOUT)},t.prototype._clearTimer=function(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)},t.prototype._replayKeydownEvents=function(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Fe.replayKeyEvent),this._replaying=!1)},t.prototype._executeKeyBinding=function(e){var n=e.command,a=e.args;if(!this.hasCommand(n)||!this.isEnabled(n,a)){var l=this.hasCommand(n)?"enabled":"registered",p=e.keys.join(", "),f="Cannot execute key binding '"+p+"':",c="command '"+n+"' is not "+l+".";console.warn(f+" "+c);return}this.execute(n,a)},t.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},t.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},t}();(function(t){function e(c){for(var m="",b=!1,x=!1,M=!1,I=!1,g=0,v=c.split(/\s+/);g<v.length;g++){var w=v[g];w==="Accel"?ne.IS_MAC?x=!0:M=!0:w==="Alt"?b=!0:w==="Cmd"?x=!0:w==="Ctrl"?M=!0:w==="Shift"?I=!0:w.length>0&&(m=w)}return{cmd:x,ctrl:M,alt:b,shift:I,key:m}}t.parseKeystroke=e;function n(c){var m="",b=e(c);return b.ctrl&&(m+="Ctrl "),b.alt&&(m+="Alt "),b.shift&&(m+="Shift "),b.cmd&&ne.IS_MAC&&(m+="Cmd "),m+b.key}t.normalizeKeystroke=n;function a(c){var m;return ne.IS_WIN?m=c.winKeys||c.keys:ne.IS_MAC?m=c.macKeys||c.keys:m=c.linuxKeys||c.keys,m.map(n)}t.normalizeKeys=a;function l(c){return typeof c=="string"?m(c):c.map(m).join(", ");function m(b){var x=[],M=ne.IS_MAC?" ":"+",I=e(b);return I.ctrl&&x.push("Ctrl"),I.alt&&x.push("Alt"),I.shift&&x.push("Shift"),ne.IS_MAC&&I.cmd&&x.push("Cmd"),x.push(I.key),x.map(Fe.formatKey).join(M)}}t.formatKeystroke=l;function p(c){var m=dt(),b=m.keyForKeydownEvent(c);return m.isModifierKey(b)}t.isModifierKeyPressed=p;function f(c){var m=dt(),b=m.keyForKeydownEvent(c);if(!b||m.isModifierKey(b))return"";var x=[];return c.ctrlKey&&x.push("Ctrl"),c.altKey&&x.push("Alt"),c.shiftKey&&x.push("Shift"),c.metaKey&&ne.IS_MAC&&x.push("Cmd"),x.push(b),x.join(" ")}t.keystrokeForKeydownEvent=f})(ct||(ct={}));var Fe;(function(t){t.CHORD_TIMEOUT=1e3;function e(k){var S,C;return!k.icon||typeof k.icon=="string"?(C=v(k.iconClass||k.icon,m),S=C):(C=v(k.iconClass,m),S=v(k.icon,g)),{execute:k.execute,describedBy:un({args:null},k.describedBy),label:v(k.label,m),mnemonic:v(k.mnemonic,b),icon:S,iconClass:C,iconLabel:v(k.iconLabel,m),caption:v(k.caption,m),usage:v(k.usage,m),className:v(k.className,m),dataset:v(k.dataset,I),isEnabled:k.isEnabled||x,isToggled:k.isToggled||M,isToggleable:k.isToggleable||!!k.isToggled,isVisible:k.isVisible||x}}t.createCommand=e;function n(k){return{keys:ct.normalizeKeys(k),selector:w(k),command:k.command,args:k.args||ue.JSONExt.emptyObject}}t.createKeyBinding=n;function a(k,S,C){for(var A=null,u=!1,d=1/0,r=0,i=0,o=k.length;i<o;++i){var h=k[i],s=y(h.keys,S);if(s!==0){if(s===2){!u&&L(h.selector,C)!==-1&&(u=!0);continue}var _=L(h.selector,C);if(!(_===-1||_>d)){var E=$e.calculateSpecificity(h.selector);(!A||_<d||E>=r)&&(A=h,d=_,r=E)}}}return{exact:A,partial:u}}t.matchKeyBinding=a;function l(k){k.target.dispatchEvent(T(k))}t.replayKeyEvent=l;function p(k){return ne.IS_MAC?f.hasOwnProperty(k)?f[k]:k:c.hasOwnProperty(k)?c[k]:k}t.formatKey=p;var f={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},c={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},m=function(){return""},b=function(){return-1},x=function(){return!0},M=function(){return!1},I=function(){return{}},g=function(){};function v(k,S){return k===void 0?S:typeof k=="function"?k:function(){return k}}function w(k){if(k.selector.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+k.selector);if(!$e.isValid(k.selector))throw new Error("Invalid selector: "+k.selector);return k.selector}function y(k,S){if(k.length<S.length)return 0;for(var C=0,A=S.length;C<A;++C)if(k[C]!==S[C])return 0;return k.length>S.length?2:1}function L(k,S){for(var C=S.target,A=S.currentTarget,u=0;C!==null;C=C.parentElement,++u){if(C.hasAttribute("data-lm-suppress-shortcuts")||C.hasAttribute("data-p-suppress-shortcuts"))return-1;if($e.matches(C,k))return u;if(C===A)return-1}return-1}function T(k){var S=document.createEvent("Event"),C=k.bubbles||!0,A=k.cancelable||!0;return S.initEvent(k.type||"keydown",C,A),S.key=k.key||"",S.keyCode=k.keyCode||0,S.which=k.keyCode||0,S.ctrlKey=k.ctrlKey||!1,S.altKey=k.altKey||!1,S.shiftKey=k.shiftKey||!1,S.metaKey=k.metaKey||!1,S.view=k.view||window,S}})(Fe||(Fe={}));var ln=pt(_t());var he=class extends R{constructor(n){super({node:fe.createNode()});this._childIndex=-1;this._activeIndex=-1;this._openTimerID=0;this._closeTimerID=0;this._items=[];this._childMenu=null;this._parentMenu=null;this._aboutToClose=new q(this);this._menuRequested=new q(this);this.addClass("lm-Menu"),this.addClass("p-Menu"),this.setFlag(R.Flag.DisallowLayout),this.commands=n.commands,this.renderer=n.renderer||he.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let n=this;for(;n._parentMenu;)n=n._parentMenu;return n}get leafMenu(){let n=this;for(;n._childMenu;)n=n._childMenu;return n}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(n){this.activeIndex=n?this._items.indexOf(n):-1}get activeIndex(){return this._activeIndex}set activeIndex(n){(n<0||n>=this._items.length)&&(n=-1),n!==-1&&!fe.canActivate(this._items[n])&&(n=-1),this._activeIndex!==n&&(this._activeIndex=n,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let n=this._items.length,a=this._activeIndex,l=a<n-1?a+1:0,p=l===0?n-1:l-1;this.activeIndex=B.findFirstIndex(this._items,fe.canActivate,l,p)}activatePreviousItem(){let n=this._items.length,a=this._activeIndex,l=a<=0?n-1:a-1,p=l===n-1?0:l+1;this.activeIndex=B.findLastIndex(this._items,fe.canActivate,l,p)}triggerActiveItem(){if(!this.isAttached)return;let n=this.activeItem;if(!n)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),n.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();let{command:a,args:l}=n;this.commands.isEnabled(a,l)?this.commands.execute(a,l):console.log(`Command '${a}' is disabled.`)}addItem(n){return this.insertItem(this._items.length,n)}insertItem(n,a){this.isAttached&&this.close(),this.activeIndex=-1;let l=Math.max(0,Math.min(n,this._items.length)),p=fe.createItem(this,a);return B.insert(this._items,l,p),this.update(),p}removeItem(n){this.removeItemAt(this._items.indexOf(n))}removeItemAt(n){this.isAttached&&this.close(),this.activeIndex=-1,B.removeAt(this._items,n)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())}open(n,a,l={}){if(this.isAttached)return;let p=l.forceX||!1,f=l.forceY||!1;fe.openRootMenu(this,n,a,p,f),this.activate()}handleEvent(n){switch(n.type){case"keydown":this._evtKeyDown(n);break;case"mouseup":this._evtMouseUp(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseenter":this._evtMouseEnter(n);break;case"mouseleave":this._evtMouseLeave(n);break;case"mousedown":this._evtMouseDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(n){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(n){this.isAttached&&this.node.focus()}onUpdateRequest(n){let a=this._items,l=this.renderer,p=this._activeIndex,f=fe.computeCollapsed(a),c=new Array(a.length);for(let m=0,b=a.length;m<b;++m){let x=a[m],M=m===p,I=f[m];c[m]=l.renderItem({item:x,active:M,collapsed:I,onfocus:()=>{this.activeIndex=m}})}Je.render(c,this.contentNode)}onCloseRequest(n){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let a=this._childMenu;a&&(this._childIndex=-1,this._childMenu=null,a._parentMenu=null,a.close());let l=this._parentMenu;l&&(this._parentMenu=null,l._childIndex=-1,l._childMenu=null,l.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(n)}_evtKeyDown(n){n.preventDefault(),n.stopPropagation();let a=n.keyCode;if(a===13){this.triggerActiveItem();return}if(a===27){this.close();return}if(a===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(a===38){this.activatePreviousItem();return}if(a===39){let c=this.activeItem;c&&c.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(a===40){this.activateNextItem();return}let l=dt().keyForKeydownEvent(n);if(!l)return;let p=this._activeIndex+1,f=fe.findMnemonic(this._items,l,p);f.index!==-1&&!f.multiple?(this.activeIndex=f.index,this.triggerActiveItem()):f.index!==-1?this.activeIndex=f.index:f.auto!==-1&&(this.activeIndex=f.auto)}_evtMouseUp(n){n.button===0&&(n.preventDefault(),n.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(n){let a=B.findFirstIndex(this.contentNode.children,p=>G.hitTest(p,n.clientX,n.clientY));if(a===this._activeIndex)return;if(this.activeIndex=a,a=this.activeIndex,a===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();let l=this.activeItem;!l||l.type!=="submenu"||!l.submenu||this._startOpenTimer()}_evtMouseEnter(n){for(let a=this._parentMenu;a;a=a._parentMenu)a._cancelOpenTimer(),a._cancelCloseTimer(),a.activeIndex=a._childIndex}_evtMouseLeave(n){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}let{clientX:a,clientY:l}=n;if(G.hitTest(this._childMenu.node,a,l)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()}_evtMouseDown(n){this._parentMenu||(fe.hitTestMenus(this,n.clientX,n.clientY)?(n.preventDefault(),n.stopPropagation()):this.close())}_openChildMenu(n=!1){let a=this.activeItem;if(!a||a.type!=="submenu"||!a.submenu){this._closeChildMenu();return}let l=a.submenu;if(l===this._childMenu)return;he.saveWindowData(),this._closeChildMenu(),this._childMenu=l,this._childIndex=this._activeIndex,l._parentMenu=this,P.sendMessage(this,R.Msg.UpdateRequest);let p=this.contentNode.children[this._activeIndex];fe.openSubmenu(l,p),n&&(l.activeIndex=-1,l.activateNextItem()),l.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){this._openTimerID===0&&(this._openTimerID=window.setTimeout(()=>{this._openTimerID=0,this._openChildMenu()},fe.TIMER_DELAY))}_startCloseTimer(){this._closeTimerID===0&&(this._closeTimerID=window.setTimeout(()=>{this._closeTimerID=0,this._closeChildMenu()},fe.TIMER_DELAY))}_cancelOpenTimer(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){fe.saveWindowData()}};(n=>{class t{renderItem(l){let p=this.createItemClass(l),f=this.createItemDataset(l),c=this.createItemARIA(l);return te.li({className:p,dataset:f,tabindex:"0",onfocus:l.onfocus,...c},this.renderIcon(l),this.renderLabel(l),this.renderShortcut(l),this.renderSubmenu(l))}renderIcon(l){let p=this.createIconClass(l);return typeof l.item.icon=="string"?te.div({className:p},l.item.iconLabel):te.div({className:p},l.item.icon,l.item.iconLabel)}renderLabel(l){let p=this.formatLabel(l);return te.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},p)}renderShortcut(l){let p=this.formatShortcut(l);return te.div({className:"lm-Menu-itemShortcut p-Menu-itemShortcut"},p)}renderSubmenu(l){return te.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}createItemClass(l){let p="lm-Menu-item";p+=" p-Menu-item",l.item.isEnabled||(p+=" lm-mod-disabled",p+=" p-mod-disabled"),l.item.isToggled&&(p+=" lm-mod-toggled",p+=" p-mod-toggled"),l.item.isVisible||(p+=" lm-mod-hidden",p+=" p-mod-hidden"),l.active&&(p+=" lm-mod-active",p+=" p-mod-active"),l.collapsed&&(p+=" lm-mod-collapsed",p+=" p-mod-collapsed");let f=l.item.className;return f&&(p+=` ${f}`),p}createItemDataset(l){let p,{type:f,command:c,dataset:m}=l.item;return f==="command"?p={...m,type:f,command:c}:p={...m,type:f},p}createIconClass(l){let p="lm-Menu-itemIcon";p+=" p-Menu-itemIcon";let f=l.item.iconClass;return f?`${p} ${f}`:p}createItemARIA(l){let p={};switch(l.item.type){case"separator":p.role="presentation";break;case"submenu":p["aria-haspopup"]="true",l.item.isEnabled||(p["aria-disabled"]="true");break;default:l.item.isEnabled||(p["aria-disabled"]="true"),p.role="menuitem"}return p}formatLabel(l){let{label:p,mnemonic:f}=l.item;if(f<0||f>=p.length)return p;let c=p.slice(0,f),m=p.slice(f+1),b=p[f],x=te.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},b);return[c,x,m]}formatShortcut(l){let p=l.item.keyBinding;return p?ct.formatKeystroke(p.keys):null}}n.Renderer=t,n.defaultRenderer=new t})(he||={});var fe;(y=>{y.TIMER_DELAY=300,y.SUBMENU_OVERLAP=3;let n=null,a=0;function l(){return a>0?(a--,n):M()}function p(){n=M(),a++}y.saveWindowData=p;function f(){let L=document.createElement("div"),T=document.createElement("ul");return T.className="lm-Menu-content",T.classList.add("p-Menu-content"),L.appendChild(T),T.setAttribute("role","menu"),L.tabIndex=0,L}y.createNode=f;function c(L){return L.type!=="separator"&&L.isEnabled&&L.isVisible}y.canActivate=c;function m(L,T){return new w(L.commands,T)}y.createItem=m;function b(L,T,k){for(let S=L;S;S=S.childMenu)if(G.hitTest(S.node,T,k))return!0;return!1}y.hitTestMenus=b;function x(L){let T=new Array(L.length);B.fill(T,!1);let k=0,S=L.length;for(;k<S;++k){let u=L[k];if(!!u.isVisible){if(u.type!=="separator")break;T[k]=!0}}let C=S-1;for(;C>=0;--C){let u=L[C];if(!!u.isVisible){if(u.type!=="separator")break;T[C]=!0}}let A=!1;for(;++k<C;){let u=L[k];!u.isVisible||(u.type!=="separator"?A=!1:A?T[k]=!0:A=!0)}return T}y.computeCollapsed=x;function M(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}function I(L,T,k,S,C){let A=l(),u=A.pageXOffset,d=A.pageYOffset,r=A.clientWidth,i=A.clientHeight;P.sendMessage(L,R.Msg.UpdateRequest);let o=i-(C?k:0),h=L.node,s=h.style;s.opacity="0",s.maxHeight=`${o}px`,R.attach(L,document.body);let{width:_,height:E}=h.getBoundingClientRect();!S&&T+_>u+r&&(T=u+r-_),!C&&k+E>d+i&&(k>d+i?k=d+i-E:k=k-E),s.transform=`translate(${Math.max(0,T)}px, ${Math.max(0,k)}px`,s.opacity="1"}y.openRootMenu=I;function g(L,T){let k=l(),S=k.pageXOffset,C=k.pageYOffset,A=k.clientWidth,u=k.clientHeight;P.sendMessage(L,R.Msg.UpdateRequest);let d=u,r=L.node,i=r.style;i.opacity="0",i.maxHeight=`${d}px`,R.attach(L,document.body);let{width:o,height:h}=r.getBoundingClientRect(),s=G.boxSizing(L.node),_=T.getBoundingClientRect(),E=_.right-3;E+o>S+A&&(E=_.left+3-o);let z=_.top-s.borderTop-s.paddingTop;z+h>C+u&&(z=_.bottom+s.borderBottom+s.paddingBottom-h),i.transform=`translate(${Math.max(0,E)}px, ${Math.max(0,z)}px`,i.opacity="1"}y.openSubmenu=g;function v(L,T,k){let S=-1,C=-1,A=!1,u=T.toUpperCase();for(let d=0,r=L.length;d<r;++d){let i=(d+k)%r,o=L[i];if(!c(o))continue;let h=o.label;if(h.length===0)continue;let s=o.mnemonic;if(s>=0&&s<h.length){h[s].toUpperCase()===u&&(S===-1?S=i:A=!0);continue}C===-1&&h[0].toUpperCase()===u&&(C=i)}return{index:S,multiple:A,auto:C}}y.findMnemonic=v;class w{constructor(T,k){this._commands=T,this.type=k.type||"command",this.command=k.command||"",this.args=k.args||ln.JSONExt.emptyObject,this.submenu=k.submenu||null}get label(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""}get mnemonic(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){return this.type==="command"?this._commands.icon(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.icon:this.iconClass}get iconClass(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""}get className(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""}get dataset(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get isToggled(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1}get isVisible(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get keyBinding(){if(this.type==="command"){let{command:T,args:k}=this;return B.findLastValue(this._commands.keyBindings,S=>S.command===T&&ln.JSONExt.deepEqual(S.args,k))||null}return null}}})(fe||={});var nt=class extends he.Renderer{formatLabel(e){let{label:n,mnemonic:a}=e.item;if(a<0||a>=n.length)return n;let l=n.slice(0,a),p=n.slice(a+1),f=n[a],c=re.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},f);return[l,c,p]}renderLabel(e){let n=this.formatLabel(e);return re.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},n)}renderSubmenu(e){return re.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}renderItem(e){let n=this.createItemClass(e),a=this.createItemDataset(e),l=this.createItemARIA(e);return re.li({className:n,dataset:a,tabindex:"0",onfocus:e.onfocus,...l},this.renderLabel(e),this.renderShortcut(e),this.renderSubmenu(e))}};var zt=class extends de{constructor(e,n={}){super(n),this._addEventListeners(),this.__content_node__,this._workspace=e}onUpdateRequest(e){this.__content_node__=this.contentNode;let n=this._titles,a=this.renderer,l=this.currentTitle,p=new Array;for(let f=0,c=n.length;f<c;++f){let m=n[f],b=m===l,x=n.filter(I=>I!==l),M;x.length>0&&(M=this.onClick.bind(this,x,f)),b?p[f]=a.renderTab({title:m,zIndex:n.length+1,current:b,onClick:M}):p[f]=a.renderInert()}Lt.render(p,this.contentNode),this._check_shade()}onClick(e,n,a){let l=new be,p=new nt(null);this._menu=new he({commands:l,renderer:p}),this._menu.addClass("perspective-workspace-menu"),this._menu.dataset.minwidth=this._titles[n];for(let c of e)this._menu.addItem({command:"tabbar:switch",args:{title:c}});l.addCommand("tabbar:switch",{execute:async({title:c})=>{let m=this._titles.findIndex(b=>b===c);this.currentTitle=c,this.tabActivateRequested.emit({index:m,title:c})},label:({title:c})=>c.label||"untitled",mnemonic:0});let f=a.target.getBoundingClientRect();this._menu.open(f.x,f.y+f.height),this._menu.aboutToClose.connect(()=>{this._menu=void 0}),a.preventDefault(),a.stopPropagation()}_check_shade(){Array.from(this.contentNode.children).filter(e=>e.classList.contains("settings_open")&&e.classList.contains("p-mod-current")).length>0?this.contentNode.classList.add("inactive-blur"):this.contentNode.classList.remove("inactive-blur")}handleEvent(e){switch(this._menu?.close(),this.retargetEvent(e),e.type){case"contextmenu":let n=this.currentTitle.owner;this.parent.parent.parent.showContextMenu(n,e),e.preventDefault();break;case"mousedown":if(e.target.id===Mt.Label)return;break;case"pointerdown":if(e.target.id===Mt.Label){let a=this.contentNode.children,l=Ft.findFirstIndex(a,f=>$t.hitTest(f,e.clientX,e.clientY));if(l<0)break;let p=this.titles[l];this._workspace._maximize(p.owner),requestAnimationFrame(()=>p.owner.viewer.toggleConfig());return}break}super.handleEvent(e)}retargetEvent(e){return Object.defineProperty(e,"target",{value:e.composedPath()[0],enumerable:!0}),e}_addEventListeners(){this.node.addEventListener("dblclick",this),this.node.addEventListener("contextmenu",this)}};var dn=class extends Ee.Renderer{constructor(e){super(),this._workspace=e}createTabBar(){let e=new zt(this._workspace,{renderer:new It});return e.addClass("p-DockPanel-tabBar"),e}},me=class extends Ee{constructor(e){super({renderer:new dn(e)}),this._renderer.dock=this}_onTabDetachRequested(e,n){super._onTabDetachRequested(e,n);let a=e.titles[n.index].owner,l=this.layout.saveLayout();ot(this.layout.widgets()).length>1&&this.layout.removeWidget(a),a.addClass("widget-blur"),this._drag&&this._drag._promise.then(()=>{a.node.isConnected||this.layout.restoreLayout(l),a.removeClass("widget-blur")})}static getWidgets(e){return e?.hasOwnProperty("main")?me.getWidgets(e.main):e?.children?e.children.flatMap(n=>me.getWidgets(n)):e?.widgets?e.widgets:[]}static mapWidgets(e,n){return n.main?n.main=me.mapWidgets(e,n.main):n.children?n.children=n.children.map(a=>me.mapWidgets(e,a)):n.widgets&&(n.widgets=n.widgets.map(a=>e(a))),n}onAfterAttach(){this.spacing=parseInt(window.getComputedStyle(this.node).padding)||0}};var Zn=(t,e)=>{let n=new be;return n.addCommand("workspace:export",{execute:async a=>{let l=document.createElement("perspective-export-menu");t.apply_indicator_theme(),l.unsafe_set_model(await a.widget.viewer.unsafeGetModel()),l.open(e),a.init_overlay(),l.addEventListener("blur",()=>{a.contextMenu.aboutToClose.emit({})})},isEnabled:a=>{if(a.contextMenu.node.isConnected){let l=a.contextMenu.node.getBoundingClientRect();e.style.top=l.top+"px",e.style.left=l.left+"px"}return!0},label:"Export",mnemonic:0}),n.addCommand("workspace:copy",{execute:async a=>{let l=document.createElement("perspective-copy-menu");t.apply_indicator_theme(),l.unsafe_set_model(await a.widget.viewer.unsafeGetModel()),l.open(e),a.init_overlay(),l.addEventListener("blur",()=>{a.contextMenu.aboutToClose.emit({})})},isEnabled:a=>{if(a.contextMenu.node.isConnected){let l=a.contextMenu.node.getBoundingClientRect();e.style.top=l.top+"px",e.style.left=l.left+"px"}return!0},label:"Copy",mnemonic:0}),n.addCommand("workspace:new",{execute:a=>{let l=t._createWidgetAndNode({config:{table:a.table}});t.dockpanel.addWidget(l,{mode:"split-right",ref:a.widget})},label:a=>a.table}),n.addCommand("workspace:newview",{execute:async a=>{let l=await a.target_widget.save(),p=t._createWidgetAndNode({config:l});t.dockpanel.addWidget(p,{mode:"split-right",ref:a.widget})},isVisible:a=>a.target_widget.title.label!=="",label:a=>a.target_widget.title.label||"untitled"}),n.addCommand("workspace:reset",{execute:a=>a.widget.viewer.reset(),label:"Reset",mnemonic:0}),n.addCommand("workspace:duplicate",{execute:({widget:a})=>t.duplicate(a),isVisible:a=>a.widget.parent===t.dockpanel,label:"Duplicate",mnemonic:0}),n.addCommand("workspace:master",{execute:a=>t.toggleMasterDetail(a.widget),isVisible:()=>t.mode===Pe.GLOBAL_FILTERS,label:a=>a.widget.parent===t.dockpanel?"Create Global Filter":"Remove Global Filter",mnemonic:0}),n.addCommand("workspace:close",{execute:a=>{a.widget.close()},label:()=>"Close",mnemonic:0}),n.addCommand("workspace:help",{label:"Shift+Click for Browser Menu",isEnabled:()=>!1}),n.add,n};var ft=class extends R{constructor({viewer:e,node:n}){super({node:n}),this.viewer=e,this.master=!1}set master(e){e!==void 0&&this._master!==e&&(e?(this.viewer.classList.add("workspace-master-widget"),this.viewer.classList.remove("workspace-detail-widget"),this.viewer.toggleAttribute?.("selectable",!0)):(this.viewer.classList.add("workspace-detail-widget"),this.viewer.classList.remove("workspace-master-widget"),this.viewer.removeAttribute("selectable")),this._master=e)}get master(){return this._master}get name(){return console.error("Test"),this._title}set linked(e){e!==void 0&&(e?this.viewer.setAttribute("linked",""):this.viewer.removeAttribute("linked"))}get linked(){return this.viewer.hasAttribute("linked")}toggleConfig(){return this.viewer.toggleConfig()}async load(e){this._is_table_loaded=!0;let n=[this.viewer.load(e)];this._restore_config&&n.push(this._restore_config()),await Promise.all(n)}restore(e){let{master:n,table:a,linked:l,name:p,editable:f,selectable:c,...m}=e;this.master=n,this.linked=l,this._title=e.title,this.title.label=e.title,a&&this.viewer.setAttribute("table",a),c&&this.viewer.setAttribute("selectable",c),f&&this.viewer.setAttribute("editable",f);let b=()=>this.viewer.restore({...m});if(this._is_table_loaded)return b();this._restore_config=b}async save(){let e={...await this.viewer.save(),master:this.master,table:this.viewer.getAttribute("table"),linked:this.linked};return this.viewer.hasAttribute("selectable")&&(e.selectable=this.viewer.getAttribute("selectable")),this.viewer.hasAttribute("editable")&&(e.editable=this.viewer.getAttribute("editable")),e}removeClass(e){super.removeClass(e),this.viewer&&this.viewer.classList.remove(e)}async onCloseRequest(e){super.onCloseRequest(e),this.viewer.parentElement&&this.viewer.parentElement.removeChild(this.viewer),await this.viewer.delete()}};import Ri from"lodash/uniqBy";import Bi from"lodash/debounce";var cn=[1,3],Fi=0,it={LEFT:"left",RIGHT:"right"},Pe={GLOBAL_FILTERS:"globalFilters",LINKED:"linked"},fn=class extends Map{set(e,n){this._set_listener?.(e,n),super.set(e,n)}get(e){return super.get(e)}delete(e){return this._delete_listener?.(e)?super.delete(e):!1}addSetListener(e){this._set_listener=e}addDeleteListener(e){this._delete_listener=e}},ht=class extends Be{constructor(e,n={}){super({orientation:"horizontal"}),this.addClass("perspective-workspace"),this.dockpanel=new me(this),this.detailPanel=new Xe,this.detailPanel.layout.fitPolicy="set-no-constraint",this.detailPanel.addClass("perspective-scroll-panel"),this.detailPanel.addWidget(this.dockpanel),this.masterPanel=new Be({orientation:"vertical"}),this.masterPanel.addClass("master-panel"),this.dockpanel.layoutModified.connect(()=>this.workspaceUpdated()),this.addWidget(this.detailPanel),this.spacing=8,this.element=e,this._side=n.side||it.LEFT,this.mode=n.mode||Pe.GLOBAL_FILTERS,this._linkedViewers=[],this.listeners=new WeakMap,this._tables=new fn,this._tables.addSetListener(this._set_listener.bind(this)),this._tables.addDeleteListener(this._delete_listener.bind(this)),this.indicator=this.init_indicator(),this.commands=Zn(this,this.indicator),this.menuRenderer=new nt(this.element),this.customCommands=[],e.addEventListener("contextmenu",a=>this.showContextMenu(null,a))}init_indicator(){let e=document.createElement("perspective-indicator");return e.style.position="fixed",e.style.pointerEvents="none",document.body.appendChild(e),e}apply_indicator_theme(){let e=JSON.parse(window.getComputedStyle(this.element).getPropertyValue("--theme-name").trim());this.indicator.setAttribute("theme",e)}addTable(e,n){this.tables.set(e,n)}getTable(e){return this.tables.get(e)}removeTable(e){return this.tables.delete(e)}get tables(){return this._tables}set side(e){if(it[e.toUpperCase()]===void 0){console.warn("Unknown `side` attribute:",e);return}if(this._side!==e&&this.masterPanel.isAttached){let n=this.relativeSizes().slice().reverse();this.detailPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close(),e===it.LEFT?(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel)):(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel)),this.setRelativeSizes(n)}this._side=e}get side(){return this._side}async save(){let e={sizes:[...this.relativeSizes()],detail:me.mapWidgets(l=>l.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),mode:this.mode};if(this.masterPanel.isAttached){let l={widgets:this.masterPanel.widgets.map(p=>p.viewer.getAttribute("slot")),sizes:[...this.masterPanel.relativeSizes()]};e.master=l}let n={};for(let l of this.masterPanel.widgets)n[l.viewer.getAttribute("slot")]=await l.save();let a=me.getWidgets(this.dockpanel.saveLayout());return await Promise.all(a.map(async l=>{n[l.viewer.getAttribute("slot")]=await l.save()})),{...e,viewers:n}}async restore(e){let{sizes:n,master:a,detail:l,viewers:p=[],mode:f=Pe.GLOBAL_FILTERS}=structuredClone(e);this.mode=f,this.mode===Pe.GLOBAL_FILTERS&&a&&a.widgets.length>0?this.setupMasterPanel(n||cn):(this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close()),this.addWidget(this.detailPanel));let c=[];for(let m of this._capture_viewers())for(let b of this._capture_widgets()){let x=this._restore_callback.bind(this,p,m,b);if(l){let M=me.mapWidgets(x.bind(this,!1),l);this.dockpanel.restoreLayout(M),c=c.concat(me.getWidgets(M).map(I=>I.task))}a&&(this.mode===Pe.GLOBAL_FILTERS?(c=c.concat(a.widgets.map(M=>x.bind(this,!0)(M).task)),a.sizes&&this.masterPanel.setRelativeSizes(a.sizes)):c=c.concat(a.widgets.map(M=>{let I=x.bind(this,void 0)(M);return this.dockpanel.addWidget(I),I.task})))}await Promise.all(c)}*_capture_widgets(){let e=this.getAllWidgets();yield e;for(let n of e)n.node.isConnected||n.close()}*_capture_viewers(){let e=Array.from(this.element.children);yield e;let n=this.getAllWidgets();for(let a of e)!n.find(p=>p.viewer===a)&&Array.from(this.element.children).indexOf(a)>-1&&(this.element.removeChild(a),a.delete())}_restore_callback(e,n,a,l,p){let f;typeof p=="string"?f=e[p]:(f=p,p=f.slot);let c=!!p&&n.find(b=>b.getAttribute("slot")===p),m;return c?(m=a.find(b=>b.viewer===c),m?m.restore({...f,master:l}):m=this._createWidget({config:{...f,master:l},viewer:c})):f?m=this._createWidgetAndNode({config:{...f,master:l},slot:p}):console.error(`Could not find or create <perspective-viewer> for slot "${p}"`),(l||this.mode===Pe.LINKED)&&(m.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this)),m.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),this.masterPanel.addWidget(m)),m.linked&&this._linkWidget(m),m}_validate(e){if(!e||!("view"in e)||typeof e?.view!="function")throw new Error("Only `perspective.Table()` instances can be added to `tables`");return e}_set_listener(e,n){typeof n?.then=="function"?n=n.then(this._validate):this._validate(n),this.getAllWidgets().forEach(a=>{a.viewer.getAttribute("table")===e&&a.load(n)})}_delete_listener(e){return this.getAllWidgets().some(a=>a.viewer.getAttribute("table")===e)?(console.error(`Cannot remove table: '${e}' because it's still bound to widget(s)`),!1):!0}update_widget_for_viewer(e){let n=e.getAttribute("slot");if(n||(n=this._gen_id(),e.setAttribute("slot",n)),e.getAttribute("table")){if(!this.node.querySelector(`slot[name=${n}]`)){console.warn(`Undocked ${e.outerHTML}, creating default layout`);let p=this._createWidget({table:e.getAttribute("table"),config:{master:!1},viewer:e});this.dockpanel.addWidget(p),this.dockpanel.activateWidget(p)}}else console.warn(`No table set for ${e.outerHTML}`)}remove_unslotted_widgets(e){let n=this.getAllWidgets();for(let a of n)e.indexOf(a.viewer)===-1&&a.close()}update_details_panel(e){this.masterPanel.widgets.length===0&&this.masterPanel.close()}async duplicate(e){this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(e);let n=await e.save();n.title=n.title?`${n.title} (*)`:"";let a=this._createWidgetAndNode({config:n});if(n.linked&&this._linkWidget(a),e.master){let l=this.masterPanel.widgets.indexOf(e)+1;this.masterPanel.insertWidget(l,a)}else this.dockpanel.addWidget(a,{mode:"split-right",ref:e});await a.task}toggleMasterDetail(e){let n=e.parent!==this.dockpanel;this.element.dispatchEvent(new CustomEvent("workspace-toggle-global-filter",{detail:{widget:e,isGlobalFilter:!n}})),n?this.makeDetail(e):(this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(e),this.makeMaster(e))}_maximize(e){e.viewer.classList.add("widget-maximize"),this._minimizedLayout=this.dockpanel.saveLayout(),this._maximizedWidget=e,this.dockpanel.mode="single-document",this.dockpanel.activateWidget(e)}_unmaximize(){this._maximizedWidget.viewer.classList.remove("widget-maximize"),this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(this._minimizedLayout)}toggleSingleDocument(e){this.dockpanel.mode!=="single-document"?this._maximize(e):this._unmaximize()}async _filterViewer(e,n,a){let l=await e.save(),p=await e.getTable(),f=Object.keys(await p.schema()),c=l.filter||[],m=M=>M[0]&&f.includes(M[0]),b=n.filter(m);b.push(...c.filter(M=>!a.has(M[0])));let x=Ri(b,M=>M[0]);await e.restore({filter:x})}async onPerspectiveSelect(e){let n=await e.target.save();if(e.type==="perspective-click"&&(n.plugin==="Datagrid"||n.plugin===null))return;let a=new Set([...n.group_by||[],...n.split_by||[],...(n.filter||[]).map(p=>p[0])]),l=[...e.detail.config.filter];this.mode===Pe.LINKED?this._linkedViewers.forEach(p=>{p!==e.target&&this._filterViewer(p,l,a)}):ot(this.dockpanel.widgets()).forEach(p=>this._filterViewer(p.viewer,l,a))}async makeMaster(e){e.master=!0,e.viewer.hasAttribute("settings")&&await e.toggleConfig(),this.masterPanel.isAttached||(this.detailPanel.close(),this.setupMasterPanel(cn)),this.masterPanel.addWidget(e),e.isHidden&&e.show(),e.viewer.restyleElement(),e.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}makeDetail(e){e.master=!1,this.dockpanel.addWidget(e,{mode:`split-${this._side}`}),this.masterPanel.widgets.length===0&&(this.detailPanel.close(),this.masterPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.addWidget(this.detailPanel)),e.viewer.restyleElement(),e.viewer.removeEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.removeEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}isLinked(e){return this._linkedViewers.indexOf(e.viewer)>-1}async _linkWidget(e){e.title.className+=" linked",this._linkedViewers.indexOf(e.viewer)===-1&&(this._linkedViewers.push(e.viewer),this._linkedViewers.length===1&&this.getAllWidgets().forEach(async n=>{(await n.viewer.save()).group_by&&await n.viewer.restore({selectable:!0})}))}toggleLink(e){e.linked=!e.linked,e.linked?this._linkWidget(e):(e.title.className=e.title.className.replace(/ linked/g,""),this._linkedViewers=this._linkedViewers.filter(n=>n!==e.viewer),this._linkedViewers.length===0&&this.getAllWidgets().forEach(n=>n.viewer.restore({selectable:!1})))}createContextMenu(e){let n=new he({commands:this.commands,renderer:this.menuRenderer}),a=In(this.dockpanel.tabBars(),p=>p.currentTitle.owner===e),l=()=>{e&&(e.addClass("context-focus"),e.viewer.classList.add("context-focus"),a&&a.node.classList.add("context-focus"),this.element.classList.add("context-menu"),this.addClass("context-menu"),e.viewer.classList.contains("workspace-master-widget")?n.node.classList.add("workspace-master-menu"):n.node.classList.remove("workspace-master-menu"))};return n.init_overlay=l,(e?.parent===this.dockpanel||e===null)&&n.addItem({type:"submenu",command:"workspace:newmenu",submenu:(()=>{let p=new he({commands:this.commands,renderer:this.menuRenderer});for(let m of this.tables.keys())p.addItem({command:"workspace:new",args:{table:m,widget:e}});let f=me.getWidgets(this.dockpanel.saveLayout());f.length>0&&p.addItem({type:"separator"});let c=new Set;for(let m of f)c.has(m.title.label)||(p.addItem({command:"workspace:newview",args:{widget:e,target_widget:m}}),c.add(m.title.label));return p.title.label="New Table",p})()}),e&&(e?.parent===this.dockpanel&&n.addItem({type:"separator"}),n.addItem({command:"workspace:maximize",args:{widget:e}}),n.addItem({command:"workspace:minimize",args:{widget:e}}),n.addItem({command:"workspace:duplicate",args:{widget:e}}),n.addItem({command:"workspace:master",args:{widget:e}}),n.addItem({command:"workspace:link",args:{widget:e}}),n.addItem({type:"separator"}),n.addItem({command:"workspace:reset",args:{widget:e}}),n.addItem({command:"workspace:export",args:{contextMenu:n,widget:e,init_overlay:l}}),n.addItem({command:"workspace:copy",args:{contextMenu:n,widget:e,init_overlay:l}}),n.addItem({type:"separator"}),n.addItem({command:"workspace:close",args:{widget:e}}),n.addItem({command:"workspace:help"})),this.customCommands.length>0&&(n.addItem({type:"separator"}),this.customCommands.forEach(p=>{n.addItem({command:p,args:{widget:e}})})),n.aboutToClose.connect(()=>{e&&(this.element.classList.remove("context-menu"),this.removeClass("context-menu"),e.removeClass("context-focus"),a?.node?.classList.remove("context-focus"))}),n}showContextMenu(e,n){if(!n.shiftKey){let a=this.createContextMenu(e);a.init_overlay(),a.open(n.clientX,n.clientY),n.preventDefault(),n.stopPropagation()}}clearLayout(){this.getAllWidgets().forEach(e=>e.close()),this.widgets.forEach(e=>e.close()),this.detailPanel.close(),this._linkedViewers=[],this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close())}setupMasterPanel(e){this.detailPanel.addClass("has-master-panel"),this.side===it.RIGHT?(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel),this.setRelativeSizes(e.slice().reverse())):(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel),this.setRelativeSizes(e))}_addContextMenuItem(e){this.customCommands.push(e.id),this.commands.addCommand(e.id,{execute:n=>e.execute({widget:n.widget}),label:e.label,isVisible:n=>e.isVisible({widget:n.widget}),mnemonic:0})}addViewer(e){let n=this._createWidgetAndNode({config:e});this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(),e.master?(this.masterPanel.isAttached||this.setupMasterPanel(cn),this.masterPanel.addWidget(n)):(this.detailPanel.isAttached||this.addWidget(this.detailPanel),this.dockpanel.addWidget(n,{mode:"split-right"})),this.update()}_createWidgetAndNode({config:e,slot:n}){let a=this._createNode(n),l=e.table,p=document.createElement("perspective-viewer");return p.setAttribute("slot",a.querySelector("slot").getAttribute("name")),l&&p.setAttribute("table",l),this._createWidget({config:e,node:a,viewer:p})}_gen_id(){let e=`PERSPECTIVE_GENERATED_ID_${Fi++}`;return this.element.querySelector(`[slot=${e}]`)&&(e=this._gen_id()),e}_createNode(e){let n=this.node.querySelector(`slot[name=${e}]`);if(n)n=n.parentElement.parentElement;else{let a=document.createElement("slot");e=e||this._gen_id(),a.setAttribute("name",e);let l=document.createElement("div");l.classList.add("viewer-container"),l.appendChild(a),n=document.createElement("div"),n.classList.add("workspace-widget"),n.appendChild(l)}return n}_createWidget({config:e,node:n,viewer:a}){if(!n){let c=a.getAttribute("slot");n=this.node.querySelector(`slot[name=${c}]`),n?n=n.parentElement.parentElement:n=this._createNode(c)}let l=this.tables.get(a.getAttribute("table")||e.table),p=new ft({node:n,viewer:a});p.task=(async()=>{l&&p.load(l),await p.restore(e)})();let f=new CustomEvent("workspace-new-view",{detail:{config:e,widget:p}});return this.element.dispatchEvent(f),p.title.closable=!0,this.element.appendChild(p.viewer),this._addWidgetEventListeners(p),p}_addWidgetEventListeners(e){this.listeners.has(e)&&this.listeners.get(e)();let n=p=>{p.detail||this._unmaximize()},a=p=>this.showContextMenu(e,p),l=async p=>{this.workspaceUpdated();let f=await p.target?.save();f&&(e.title.label=f.title)};e.node.addEventListener("contextmenu",a),e.viewer.addEventListener("perspective-toggle-settings",n),e.viewer.addEventListener("perspective-config-update",l),e.viewer.addEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),e.title.changed.connect(l),this.listeners.set(e,()=>{e.node.removeEventListener("contextmenu",a),e.viewer.removeEventListener("perspective-toggle-settings",n),e.viewer.removeEventListener("perspective-config-update",l),e.viewer.removeEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),e.title.changed.disconnect(l)})}getAllWidgets(){return[...this.masterPanel.widgets,...ot(this.dockpanel.widgets())]}async _fireUpdateEvent(){let e=await this.save();if(e){let n={};this.tables.forEach((a,l)=>{n[l]=a}),this.element.dispatchEvent(new CustomEvent("workspace-layout-update",{detail:{tables:n,layout:e}}))}}async workspaceUpdated(){this._save||(this._save=Bi(()=>this.dockpanel.mode!=="single-document"&&this._fireUpdateEvent(),500)),this._save()}};var mt;(function(t){function e(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}t.firstIndexOf=e;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}t.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}t.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}t.findLastIndex=l;function p(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}t.findFirstValue=p;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}t.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}t.lowerBound=c;function m(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}t.upperBound=m;function b(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}t.shallowEqual=b;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],E=0;E<s;++E)_[E]=u[r+E*o];return _}t.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],h=d<r?1:-1,s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}}t.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],h=u[r];u[d++]=h,u[r--]=o}}t.reverse=I;function g(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}t.rotate=g;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s)u[(r+s)%o]=d}}t.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}t.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}t.removeAt=y;function L(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=e(u,d,r,i);return o!==-1&&y(u,o),o}t.removeFirstOf=L;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}t.removeLastOf=T;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllOf=k;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,h=a(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeFirstWhere=S;function C(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,h=l(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeLastWhere=C;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllWhere=A})(mt||(mt={}));function mn(t){var e;return typeof t.iter=="function"?e=t.iter():e=new Pi(t),e}function Qn(t,e){for(var n=0,a=mn(t),l;(l=a.next())!==void 0;)if(e(l,n++)===!1)return}function ei(t,e){for(var n=0,a=mn(t),l;(l=a.next())!==void 0;)if(!e(l,n++))return!1;return!0}function ti(t,e){for(var n=0,a=mn(t),l;(l=a.next())!==void 0;)if(e(l,n++))return!0;return!1}var Pi=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),gc=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),bc=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),_c=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),yc=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var xc=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();var wc=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var Ic=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var Mc=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(e(a,this._index++))return a},t}();var Tc=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var kc=function(){function t(e,n,a){this._index=0,this._start=e,this._stop=n,this._step=a,this._length=hn.rangeLength(e,n,a)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),hn;(function(t){function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(hn||(hn={}));var Lc=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();function ni(t){var e;return typeof t.retro=="function"?e=t.retro():e=new Wi(t),e}var Wi=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var Ec=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),Jn;(function(t){function e(f,c,m){m===void 0&&(m=0);for(var b=new Array(c.length),x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}t.findIndices=e;function n(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=0,I=b.length;M<I;++M){var g=b[M]-m;x+=g*g}return{score:x,indices:b}}t.matchSumOfSquares=n;function a(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=m-1,I=0,g=b.length;I<g;++I){var v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}t.matchSumOfDeltas=a;function l(f,c,m){for(var b=[],x=0,M=0,I=c.length;x<I;){for(var g=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}t.highlight=l;function p(f,c){return f<c?-1:f>c?1:0}t.cmp=p})(Jn||(Jn={}));var Cc=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var Sc=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;e[n]=l}return e},t}();var ae;(function(t){function e(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}t.firstIndexOf=e;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}t.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}t.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;r<i?h=r+1+(o-i):h=r-i+1;for(var s=0;s<h;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}t.findLastIndex=l;function p(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}t.findFirstValue=p;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}t.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)<0?(s=z+1,_-=E+1):_=E}return s}t.lowerBound=c;function m(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var h=u.length;if(h===0)return 0;i<0?i=Math.max(0,i+h):i=Math.min(i,h-1),o<0?o=Math.max(0,o+h):o=Math.min(o,h-1);for(var s=i,_=o-i+1;_>0;){var E=_>>1,z=s+E;r(u[z],d)>0?_=E:(s=z+1,_-=E+1)}return s}t.upperBound=m;function b(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}t.shallowEqual=b;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var h=u.length;r===void 0?r=o<0?h-1:0:r<0?r=Math.max(r+h,o<0?-1:0):r>=h&&(r=o<0?h-1:h),i===void 0?i=o<0?-1:h:i<0?i=Math.max(i+h,o<0?-1:0):i>=h&&(i=o<0?h-1:h);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],E=0;E<s;++E)_[E]=u[r+E*o];return _}t.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],h=d<r?1:-1,s=d;s!==r;s+=h)u[s]=u[s+h];u[r]=o}}t.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],h=u[r];u[d++]=h,u[r--]=o}}t.reverse=I;function g(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var h=i-r+1;if(d>0?d=d%h:d<0&&(d=(d%h+h)%h),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}t.rotate=g;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var h;i<r?h=i+1+(o-r):h=i-r+1;for(var s=0;s<h;++s)u[(r+s)%o]=d}}t.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}t.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}t.removeAt=y;function L(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=e(u,d,r,i);return o!==-1&&y(u,o),o}t.removeFirstOf=L;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}t.removeLastOf=T;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllOf=k;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,h=a(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeFirstWhere=S;function C(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,h=l(u,d,r,i);return h!==-1&&(o=y(u,h)),{index:h,value:o}}t.removeLastWhere=C;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var h=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?h++:h>0&&(u[s-h]=u[s]);return h>0&&(u.length=o-h),h}t.removeAllWhere=A})(ae||(ae={}));function Hi(t){var e;return typeof t.iter=="function"?e=t.iter():e=new Ni(t),e}function Ot(t,e){for(var n=0,a=Hi(t),l;(l=a.next())!==void 0;)if(e(l,n++)===!1)return}var Ni=function(){function t(e){this._index=0,this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),Dc=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},t}(),zc=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},t}(),Oc=function(){function t(e,n){n===void 0&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},t}(),Rc=function(){function t(e){this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var Bc=function(){function t(e){this._cloned=!1,this._source=e,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},t}();function vn(){return new Ki}var Ki=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var Fc=function(){function t(e,n){this._source=e,this._index=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},t}();var Pc=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var e=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(e(a,this._index++))return a},t}();var Wc=function(){function t(e,n){this._index=0,this._source=e,this._fn=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},t}();var Hc=function(){function t(e,n,a){this._index=0,this._start=e,this._stop=n,this._step=a,this._length=pn.rangeLength(e,n,a)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),pn;(function(t){function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(pn||(pn={}));var Nc=function(){function t(e,n){this._value=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var Kc=function(){function t(e){this._source=e,this._index=e.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var Vc=function(){function t(e,n){this._source=e,this._step=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},t}(),ii;(function(t){function e(f,c,m){m===void 0&&(m=0);for(var b=new Array(c.length),x=0,M=m,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;b[x]=M}return b}t.findIndices=e;function n(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=0,I=b.length;M<I;++M){var g=b[M]-m;x+=g*g}return{score:x,indices:b}}t.matchSumOfSquares=n;function a(f,c,m){m===void 0&&(m=0);var b=e(f,c,m);if(!b)return null;for(var x=0,M=m-1,I=0,g=b.length;I<g;++I){var v=b[I];x+=v-M-1,M=v}return{score:x,indices:b}}t.matchSumOfDeltas=a;function l(f,c,m){for(var b=[],x=0,M=0,I=c.length;x<I;){for(var g=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<g&&b.push(f.slice(M,g)),g<v+1&&b.push(m(f.slice(g,v+1))),M=v+1}return M<f.length&&b.push(f.slice(M)),b}t.highlight=l;function p(f,c){return f<c?-1:f>c?1:0}t.cmp=p})(ii||(ii={}));var qc=function(){function t(e,n){this._source=e,this._count=n}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},t}();var Uc=function(){function t(e){this._source=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(e){return e.clone()}))},t.prototype.next=function(){for(var e=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;e[n]=l}return e},t}();var ri=function(){function t(e){this._root=new Z.LeafNode,this.cmp=e}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){var e=Z.firstLeaf(this._root);return e.size>0?e.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){var e=Z.lastLeaf(this._root);return e.size>0?e.items[e.size-1]:void 0},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return Z.iterItems(this._root)},t.prototype.retro=function(){return Z.retroItems(this._root)},t.prototype.slice=function(e,n){return Z.sliceItems(this._root,e,n)},t.prototype.retroSlice=function(e,n){return Z.retroSliceItems(this._root,e,n)},t.prototype.at=function(e){return Z.itemAt(this._root,e)},t.prototype.has=function(e,n){return Z.hasItem(this._root,e,n)},t.prototype.indexOf=function(e,n){return Z.indexOf(this._root,e,n)},t.prototype.get=function(e,n){return Z.getItem(this._root,e,n)},t.prototype.assign=function(e){this.clear(),this.update(e)},t.prototype.insert=function(e){var n=Z.insertItem(this._root,e,this.cmp);return this._root=Z.maybeSplitRoot(this._root),n},t.prototype.update=function(e){var n=this;Ot(e,function(a){n.insert(a)})},t.prototype.delete=function(e,n){var a=Z.deleteItem(this._root,e,n);return this._root=Z.maybeExtractRoot(this._root),a},t.prototype.remove=function(e){var n=Z.removeItem(this._root,e);return this._root=Z.maybeExtractRoot(this._root),n},t.prototype.clear=function(){Z.clear(this._root),this._root=new Z.LeafNode},t}();(function(t){function e(n,a){var l=new t(a);return l.assign(n),l}t.from=e})(ri||(ri={}));var Z;(function(t){var e=function(){function s(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),s}();t.BranchNode=e;var n=function(){function s(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),s}();t.LeafNode=n;function a(s){for(;s.type===0;)s=s.children[0];return s}t.firstLeaf=a;function l(s){for(;s.type===0;)s=s.children[s.children.length-1];return s}t.lastLeaf=l;function p(s){var _=a(s);return new C(_,0,-1)}t.iterItems=p;function f(s){var _=l(s);return new A(_,_.size-1,-1)}t.retroItems=f;function c(s,_,E){_===void 0?_=0:_<0?_=Math.max(0,_+s.size):_=Math.min(_,s.size),E===void 0?E=s.size:E<0?E=Math.max(0,E+s.size):E=Math.min(E,s.size);var z=Math.max(0,E-_);if(z===0)return vn();for(;s.type===0;){var O=u(s.sizes,_);O>0&&(_-=s.sizes[O-1]),s=s.children[O]}return new C(s,_,z)}t.sliceItems=c;function m(s,_,E){_===void 0?_=s.size-1:_<0?_=Math.max(-1,_+s.size):_=Math.min(_,s.size-1),E===void 0?E=-1:E<0?E=Math.max(-1,E+s.size):E=Math.min(E,s.size-1);var z=Math.max(0,_-E);if(z===0)return vn();for(;s.type===0;){var O=u(s.sizes,_);O>0&&(_-=s.sizes[O-1]),s=s.children[O]}return new A(s,_,z)}t.retroSliceItems=m;function b(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){for(;s.type===0;){var E=u(s.sizes,_);E>0&&(_-=s.sizes[E-1]),s=s.children[E]}return s.items[_]}}t.itemAt=b;function x(s,_,E){for(;s.type===0;){var z=d(s.items,_,E);s=s.children[z]}var O=r(s.items,_,E);return O>=0}t.hasItem=x;function M(s,_,E){for(var z=0;s.type===0;){var O=d(s.items,_,E);O>0&&(z+=s.sizes[O-1]),s=s.children[O]}var H=r(s.items,_,E);return H>=0?z+H:-z+H}t.indexOf=M;function I(s,_,E){for(;s.type===0;){var z=d(s.items,_,E);s=s.children[z]}var O=r(s.items,_,E);return O>=0?s.items[O]:void 0}t.getItem=I;function g(s,_,E){if(s.type===1){var z=r(s.items,_,E),O;return z>=0?(O=s.items[z],s.items[z]=_):(O=void 0,ae.insert(s.items,-z-1,_)),O}var H=d(s.items,_,E),K=s.children[H],$=K.size,V=g(K,_,E),U=K.size;if(s.items[H]=K.items[0],$===U)return V;if(K.width>k){var j=o(K);ae.insert(s.children,H+1,j),ae.insert(s.items,H+1,j.items[0])}return i(s,H),V}t.insertItem=g;function v(s,_,E){if(s.type===1){var z=r(s.items,_,E);return z<0?void 0:ae.removeAt(s.items,z)}var O=d(s.items,_,E),H=s.children[O],K=H.size,$=v(H,_,E),V=H.size;return K===V||(s.items[O]=H.items[0],H.width<S&&(O=h(s,O)),i(s,O)),$}t.deleteItem=v;function w(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){if(s.type===1)return ae.removeAt(s.items,_);var E=u(s.sizes,_);E>0&&(_-=s.sizes[E]);var z=s.children[E],O=w(z,_);return s.items[E]=z.items[0],z.width<S&&(E=h(s,E)),i(s,E),O}}t.removeItem=w;function y(s){s.type===0?(Ot(s.children,y),s.children.length=0,s.sizes.length=0,s.items.length=0):(s.items.length=0,s.next=null,s.prev=null)}t.clear=y;function L(s){if(s.width<=k)return s;var _=new e,E=o(s);return _.sizes[0]=s.size,_.sizes[1]=s.size+E.size,_.children[0]=s,_.children[1]=E,_.items[0]=s.items[0],_.items[1]=E.items[0],_}t.maybeSplitRoot=L;function T(s){if(s.type===1||s.children.length>1)return s;var _=s.children.pop();return y(s),_}t.maybeExtractRoot=T;var k=32,S=k>>1,C=function(){function s(_,E,z){this._node=_,this._index=E,this._count=z}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},s}(),A=function(){function s(_,E,z){this._node=_,this._index=E,this._count=z}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},s}();function u(s,_){for(var E=s.length,z=0;z<E;++z)if(s[z]>_)return z;return E-1}function d(s,_,E){for(var z=s.length,O=1;O<z;++O)if(E(s[O],_)>0)return O-1;return z-1}function r(s,_,E){for(var z=s.length,O=0;O<z;++O){var H=E(s[O],_);if(H===0)return O;if(H>0)return-O-1}return-z-1}function i(s,_){for(var E=s.sizes,z=s.children,O=_>0?E[_-1]:0,H=z.length;_<H;++_)O=E[_]=O+z[_].size;E.length=z.length}function o(s){if(s.type===1){for(var _=new n,E=s.items,z=_.items,O=S,H=E.length;O<H;++O)z.push(E[O]);return E.length=S,s.next&&(s.next.prev=_),_.next=s.next,_.prev=s,s.next=_,_}for(var K=new e,$=s.children,V=K.children,O=S,H=$.length;O<H;++O)V.push($[O]);$.length=S;for(var U=s.items,j=K.items,O=S,H=U.length;O<H;++O)j.push(U[O]);return U.length=S,i(s,S),i(K,0),K}function h(s,_){var E,z,O,H,K,$,V=s.children[_],U=_===0?s.children[_+1]:s.children[_-1],j=_===0,Q=V.type===1,ee=U.width>S;if(Q&&ee&&j){var F=V,W=U;return F.items.push(W.items.shift()),s.items[_+1]=W.items[0],_}if(Q&&ee&&!j){var F=V,W=U;return F.items.unshift(W.items.pop()),s.items[_]=F.items[0],_-1}if(Q&&!ee&&j){var F=V,W=U;return(E=W.items).unshift.apply(E,F.items),ae.removeAt(s.children,_),ae.removeAt(s.items,_+1),F.prev&&(F.prev.next=W),W.prev=F.prev,y(F),_}if(Q&&!ee&&!j){var F=V,W=U;return(z=W.items).push.apply(z,F.items),ae.removeAt(s.children,_),ae.removeAt(s.items,_),F.next&&(F.next.prev=W),W.next=F.next,y(F),_-1}if(!Q&&ee&&j){var F=V,W=U;return F.children.push(W.children.shift()),F.items.push(W.items.shift()),s.items[_+1]=W.items[0],i(F,F.width-1),i(W,0),_}if(!Q&&ee&&!j){var F=V,W=U;return F.children.unshift(W.children.pop()),F.items.unshift(W.items.pop()),s.items[_]=F.items[0],i(F,0),i(W,W.width-1),_-1}if(!Q&&!ee&&j){var F=V,W=U;return(O=W.children).unshift.apply(O,F.children),(H=W.items).unshift.apply(H,F.items),ae.removeAt(s.children,_),ae.removeAt(s.items,_+1),i(W,0),F.children.length=0,y(F),_}if(!Q&&!ee&&!j){var F=V,W=U;return(K=W.children).push.apply(K,F.children),($=W.items).push.apply($,F.items),ae.removeAt(s.children,_),ae.removeAt(s.items,_),i(W,0),F.children.length=0,y(F),_-1}throw"unreachable"}})(Z||(Z={}));var Rt=function(){function t(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return new t.ForwardValueIterator(this._first)},t.prototype.retro=function(){return new t.RetroValueIterator(this._last)},t.prototype.nodes=function(){return new t.ForwardNodeIterator(this._first)},t.prototype.retroNodes=function(){return new t.RetroNodeIterator(this._last)},t.prototype.assign=function(e){var n=this;this.clear(),Ot(e,function(a){n.addLast(a)})},t.prototype.push=function(e){this.addLast(e)},t.prototype.pop=function(){return this.removeLast()},t.prototype.shift=function(e){this.addFirst(e)},t.prototype.unshift=function(){return this.removeFirst()},t.prototype.addFirst=function(e){var n=new De.LinkedListNode(this,e);return this._first?(n.next=this._first,this._first.prev=n,this._first=n):(this._first=n,this._last=n),this._size++,n},t.prototype.addLast=function(e){var n=new De.LinkedListNode(this,e);return this._last?(n.prev=this._last,this._last.next=n,this._last=n):(this._first=n,this._last=n),this._size++,n},t.prototype.insertBefore=function(e,n){if(!n||n===this._first)return this.addFirst(e);if(!(n instanceof De.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new De.LinkedListNode(this,e),l=n,p=l.prev;return a.next=l,a.prev=p,l.prev=a,p.next=a,this._size++,a},t.prototype.insertAfter=function(e,n){if(!n||n===this._last)return this.addLast(e);if(!(n instanceof De.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new De.LinkedListNode(this,e),l=n,p=l.next;return a.next=p,a.prev=l,l.next=a,p.prev=a,this._size++,a},t.prototype.removeFirst=function(){var e=this._first;if(!!e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},t.prototype.removeLast=function(){var e=this._last;if(!!e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},t.prototype.removeNode=function(e){if(!(e instanceof De.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");var n=e;n===this._first&&n===this._last?(this._first=null,this._last=null):n===this._first?(this._first=n.next,this._first.prev=null):n===this._last?(this._last=n.prev,this._last.next=null):(n.next.prev=n.prev,n.prev.next=n.next),n.list=null,n.next=null,n.prev=null,this._size--},t.prototype.clear=function(){for(var e=this._first;e;){var n=e.next;e.list=null,e.prev=null,e.next=null,e=n}this._first=null,this._last=null,this._size=0},t}();(function(t){function e(f){var c=new t;return c.assign(f),c}t.from=e;var n=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c.value}},f}();t.ForwardValueIterator=n;var a=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c.value}},f}();t.RetroValueIterator=a;var l=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c}},f}();t.ForwardNodeIterator=l;var p=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c}},f}();t.RetroNodeIterator=p})(Rt||(Rt={}));var De;(function(t){var e=function(){function n(a,l){this.list=null,this.next=null,this.prev=null,this.list=a,this.value=l}return n}();t.LinkedListNode=e})(De||(De={}));var Bt;(d=>{function t(r,i){let o=b.get(r);if(!o||o.length===0){L(r,i);return}ei(ni(o),s=>s?y(s,r,i):!0)&&L(r,i)}d.sendMessage=t;function e(r,i){if(!i.isConflatable){T(r,i);return}ti(m,h=>h.handler!==r||!h.msg||h.msg.type!==i.type||!h.msg.isConflatable?!1:h.msg.conflate(i))||T(r,i)}d.postMessage=e;function n(r,i){let o=b.get(r);o&&o.indexOf(i)!==-1||(o?o.push(i):b.set(r,[i]))}d.installMessageHook=n;function a(r,i){let o=b.get(r);if(!o)return;let h=o.indexOf(i);h!==-1&&(o[h]=null,S(o))}d.removeMessageHook=a;function l(r){let i=b.get(r);i&&i.length>0&&(mt.fill(i,null),S(i)),Qn(m,o=>{o.handler===r&&(o.handler=null,o.msg=null)})}d.clearData=l;function p(){g||I===0||(w(I),g=!0,k(),g=!1)}d.flush=p;function f(){return M}d.getExceptionHandler=f;function c(r){let i=M;return M=r,i}d.setExceptionHandler=c;let m=new Rt,b=new WeakMap,x=new Set,M=r=>{console.error(r)},I=0,g=!1,v=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)(),w=(()=>typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearImmediate)();function y(r,i,o){let h=!0;try{typeof r=="function"?h=r(i,o):h=r.messageHook(i,o)}catch(s){M(s)}return h}function L(r,i){try{r.processMessage(i)}catch(o){M(o)}}function T(r,i){m.addLast({handler:r,msg:i}),I===0&&(I=v(k))}function k(){if(I=0,m.isEmpty)return;let r={handler:null,msg:null};for(m.addLast(r);;){let i=m.removeFirst();if(i===r)return;i.handler&&i.msg&&t(i.handler,i.msg)}}function S(r){x.size===0&&v(C),x.add(r)}function C(){x.forEach(A),x.clear()}function A(r){mt.removeAllWhere(r,u)}function u(r){return r===null}})(Bt||={});function Vi(t){let e=document.createElement("div");return e.innerHTML=t,Array.prototype.slice.call(e.children)[0]}function qi(t){if(t.content)return;t.content=document.createDocumentFragment();let e;for(;e=t.firstChild;)Node.prototype.appendChild.call(t.content,e)}function Ui(t,e,n){let a=Vi(t);qi(a),e&&(a.innerHTML=`<style>${e.toString()}</style>`+a.innerHTML),a.innerHTML=`<style id="psp_styles" scope="${a.getAttribute("id")}">test{}</style>`+a.innerHTML;let l=0,p=class extends n{attributeChangedCallback(c,m,b){l>0||(b===null&&(b="null"),c[0]!=="_"&&m!=b&&!!Object.getOwnPropertyDescriptor(n.prototype,c).set&&(this[c]=b))}_setAttributeSafe(c,m){l++;try{this.setAttribute(c,m)}finally{l--}}connectedCallback(){if(!this._initialized){this._initializing=!0;var c=document.importNode(a.content,!0);this.attachShadow({mode:"open"}),this._vieux&&(this._vieux.appendChild(c),c=this._vieux),this.shadowRoot.appendChild(c),super.connectedCallback&&super.connectedCallback();for(let m of Object.getOwnPropertyNames(n.prototype))m!=="connectedCallback"&&this.hasAttribute(m)&&m[0]!=="_"&&!!Object.getOwnPropertyDescriptor(n.prototype,m).set&&(this[m]=this.getAttribute(m));this._initializing=!1,this._initialized=!0}}static get observedAttributes(){return Object.getOwnPropertyNames(n.prototype)}};for(let c of Object.getOwnPropertyNames(n.prototype)){let m=Object.getOwnPropertyDescriptor(n.prototype,c);if(m&&m.set){let b=m.set;m.set=function(x){if(!this.hasAttribute(c)||this.getAttribute(c)!==x){this.setAttribute(c,x);return}!this._initializing&&!this._initialized||b.call(this,x)},Object.defineProperty(n.prototype,c,m)}}let f=a.getAttribute("id");window.customElements.define(f,p)}function oi(t,...e){let n=e.map(a=>a.toString()).join(`
`);return function(a){return Ui(t,{toString:()=>n},a)}}var ai='.workspace-master-widget{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-master-widget[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.p-DockPanel-widget{border:1px solid#eaeaea;border-width:0px!important;min-width:300px;min-height:200px;}.workspace-detail-widget{--config-button-icon--content:""!important;}.context-menu>perspective-viewer.context-focus{opacity:1;filter:none;}.context-menu>perspective-viewer{filter:saturate(0);}.context-menu>perspective-viewer>*{pointer-events:none;}perspective-viewer{flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;}.lm-mod-override-cursor{cursor:grabbing!important;}.lm-mod-override-cursor perspective-viewer>*{pointer-events:none;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-Menu{font-size:12px;padding:8px;background:white;color:#666;border:1px solid var(--inactive--color);border-radius:3px;max-width:350px;}.p-Menu.perspective-workspace-menu .p-Menu-item{padding-left:37px!important;min-width:var(--min-width);}.p-Menu-item.p-mod-active{background-color:var(--icon--color);color:var(--plugin--background);}.p-Menu-item.p-mod-disabled{opacity:0.5;}.p-Menu-itemIcon{width:24px;height:12px;margin-right:4px;}.p-Menu-itemLabel{flex:1 1;padding:4px 2px 4px 2px;}.p-Menu-itemMnemonic{text-decoration:underline;}.p-Menu-itemShortcut{padding:4px 0px;}.p-Menu-itemSubmenuIcon{width:24px;height:18px;}.p-Menu-item{display:flex;align-items:center;outline:none;margin:0 -8px;padding:0 8px;}.p-Menu-item[data-type="separator"]>div{padding:0;height:9px;}.p-Menu-item[data-type="separator"]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid#dddddd;}.p-Menu-itemIcon::before,.p-Menu-itemSubmenuIcon::before{font-family:"Material Icons";}.p-MenuBar-menu{transform:translateY(-1px);}.p-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important;}.p-MenuBar-item.p-mod-active{background:rgba(0,0,0,0.2);}.p-MenuBar.p-mod-active .p-MenuBar-item.p-mod-active{z-index:10001;background:rgba(0,0,0,0.2);}.p-Menu-itemIcon:before{content:attr(content);font-family:"Roboto Mono";}[data-type="submenu"] .lm-Menu-itemSubmenuIcon:before{content:">";font-family:"Roboto Mono";height:18px;}.p-mod-drag-image.p-TabBar-tab{display:none;}';var gn=class extends HTMLElement{set side(e){this.setAttribute("side",e),this.workspace&&(this.workspace.side=e)}get side(){return this.getAttribute("side")}save(){return this.workspace.save()}async restore(e){await this.workspace.restore(e)}async flush(){await Promise.all(Array.from(this.querySelectorAll("perspective-viewer")).map(e=>e.flush()))}addTable(e,n){this.workspace.addTable(e,n)}getTable(e){return this.workspace.getTable(e)}removeTable(e){return this.workspace.removeTable(e)}get tables(){return this.workspace.tables}notifyResize(){this.workspace.update()}_light_dom_changed(){let e=Array.from(this.childNodes);for(let n of e)n.tagName==="PERSPECTIVE-VIEWER"&&this.workspace.update_widget_for_viewer(n);this.workspace.remove_unslotted_widgets(e),this.workspace.update_details_panel(e)}_register_light_dom_listener(){let e=new MutationObserver(this._light_dom_changed.bind(this)),n={attributes:!1,childList:!0,subtree:!1};e.observe(this,n),this._light_dom_changed()}connectedCallback(){if(!this.side){this.side=this.side||it.LEFT;let e=this.shadowRoot.querySelector("#container");this.workspace=new ht(this,{side:this.side}),this._register_light_dom_listener(),Bt.sendMessage(this.workspace,R.Msg.BeforeAttach),e.insertBefore(this.workspace.node,null),Bt.sendMessage(this.workspace,R.Msg.AfterAttach),window.onresize=this.workspace.update.bind(this.workspace)}}},bn=document.createElement("style");bn.toggleAttribute("injected",!0);bn.innerHTML=ai;document.head.appendChild(bn);oi(wn,xn)(gn);export{ft as PerspectiveViewerWidget,ht as PerspectiveWorkspace};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=perspective-workspace.js.map
